var officeOnlinePerf;!function(){"use strict";var e={d:function(r,s){for(var t in s)e.o(s,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:s[t]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{getJSCPUProfilingPackageRetriever:function(){return Ms}});class s{start(){this.logger.logNullJSCPUProfilerStartCalled()}stop(){this.logger.logNullJSCPUProfilerStopCalled()}subscribeProfilerObserver(e,r){this.logger.logNullJSCPUProfilerSubscribeProfilerObserverCalled()}unsubscribeProfilerObserver(e,r){this.logger.logNullJSCPUProfilerUnsubscribeProfilerObserverCalled()}subscribeCallTreeCustomPropertiesRetriever(e){this.logger.logNullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled()}unsubscribeCallTreeCustomPropertiesRetriever(e){this.logger.logNullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled()}subscribeCallTreeCustomFilterer(e){this.logger.logNullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled()}unsubscribeCallTreeCustomFilterer(e){this.logger.logNullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled()}processProfiles(){this.logger.logNullJSCPUProfilerProcessProfilesCalled()}constructor(e){this.logger=e}}class t{getCurrentTimestamp(){return performance.now()}}const o=-1;class i{start(){this.unsupportedEnvironment?this.logger.logStopWatchStartingInUnsupportedEnvironment():this.startTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}stop(){this.unsupportedEnvironment?this.logger.logStopWatchStoppingInUnsupportedEnvironment():this.stopTimestamp=this.performanceTimestampRetriever.getCurrentTimestamp()}getElapsedTime(){if(this.startTimestamp===o)return this.logger.logGetElapsedTimeCalledWithoutCallingStart(),o;if(this.stopTimestamp===o)return this.logger.logGetElapsedTimeCalledWithoutCallingStop(),o;const e=this.stopTimestamp-this.startTimestamp;return this.resetTimestamps(),e}resetTimestamps(){this.startTimestamp=o,this.stopTimestamp=o}constructor(e,r,s){return this.performanceAPIChecker=e,this.performanceTimestampRetriever=r,this.logger=s,this.startTimestamp=o,this.stopTimestamp=o,this.performanceAPIChecker.isPerformanceAPIAvailable()?this.performanceAPIChecker.isPerformanceNowDefined()?void(this.unsupportedEnvironment=!1):(this.logger.logPerformanceNowMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0)):(this.logger.logPerformanceMissingInJSEnvironment(),void(this.unsupportedEnvironment=!0))}}class a{sendTraceTag(){}shipAssertTag(){}debugAssertTag(){}setCorrelationId(){}}const n=new class{setCorrelationId(e){this.externalLogger.setCorrelationId(e)}setLogger(e){this.externalLogger=e}sendTraceTag(e,r,s,t){this.externalLogger.sendTraceTag(e,r,s,t)}debugAssertTag(e,r,s,t){this.externalLogger.debugAssertTag(e,r,s,t)}shipAssertTag(e,r,s,t){this.externalLogger.shipAssertTag(e,r,s,t)}constructor(){this.externalLogger=new a}};function l(e){if(!e)throw new Error("The 'logger' argument is missing");n.setLogger(e)}var d,c;!function(e){e[e.msoulscat_ES_EWAJS=0]="msoulscat_ES_EWAJS",e[e.msoulscat_ES_EWAJSGrid=1]="msoulscat_ES_EWAJSGrid",e[e.msoulscat_ES_EWAJSChart=6]="msoulscat_ES_EWAJSChart",e[e.msoulscat_MSOSP_FileMenuCommands=202]="msoulscat_MSOSP_FileMenuCommands",e[e.msoulscat_MSOSP_AddInCommands=220]="msoulscat_MSOSP_AddInCommands",e[e.msoulscat_MSOSP_OTelJS=225]="msoulscat_MSOSP_OTelJS",e[e.msoulscat_MSOSP_OTelJSInWebWoker=227]="msoulscat_MSOSP_OTelJSInWebWoker",e[e.msoulscat_MSOSP_OTelJSWebWorkerPrototype=228]="msoulscat_MSOSP_OTelJSWebWorkerPrototype",e[e.msoulscat_Wac_WordViewer=301]="msoulscat_Wac_WordViewer",e[e.msoulscat_Wac_BrowserGeneral=306]="msoulscat_Wac_BrowserGeneral",e[e.msoulscat_Wac_TaskPane=320]="msoulscat_Wac_TaskPane",e[e.msoulscat_Wac_OneNoteGeneral=339]="msoulscat_Wac_OneNoteGeneral",e[e.msoulscat_Wac_Ribbon=340]="msoulscat_Wac_Ribbon",e[e.msoulscat_Wac_WacFeedback=356]="msoulscat_Wac_WacFeedback",e[e.msoulscat_Wac_WopiPendingApplication=379]="msoulscat_Wac_WopiPendingApplication",e[e.msoulscat_Wac_Telemetry=383]="msoulscat_Wac_Telemetry",e[e.msoulscat_Wac_WacCatchUpActivities=391]="msoulscat_Wac_WacCatchUpActivities",e[e.msoulscat_Wac_Dictation=394]="msoulscat_Wac_Dictation",e[e.msoulscat_Wac_OneNoteSync=395]="msoulscat_Wac_OneNoteSync",e[e.msoulscat_Wac_VisioApp=700]="msoulscat_Wac_VisioApp",e[e.msoulscat_OneNoteOnline_EditableCache=1601]="msoulscat_OneNoteOnline_EditableCache",e[e.msoulscat_Wac_PptAnimation=800]="msoulscat_Wac_PptAnimation",e[e.msoulscat_Wac_PptLive=833]="msoulscat_Wac_PptLive",e[e.msoulscat_Wac_PptMWeb=834]="msoulscat_Wac_PptMWeb",e[e.msoulscat_Wac_PptGc2General=835]="msoulscat_Wac_PptGc2General",e[e.msoulscat_Wac_PptGc2GraphicHost=836]="msoulscat_Wac_PptGc2GraphicHost",e[e.msoulscat_Wac_PptGc2Operation=837]="msoulscat_Wac_PptGc2Operation",e[e.msoulscat_Wac_PptGc2EditCanvas=852]="msoulscat_Wac_PptGc2EditCanvas",e[e.msoulscat_Wac_PptDataSync=844]="msoulscat_Wac_PptDataSync",e[e.msoulscat_Wac_PptFluidRuntime=848]="msoulscat_Wac_PptFluidRuntime",e[e.msoulscat_Wac_PptShape=815]="msoulscat_Wac_PptShape",e[e.msoulscat_Wac_PptSession=817]="msoulscat_Wac_PptSession",e[e.msoulscat_Wac_PptSlideshow=830]="msoulscat_Wac_PptSlideshow",e[e.msoulscat_Wac_PptView=822]="msoulscat_Wac_PptView",e[e.msoulscat_Wac_PptVideos=846]="msoulscat_Wac_PptVideos",e[e.msoulscat_Uci_Insights=1303]="msoulscat_Uci_Insights",e[e.msoulscat_Wac_VersionHistory=2300]="msoulscat_Wac_VersionHistory",e[e.msoulscat_Wac_WordPresence=302]="msoulscat_Wac_WordPresence",e[e.msoulscat_Wac_OAuth=3e3]="msoulscat_Wac_OAuth",e[e.msoulscat_Wac_WordVersionHistory=3005]="msoulscat_Wac_WordVersionHistory",e[e.msoulscat_Wac_LivePersonaCard=3006]="msoulscat_Wac_LivePersonaCard",e[e.msoulscat_Wac_CatchUpFlyout=3012]="msoulscat_Wac_CatchUpFlyout",e[e.msoulscat_Wac_WordDesigner=3016]="msoulscat_Wac_WordDesigner",e[e.msoulscat_Wac_ModernFontPicker=3021]="msoulscat_Wac_ModernFontPicker",e[e.msoulscat_Wac_UnifiedUiHost=3027]="msoulscat_Wac_UnifiedUiHost",e[e.msoulscat_Wac_EquationTools=3033]="msoulscat_Wac_EquationTools",e[e.msoulscat_Osf_Latency=1401]="msoulscat_Osf_Latency",e[e.msoulscat_Osf_Notification=1402]="msoulscat_Osf_Notification",e[e.msoulscat_Osf_Runtime=1403]="msoulscat_Osf_Runtime",e[e.msoulscat_Wac_AiMaker=3041]="msoulscat_Wac_AiMaker",e[e.msoulscat_Wac_AiRewrite=3043]="msoulscat_Wac_AiRewrite",e[e.msoulscat_Wac_AiInsert=3044]="msoulscat_Wac_AiInsert",e[e.msoulscat_Wac_AiSummarize=3047]="msoulscat_Wac_AiSummarize",e[e.msoulscat_Wac_CopilotCompose=3048]="msoulscat_Wac_CopilotCompose",e[e.msoulscat_Wac_Skittles=3049]="msoulscat_Wac_Skittles",e[e.msoulscat_Wac_CopilotChat=3050]="msoulscat_Wac_CopilotChat",e[e.msoulscat_Wac_Syntex=3051]="msoulscat_Wac_Syntex",e[e.msoulscat_Wac_WireGraph=3052]="msoulscat_Wac_WireGraph",e[e.msoulscat_Wac_CshCopilot=3053]="msoulscat_Wac_CshCopilot",e[e.msoulscat_Wac_CopilotProactiveSummary=3055]="msoulscat_Wac_CopilotProactiveSummary",e[e.msoulscat_Wac_CopilotProactiveShared=3056]="msoulscat_Wac_CopilotProactiveShared",e[e.msoulscat_Wac_CopilotCursor=3057]="msoulscat_Wac_CopilotCursor",e[e.msoulscat_Wac_WasmGeneral=3059]="msoulscat_Wac_WasmGeneral",e[e.msoulscat_Wac_WasmTextLayout=3060]="msoulscat_Wac_WasmTextLayout",e[e.msoulscat_Wac_WasmSmartArt=3061]="msoulscat_Wac_WasmSmartArt",e[e.msoulscat_Wac_WasmClient=3062]="msoulscat_Wac_WasmClient",e[e.msoulscat_Wac_WasmNative=3063]="msoulscat_Wac_WasmNative"}(d||(d={})),function(e){e[e.Error=10]="Error",e[e.Warning=15]="Warning",e[e.Important=20]="Important",e[e.Info=50]="Info",e[e.Verbose=100]="Verbose",e[e.Spam=200]="Spam"}(c||(c={}));class g{logPerformanceMissingInJSEnvironment(){n.sendTraceTag(579110677,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find performance in the JS environment")}logPerformanceNowMissingInJSEnvironment(){n.sendTraceTag(579110678,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find performance.now in the JS environment")}logStopWatchStartingInUnsupportedEnvironment(){n.sendTraceTag(579110679,d.msoulscat_Wac_Telemetry,c.Error,"Starting the stopwatch in an unsupported environment. Incorrect data will be stored")}logStopWatchStoppingInUnsupportedEnvironment(){n.sendTraceTag(579110680,d.msoulscat_Wac_Telemetry,c.Error,"Stopping the stopwatch in an unsupported environment. Incorrect data will be stored")}logGetElapsedTimeCalledWithoutCallingStart(){n.sendTraceTag(579110683,d.msoulscat_Wac_Telemetry,c.Error,"Stopwatch needs to be started before you can get elapsed time")}logGetElapsedTimeCalledWithoutCallingStop(){n.sendTraceTag(579110684,d.msoulscat_Wac_Telemetry,c.Error,"Stopwatch needs to be stopped before you can get elapsed time")}}class u{isPerformanceAPIAvailable(){return null!=performance}isPerformanceNowDefined(){return"now"in performance}}class m{static createNewStopWatch(){const e=new g,r=new u,s=new t;return new i(r,s,e)}}class p{serializeException(e){this.wasSerializeExceptionCalled=!0,null!=JSON&&"stringify"in JSON?this.serializedException=null!=Object&&"getOwnPropertyNames"in Object?JSON.stringify(e,Object.getOwnPropertyNames(e)):"":this.serializedException=""}retrieveSerializedException(){return this.wasSerializeExceptionCalled?(this.wasSerializeExceptionCalled=!1,this.serializedException):""}constructor(){this.serializedException="",this.wasSerializeExceptionCalled=!1}}class h{logOperation(e,r,s,t,o,i,a,n){}logFallbackResultReturned(){}}const T=new class{push(e){this.elements.unshift(e)}pop(){return this.elements.shift()}peek(){return this.elements.length>0?this.elements[0]:void 0}constructor(){this.elements=[]}};class f{addLog(e){this.logs.push(e)}addProperty(e,r){this.propertyBag.set(e,r)}getResult(){return this.operationResult.result}static startNew(e,r,s,t,o,i){return new f(e,r,s,null!=o&&o,null==i?new p:i,null==t?new h:t)}constructor(e,r,s,t,o,i){const a=T.peek(),n=void 0!==a?a:"";T.push(e),this.logs=[],this.propertyBag=new Map;const l=m.createNewStopWatch();let d;l.start();let c=!1;try{d=r(this),c=d.didOperationFailUnexpectedly}catch(e){o.serializeException(e),this.exception=o.retrieveSerializedException(),c=!0}this.operationResult=void 0!==d?d:s,l.stop(),!c&&t||i.logOperation(e,n,this.operationResult.didOperationSucceed,l.getElapsedTime(),c,this.logs,this.propertyBag,this.exception),T.pop()}}class P{static generateOperationResult(e){return new P(e.didOperationSucceed,null!=e.didOperationFailUnexpectedly&&e.didOperationFailUnexpectedly,e.result)}constructor(e,r,s){this.didOperationSucceed=e,this.didOperationFailUnexpectedly=r,this.result=s}}class C{hasProperty(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckWindowProperty",(r=>{if(null==window)return this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("PropertyNameChecked",e);const s=e in window;return r.addProperty("DoesPropertyExistOnWindow",s),P.generateOperationResult({didOperationSucceed:!0,result:s})}),r).getResult()}constructor(e){this.logger=e}}class S{logWindowMissingInJSEnvironment(){n.sendTraceTag(578834847,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window in the JS environment")}logEmptyUserAgentString(){n.sendTraceTag(578834850,d.msoulscat_Wac_Telemetry,c.Error,"Empty user agent string")}logChromiumOnIOS(){n.sendTraceTag(578834851,d.msoulscat_Wac_Telemetry,c.Info,"iOS version of Chromium based browser detected")}logBrowserUserAgentNotChromiumBased(){n.sendTraceTag(578834880,d.msoulscat_Wac_Telemetry,c.Info,"Browser not chromium based")}logUserAgentSpoofedToBeChromium(){n.sendTraceTag(578834881,d.msoulscat_Wac_Telemetry,c.Info,"Browser user agent spoofed to be chromium based")}logUserAgentToParseChromiumMajorVersionNumber(e){n.sendTraceTag(578834882,d.msoulscat_Wac_Telemetry,c.Info,e)}logChromeNotPresentInUserAgent(){n.sendTraceTag(578834883,d.msoulscat_Wac_Telemetry,c.Error,"Chrome was not found in the user agent")}logUnableToIsolateChromeInformationFromUserAgent(){n.sendTraceTag(578834884,d.msoulscat_Wac_Telemetry,c.Error,"Unable to isolate chrome information from the user agent")}logUnableToExtractChromeVersionInformation(){n.sendTraceTag(578834885,d.msoulscat_Wac_Telemetry,c.Error,"Unable to extract chrome version information from the user agent")}logUnableToParseChromeMajorVersionString(){n.sendTraceTag(578834886,d.msoulscat_Wac_Telemetry,c.Error,"Unable to parse the chromium major version number")}logRequestIdleCallbackMissing(){n.sendTraceTag(576582740,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window.requestIdleCallback in the JS environment")}logCallbackBeingInvokedImmediately(){n.sendTraceTag(576582743,d.msoulscat_Wac_Telemetry,c.Error,"Callback is being invoked immediately as there is no platform support for deferring work")}logCancelIdleCallbackMissing(){n.sendTraceTag(576582744,d.msoulscat_Wac_Telemetry,c.Warning,"Unable to find window.cancelIdleCallback in the JS environment")}logUnknownMechanism(){n.sendTraceTag(576582747,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find a way to cancel the idle time job")}logWindowSetTimeOutMissingInJSEnvironment(){n.sendTraceTag(576239755,d.msoulscat_Wac_Telemetry,c.Error,"window.setTimeout is missing in JS environment")}logWindowPerformanceMissingInJSEnvironment(){n.sendTraceTag(576218121,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find window.performance in the JS environment")}logWindowPerformanceNowMissingInJSEnvironment(){n.sendTraceTag(576218122,d.msoulscat_Wac_Telemetry,c.Error,"Unable to find window.performance.now in the JS environment")}logNavigatorMissingInJSEnvironment(){n.sendTraceTag(574657350,d.msoulscat_Wac_Telemetry,c.Error,"Navigator is missing in the JS environment")}logSendBeaconNotSupported(){n.sendTraceTag(573970625,d.msoulscat_Wac_Telemetry,c.Info,"SendBeacon not supported in current environment")}logBeaconURLIsEmpty(){n.sendTraceTag(573919702,d.msoulscat_Wac_Telemetry,c.Error,"We were passed an empty URL for sendBeacon")}logBeaconDataIsEmpty(){n.sendTraceTag(573907718,d.msoulscat_Wac_Telemetry,c.Error,"We were passed an empty data for sendBeacon")}logDocumentMissingInJsEnvironment(){n.sendTraceTag(573572181,d.msoulscat_Wac_Telemetry,c.Error,"Document is not present in JS Environment")}logDocumentVisibilityStateMissingInJsEnvironment(){n.sendTraceTag(573572182,d.msoulscat_Wac_Telemetry,c.Error,"Document VisibilityState is not present in JS Environment")}logDocumentAddEventListenerMissingInJsEnvironment(){n.sendTraceTag(573572183,d.msoulscat_Wac_Telemetry,c.Error,"Document AddEventListener is not present in JS Environment")}logWindowAddEventListenerNotFound(){n.sendTraceTag(538710337,d.msoulscat_Wac_Telemetry,c.Error,"Window AddEventListener is not present in JS Environment")}logPerformanceEventCountsNotSupported(){n.sendTraceTag(537522270,d.msoulscat_Wac_Telemetry,c.Warning,"Performance.EventCounts is not present in JS Environment")}logRemoveQueryParamsNotCalled(){n.sendTraceTag(527439250,d.msoulscat_Wac_Telemetry,c.Error,"Remove query params was not called before retrieve")}logWindowPerformanceEventCountsMissingInJSEnvironment(){n.sendTraceTag(525099864,d.msoulscat_Wac_Telemetry,c.Info,"window.performance.eventcounts was not present in the JS environment")}}class I{removeQueryParams(e){this.wasRemoveQueryParamsCalled=!0,this.queryParamsRemovedURL=e.split("?")[0]}retrieveQueryParamsRemovedURL(){return this.wasRemoveQueryParamsCalled?(this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL):(this.logger.logRemoveQueryParamsNotCalled(),"")}constructor(e){this.logger=e,this.wasRemoveQueryParamsCalled=!1,this.queryParamsRemovedURL=""}}class v{getURLQueryParamsRemover(){return new I(new S)}}class k{open(e,r,s){this.xmlHTTPRequest.open(e,r,s)}send(e){this.xmlHTTPRequest.send(e)}constructor(){this.xmlHTTPRequest=new XMLHttpRequest}}class b{generateXMLHTTPRequestWrapper(){return new k}}const O="InvalidUnderlyingMechanism",W="requestIdleCallback",N="hidden";class M{isBrowserChromiumBased(e){return function(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckChromiumBrowser",(s=>{if(s.addProperty("UserAgent",e),0===e.localeCompare(""))return r.logEmptyUserAgentString(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const t=e.match(/(Chrome\/|CriOS\/)/g);return null!=e.match(/(CriOS\/)/g)&&r.logChromiumOnIOS(),null===t?(r.logBrowserUserAgentNotChromiumBased(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):P.generateOperationResult({didOperationSucceed:!0,result:!0})}),s).getResult()}(e,this.logger)}parseChromeMajorVersionNumber(e){return function(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:-1});return f.startNew("ParseChromiumMajorVersionNumber",(s=>{s.addProperty("UserAgent",e);const t=e.match(/((Chrome\/|CriOS\/)(\d|\.)+)/g);if(null==t)return r.logChromeNotPresentInUserAgent(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const o=t[0].split("/");if(o.length<2)return r.logUnableToIsolateChromeInformationFromUserAgent(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const i=o[1].split(".");if(i.length<4)return r.logUnableToExtractChromeVersionInformation(),P.generateOperationResult({didOperationSucceed:!1,result:-1});const a=i[0],n=parseInt(a,10);return isNaN(n)?(r.logUnableToParseChromeMajorVersionString(),P.generateOperationResult({didOperationSucceed:!1,result:-1})):(s.addProperty("MajorVersionNumber",n),P.generateOperationResult({didOperationSucceed:!0,result:n}))}),s).getResult()}(e,this.logger)}constructor(e){this.logger=e}}class R{static getBrowserUtils(){const e=new S;return new M(e)}}class y{scheduleJobForIdleTime(e){!function(e,r,s,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:{id:-1,underlyingMechanism:O}});f.startNew("RequestIdleCallbackShim",(()=>{if(r.hasProperty(W)){const r=window.requestIdleCallback(e,undefined);return P.generateOperationResult({didOperationSucceed:!0,result:{id:r,underlyingMechanism:W}})}s.logRequestIdleCallbackMissing();Date.now();return s.logCallbackBeingInvokedImmediately(),e(),P.generateOperationResult({didOperationSucceed:!0,result:{id:-1,underlyingMechanism:O}})}),o).getResult()}((()=>{e()}),this.windowPropertyChecker,this.logger)}constructor(e,r){this.windowPropertyChecker=e,this.logger=r}}class x{static getIdleTimeJobScheduler(){const e=new S,r=new C(e);return new y(r,e)}}class F{setTimerJob(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SetTimerJob",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):null==window.setTimeout?(this.logger.logWindowSetTimeOutMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(window.setTimeout(e,r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s)}constructor(e){this.logger=e}}class w{static getTimerJobScheduler(){const e=new S;return new F(e)}}class E{isDocumentVisibleNow(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckDocumentVisibility",(()=>{if(!this.isDocumentPresentInJsEnvironment())return this.logger.logDocumentMissingInJsEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});if(!this.isDocumentVisibilityStatePresentInJsEnvironment())return this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});const e=document.visibilityState!==N;return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}wasDocumentHiddenDuringTimeRange(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("WasDocumentHiddenDuringTimeRange",(()=>{if(this.isDocumentHidden)return P.generateOperationResult({didOperationSucceed:!0,result:!0});if(void 0===this.lastUnHiddenDate)return P.generateOperationResult({didOperationSucceed:!0,result:!1});const r=Date.now()-this.lastUnHiddenDate<e;return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r).getResult()}isDocumentPresentInJsEnvironment(){return null!=document}isDocumentVisibilityStatePresentInJsEnvironment(){return"visibilityState"in document}isDocumentAddEventListenerPresentInJsEnvironment(){return"addEventListener"in document}updateIsHidden(){this.isDocumentHidden=document.visibilityState===N,this.isDocumentHidden||(this.lastUnHiddenDate=Date.now())}constructor(e){this.logger=e,this.onVisibilityChange=()=>{this.updateIsHidden()},this.isDocumentPresentInJsEnvironment()||this.logger.logDocumentMissingInJsEnvironment(),this.isDocumentVisibilityStatePresentInJsEnvironment()||this.logger.logDocumentVisibilityStateMissingInJsEnvironment(),this.isDocumentAddEventListenerPresentInJsEnvironment()||this.logger.logDocumentAddEventListenerMissingInJsEnvironment(),this.lastUnHiddenDate=void 0,this.isDocumentHidden=!1,this.updateIsHidden(),document.addEventListener("visibilitychange",this.onVisibilityChange)}}class _{static getDocumentVisibilityChecker(){const e=new S;return new E(e)}}var U;!function(e){e.SendBeacon="sendBeacon"}(U||(U={}));class L{sendBeacon(e){return function(e,r,s,t,o,i){const a=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("SendBeaconCall",(a=>{if(0===o.length)return t.logBeaconURLIsEmpty(),P.generateOperationResult({didOperationSucceed:!1,result:!1});if(0===i.length)return t.logBeaconDataIsEmpty(),P.generateOperationResult({didOperationSucceed:!1,result:!1});if(!e.hasProperty(U.SendBeacon)){t.logSendBeaconNotSupported();const e="POST",r=s.generateXMLHTTPRequestWrapper();return r.open(e,o,!0),r.send(i),a.addProperty("POSTRequestSent",!0),P.generateOperationResult({didOperationSucceed:!0,result:!0})}const n=r.sendBeacon(o,i);return a.addProperty("BeaconRequestSuccessfullyQueued",n),P.generateOperationResult({didOperationSucceed:!0,result:n})}),a).getResult()}(this.navigatorPropertyChecker,this.navigatorAPI,this.xmlHTTPRequestWrapperFactory,this.logger,e.url,e.data)}constructor(e,r,s,t){this.navigatorPropertyChecker=e,this.navigatorAPI=r,this.xmlHTTPRequestWrapperFactory=s,this.logger=t}}class B{hasProperty(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckNavigatorProperty",(r=>{if(null==navigator)return this.logger.logNavigatorMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!1,result:!1,didOperationFailUnexpectedly:!0});r.addProperty("NavigatorPropertyChecked",e);const s=e in navigator;return r.addProperty("IsPropertyPresentInNavigatorResult",s),P.generateOperationResult({didOperationSucceed:!0,result:s})}),r).getResult()}constructor(e){this.logger=e}}class A{sendBeacon(e,r){return null==navigator?(this.logger.logNavigatorMissingInJSEnvironment(),!1):navigator.sendBeacon(e,r)}constructor(e){this.logger=e}}class J{static getSendBeaconScheduler(){const e=new S,r=new B(e),s=new A(e),t=new b;return new L(r,s,t,e)}}class ${getCurrentTimestamp(){if(null!=window)if(null!=window.performance){if(null!=window.performance.now)return window.performance.now();this.logger.logWindowPerformanceNowMissingInJSEnvironment()}else this.logger.logWindowPerformanceMissingInJSEnvironment();else this.logger.logWindowMissingInJSEnvironment()}constructor(e){this.logger=e}}class D{static getTimestampRetriever(){const e=new S;return new $(e)}}class q{peek(){return this.elements.size>0?this.elements.get(this.dequeueIndex):void 0}queue(e){this.elements.set(this.queueIndex,e),this.queueIndex+=1}dequeue(){0!==this.elements.size&&(this.elements.delete(this.dequeueIndex),this.dequeueIndex+=1)}length(){return this.elements.size}constructor(){this.elements=new Map,this.queueIndex=0,this.dequeueIndex=0}}class z{static createQueue(){return new q}}class V{retrieveUserAgent(){const e=P.generateOperationResult({didOperationSucceed:!1,result:""});return f.startNew("RetrieveUserAgent",(()=>{const e=this.getUserAgentFromNavigatorAPI();return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e).getResult()}getUserAgentFromNavigatorAPI(){return"undefined"==typeof navigator?(this.logger.logNavigatorMissingInJSEnvironment(),""):navigator.userAgent}constructor(e){this.logger=e,this.logger=e}}class G{static getUserAgentRetriever(){return new V(new S)}}class j{peek(){const e=this.count();if(0!==e)return this.elements[e-1]}push(e){this.elements.push(e)}pop(){this.elements.pop()}count(){return this.elements.length}constructor(){this.elements=[]}}class H{static createStack(){return new j}}class Q{static getWindowPropertyChecker(){const e=new S;return new C(e)}}class K{generateGuid(){return""}}class Z{static getGuidGenerator(){return new K}}function X(){const e=new S;if(!window)return void e.logWindowMissingInJSEnvironment();if(!window.performance)return void e.logWindowPerformanceMissingInJSEnvironment();const r=window.performance.eventCounts;if(!r)return void e.logPerformanceEventCountsNotSupported();let s=0;return r.forEach((e=>s+=e)),s}const Y="JSSelfProfilingAPI-Profile",ee="StartManualProfiler",re="StopManualProfiler",se="StartTimedProfiler",te="StopTimedProfiler",oe="StartManualProfilerInternal",ie="StopManualProfilerInternal",ae="StartContinuousProfiler",ne="StopContinuousProfiler",le="TransformProfilerTrace",de="StartFullSessionProfiler",ce="StopFullSessionProfiler",ge="SendCallTrees",ue="SerializeCallTreesArray",me="OnMessageReceivedFromWorker",pe="useWebWorkForProfilerTraceProcessing",he=[Y,le,ge,ue,me,pe,"ProfilerWorkerOnMessage",ie,de,ee,se,ae,ne,ce,re,te,oe];var Te,fe,Pe;!function(e){e[e.Manual=0]="Manual",e[e.Timed=1]="Timed",e[e.Continuous=2]="Continuous",e[e.FullSession=3]="FullSession"}(Te||(Te={})),function(e){e[e.ProfilerStopped=0]="ProfilerStopped",e[e.PreProfilerStart=1]="PreProfilerStart"}(fe||(fe={}));class Ce{getCustomProperties(){return this.customProperties}getResources(){return this.profilerTrace.resources}getFrames(){return this.profilerTrace.frames}getStacks(){return this.profilerTrace.stacks}getSamples(){return this.profilerTrace.samples}getSamplesTrimmed(){return this.getSamples().reduce(((e,r)=>{const s=e.length>0&&void 0!==e[e.length-1].stackId;return(void 0!==r.stackId||s)&&e.push(r),e}),[])}getProfilerTraceStartTimestamp(){return this.profilerTraceStartTimestamp}getProfilerProperties(){return this.profilerProperties}getElapsedProfilingTimeInMs(){return this.elapsedProfilingTime}constructor(e,r,s,t,o){this.customProperties=e,this.profilerTrace=r,this.profilerTraceStartTimestamp=s,this.profilerProperties=t,this.elapsedProfilingTime=o}}!function(e){e.Chrome="chrome"}(Pe||(Pe={}));const Se={samplingIntervalInMs:-1},Ie={name:"InvalidFrameName",resourceId:-1,line:-1,column:-1},ve={name:"EndOfSiblingChainFrame",resourceId:-1,line:-1,column:-1},ke="InvalidResourceName",be=!1,Oe=!1,We=!1,Ne={obfuscatedName:"InvalidObfuscatedName",startTimeInMs:-1,frameOnlyRunTimeInMs:-1,subTreeRunTimeInMs:-1,totalExecutionTimeInMs:-1,hasChildrenNodes:!1,resourceInfo:{resourceName:ke,lineNo:-1,columnNo:-1}},Me=!1,Re=!1,ye=!1,xe=!1,Fe="00000000-0000-0000-0000-000000000000",we=!1,Ee=!0,_e=!1,Ue=!1;function Le(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendProfilerEventToProfilerObservers",(o=>(o.addProperty("ProfilerEventIdToSendToObservers",r.eventId),e.forEach(((e,o)=>{-1!==e.indexOf(r.eventId)&&f.startNew("InvokeOnProfilerEventOnProfilerObserver",(()=>(o.onProfilerEvent(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,s)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),t,s)}class Be{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="callTreeCustomFilterer"}}class Ae{constructor(e,r){this.subscriber=e,this.subscriptionList=r,this.subscriberString="customPropertiesRetriever"}}class Je{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ee,(()=>{const e=this.startProfilerImplementation();return P.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}startProfilerImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew(oe,(r=>void 0!==this.profiler?(this.logger.logProfilerAlreadyStarted(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):this.preProfilerStartChecker.shouldProfilingStart()?null==this.profilerInitOptions.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotFixed(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):(r.addProperty("SamplingInterval",this.profilerInitOptions.samplingIntervalInMs),r.addProperty("MaxBufferSize",this.profilerInitOptions.maximumNumberOfSamplesToTake),Le(this.profilerObserversToProfilerEventIds,{eventId:fe.PreProfilerStart,eventData:void 0},this.logger),this.profiler=this.jsSelfProfilingAPI.createProfiler({sampleInterval:this.profilerInitOptions.samplingIntervalInMs,maxBufferSize:this.profilerInitOptions.maximumNumberOfSamplesToTake}),null==this.profiler?(this.logger.logBailingOutOnNullProfiler(),P.generateOperationResult({didOperationSucceed:!1,result:!1})):(this.preProfilerStartChecker.getShouldProcessProfileCapturedWhileUserIsIdle()||(this.documentEventsCountBeforeProfiling=X()),this.profilerStartTimestamp=this.timestampRetriever.getCurrentTimestamp(),null!=e&&e(!0),P.generateOperationResult({didOperationSucceed:!0,result:!0}))):(this.logger.logPreProfilerStartCheckFailed(),this.didPreProfilerStartChecksFail=!0,e&&e(!1),P.generateOperationResult({didOperationSucceed:!0,result:!0}))),r,this.logger).getResult()}stop(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(re,(()=>{const e=this.stopProfilerImplementation();return P.generateOperationResult({didOperationSucceed:e,result:void 0})}),e,this.logger)}stopProfilerImplementation(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew(ie,(r=>{if(null==this.profiler){const e=!!this.didPreProfilerStartChecksFail;return this.didPreProfilerStartChecksFail=!1,this.logger.logProfilerInstanceIsUndefined(),P.generateOperationResult({didOperationSucceed:e,result:!1})}return this.profiler.stop().then((s=>{this.profilerStopTimestamp=this.timestampRetriever.getCurrentTimestamp(),this.profilerTrace=s;const t=this.customPropertiesExtractor.extractCustomProperties(this.customPropertiesRetriever);let o=-1;void 0!==this.profilerStartTimestamp&&void 0!==this.profilerStopTimestamp&&(o=this.profilerStopTimestamp-this.profilerStartTimestamp),r.addProperty("ElapsedProfilingTime",o);const i={profilerTrace:new Ce(t,this.profilerTrace,void 0!==this.profilerStartTimestamp?this.profilerStartTimestamp:-1,this.profilerInitOptions,o),callTreeCustomPropertiesRetrievers:this.callTreeCustomPropertiesRetrievers,documentEventsCountBeforeProfiling:this.documentEventsCountBeforeProfiling,callTreeCustomFilterers:this.callTreeCustomFilterers};this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0;const a={eventId:fe.ProfilerStopped,eventData:i};Le(this.profilerObserversToProfilerEventIds,a,this.logger),this.profiler=void 0,this.documentEventsCountBeforeProfiling=void 0,null!=e&&e()}),(e=>{this.logger.logProfilerStopPromiseRejected(e),this.profiler=void 0,this.profilerTrace=void 0})),P.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}subscribeProfilerObserver(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SubscribeProfilerObserver",(s=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForSubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventIds(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(s.addProperty("ProfilerEventIds",Array.from(r)),this.profilerObserversToProfilerEventIds.has(e)){const s=this.profilerObserversToProfilerEventIds.get(e);null==s?this.logger.logUnexpectedUndefinedProfilerEventIds():(r.forEach((e=>{s.push(e)})),this.profilerObserversToProfilerEventIds.set(e,Array.from(new Set(s))))}else this.profilerObserversToProfilerEventIds.set(e,Array.from(r));return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),s,this.logger)}unsubscribeProfilerObserver(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("UnsubscribeProfilerObserver",(s=>{if(null==e)return this.logger.logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(null==r)return this.logger.logNullOrUndefinedProfilerEventToUnsubscribe(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(s.addProperty("ProfilerEventToUnsubscribe",r),!this.profilerObserversToProfilerEventIds.has(e))return this.logger.logProfilerObserverWasNeverSubscribed(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=this.profilerObserversToProfilerEventIds.get(e);return null==t?(this.logger.logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):-1===t.indexOf(r)?(this.logger.logProfilerObserverNeverSubscribedForProfilerEventId(r),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(this.profilerObserversToProfilerEventIds.set(e,t.filter((e=>e!==r))),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),s,this.logger)}subscribeCallTreeCustomPropertiesRetriever(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SubscibeCallTreeCustomPropertiesRetriever",(()=>this.subscribeToProfiler(new Ae(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}unsubscribeCallTreeCustomPropertiesRetriever(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("UnsubscribeCallTreeCustomPropertiesRetriever",(()=>this.unsubscribeFromProfiler(new Ae(e,this.callTreeCustomPropertiesRetrievers))),r,this.logger)}subscribeCallTreeCustomFilterer(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("subscribeCallTreeCustomFilterer",(()=>this.subscribeToProfiler(new Be(e,this.callTreeCustomFilterers))),r,this.logger)}unsubscribeCallTreeCustomFilterer(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("unsubscribeCallTreeCustomFilterer",(()=>this.unsubscribeFromProfiler(new Be(e,this.callTreeCustomFilterers))),r,this.logger)}processProfiles(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProcessProfiles",(()=>P.generateOperationResult({didOperationSucceed:!0,result:void 0})),e,this.logger)}subscribeToProfiler(e){return null==e.subscriber?(this.logger.logNullOrUndefinedItemToSubscribe(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.push(e.subscriber),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}unsubscribeFromProfiler(e){if(null==e.subscriber)return this.logger.logNullOrUndefinedItemForUnsubscribe(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const r=e.subscriptionList.indexOf(e.subscriber);return-1===r?(this.logger.logItemWasNeverSubscribed(e.subscriberString),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(e.subscriptionList.splice(r,1),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}constructor(e,r,s,t,o,i,a){this.preProfilerStartChecker=e,this.jsSelfProfilingAPI=r,this.profilerInitOptions=s,this.customPropertiesRetriever=t,this.timestampRetriever=o,this.customPropertiesExtractor=i,this.logger=a,this.profiler=void 0,this.profilerTrace=void 0,this.profilerStartTimestamp=void 0,this.profilerStopTimestamp=void 0,this.didPreProfilerStartChecksFail=!1,this.profilerObserversToProfilerEventIds=new Map,this.callTreeCustomPropertiesRetrievers=[],this.documentEventsCountBeforeProfiling=void 0,this.callTreeCustomFilterers=[]}}class $e extends Je{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(se,(()=>(super.startProfilerImplementation(this.postProfilerStartCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(te,(()=>(null==e||e||this.logger.logTimedProfilerIsBeingStoppedManually(),super.stopProfilerImplementation(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}constructor(e,r,s,t,o,i,a,n){super(e,r,s,o,i,a,n),this.timerJobScheduler=t,this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),null!=this.profilerInitOptions.profilingIntervalInMs?e&&(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):this.logger.logProfilingIntervalIsUndefined()},this.postTimerStopCallBack=()=>{this.logger.logTimedProfilerStopCallbackInvoked(),this.stop(!0)}}}class De extends $e{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ae,(()=>(super.start(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}stop(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ne,(()=>(super.stopProfilerImplementation(this.postProfilerStopCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger)}constructor(){super(...arguments),this.postProfilerStartCallback=e=>{this.logger.logPostTimedStartProfilerStartCallbackInvoked(),this.profilerInitOptions.profilingIntervalInMs?e?(this.timerJobScheduler.setTimerJob(this.postTimerStopCallBack,this.profilerInitOptions.profilingIntervalInMs),this.logger.logTimerJobToStopProfilerSet()):(this.logger.logPostProfilerStopCallbackInvoked(),this.postProfilerStopCallback()):this.logger.logProfilingIntervalIsUndefined()},this.postProfilerStopCallback=()=>{null!=this.profilerInitOptions.idleIntervalInMs?this.timerJobScheduler.setTimerJob(this.profilerStopCallback,this.profilerInitOptions.idleIntervalInMs):this.logger.logNullOrUndefinedIdleInterval()},this.profilerStopCallback=()=>{this.start()}}}class qe extends Je{start(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew(de,(()=>(this.startProfilerImplementation(this.postProfilerStartCallback),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),e,this.logger).getResult()}stop(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew(ce,(()=>{let r;return void 0!==e&&e&&(r=this.postProfilerStopCallback),this.stopProfilerImplementation(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}constructor(e,r,s,t,o,i,a,n){super(e,r,s,o,i,a,n),this.timerJobScheduler=t,this.postProfilerStartCallback=e=>{this.timerJobScheduler.setTimerJob((()=>{e?this.stop(!0):this.start()}),e?1e4:0)},this.postProfilerStopCallback=()=>{this.start()}}}class ze{createProfiler(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:null});return f.startNew(Y,(()=>{const r=new Profiler(e);return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class Ve{shouldProfilingStart(){return!!this.isDocumentVisibleNow()||this.shouldProfilerStartInAHiddenDocument}getShouldProcessProfileCapturedWhileUserIsIdle(){return this.shouldProcessProfileCapturedWhileUserIsIdle}isDocumentVisibleNow(){return this.documentVisibilityChecker.isDocumentVisibleNow()}constructor(e,r,s){this.documentVisibilityChecker=e,this.shouldProfilerStartInAHiddenDocument=r,this.shouldProcessProfileCapturedWhileUserIsIdle=s}}class Ge{extractCustomProperties(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:{}});return f.startNew("ExtractCustomProperties",(()=>{const r={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const s=e.getCustomProperties(void 0);null!=s?s.forEach(((e,s)=>{null==s?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():r[s]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}extractCustomPropertiesV2(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:{}});return f.startNew("ExtractCustomPropertiesV2",(()=>{const s={};if(null!=e&&"getCustomProperties"in e&&"function"==typeof e.getCustomProperties){const t=e.getCustomProperties(r);null!=t?t.forEach(((e,r)=>{null==r?this.logger.logCustomPropertyKeyIsNull():null==e?this.logger.logCustomPropertyValueIsNull():s[r]=e})):this.logger.logNullOrUndefinedCustomProperties()}else this.logger.logNullOrUndefinedCustomPropertiesRetriever();return P.generateOperationResult({didOperationSucceed:!0,result:s})}),s,this.logger).getResult()}constructor(e){this.logger=e}}class je{static buildProfiler(e,r,t,o,i,a){const n=P.generateOperationResult({didOperationSucceed:!1,result:new s(a)});return f.startNew("BuildProfilerInstance",(n=>{n.addProperty("ProfilerName",function(e,r){let s="";switch(e){case Te.Manual:s="ManualProfiler";break;case Te.Timed:s="TimedProfiler";break;case Te.Continuous:s="ContinuousProfiler";break;case Te.FullSession:s="FullSessionProfiler";break;default:r.logMissingProfilerNameForProfilerType(e),s="MissingProfilerName"}return s}(e,a)),n.addProperty("ProfilerInitOptions",{samplingIntervalInMs:r.samplingIntervalInMs,maximumNumberOfSamplesToTake:r.maximumNumberOfSamplesToTake,profilingIntervalInMs:r.profilingIntervalInMs,idleIntervalInMs:r.idleIntervalInMs});const l=_.getDocumentVisibilityChecker(),d=new Ve(l,null==i.shouldProfilingStartInAHiddenDocument?be:i.shouldProfilingStartInAHiddenDocument,null==i.shouldProcessProfileCapturedWhileUserIsIdle?Ee:i.shouldProcessProfileCapturedWhileUserIsIdle),c=new ze(a),g=w.getTimerJobScheduler(),u=D.getTimestampRetriever(),m=new Ge(a);let p,h=!1,T=!1,f=!1;const C=new Set;switch(C.add(fe.ProfilerStopped),e){case Te.Manual:{const e=new Je(d,c,r,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;case Te.Timed:{const e=new $e(d,c,r,g,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;case Te.Continuous:{const e=new De(d,c,r,g,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;case Te.FullSession:{const e=new qe(d,c,r,g,t,u,m,a);e.subscribeProfilerObserver(o,C),f=!0,p=e,h=!0}break;default:a.logMissingProfilerImplementation(e),p=new s(a),h=!1,T=!0}void 0===p&&a.logNoProfilerInstanceBuilt(),void 0===p||f||a.logCreateProfilerDidNotSubscribeProfilerObserver();const S=void 0===p?new s(a):p;return P.generateOperationResult({didOperationSucceed:h,result:S,didOperationFailUnexpectedly:T})}),n,a).getResult()}}class He{createProfiler(e,r,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});return f.startNew("CreateProfiler",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const o=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);o.fixProfilerInitOptions(r);const i=o.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const a=je.buildProfiler(e,i,t,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,P.generateOperationResult({didOperationSucceed:!0,result:a})}),o,this.logger).getResult()}createProfilerV2(e,r,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});return f.startNew("CreateProfilerV2",(()=>{if(!this.validator.areValidationsSuccessful())return this.logger.logFailingValidationsInProfilerFactory(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(!this.optionsValidatorFactory.retrieveValidator(e).isValid(r))return this.logger.logProfilerInitOptionsValidationFailed(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const o=this.profilerInitOptionsFixerFactory.getFixerForProfilerType(e);o.fixProfilerInitOptions(r);const i=o.retrieveFixedProfilerInitOptions();if(null==i)return this.logger.logUnableToFixUpProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});if(this.numberOfProfilersCreated>=100)return this.logger.logMaxNumberOfProfilersAlreadyCreated(),P.generateOperationResult({didOperationSucceed:!1,result:new s(this.logger)});const a=je.buildProfiler(e,i,t,this.profilerObserverFactory.createObserver(),this.packageInitOptions,this.logger);return this.numberOfProfilersCreated=this.numberOfProfilersCreated+1,P.generateOperationResult({didOperationSucceed:!0,result:a})}),o,this.logger).getResult()}constructor(e,r,s,t,o,i){this.validator=e,this.optionsValidatorFactory=r,this.profilerInitOptionsFixerFactory=s,this.profilerObserverFactory=t,this.packageInitOptions=o,this.logger=i,this.numberOfProfilersCreated=0}}class Qe{areValidationsSuccessful(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckProfilerFactoryValidations",(()=>this.isFeatureEnabled()?this.isSupportedEnvironmentForProfiling()?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilingIsNotSupportedEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logProfilingIsNotEnabled(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isFeatureEnabled(){return null==this.featureChecker?(this.logger.logFeatureCheckerIsNullOrUndefined(),!1):"isProfilingEnabled"in this.featureChecker?"function"!=typeof this.featureChecker.isProfilingEnabled?(this.logger.logFeatureCheckerIsProfilingEnabledNotAFunction(),!1):this.featureChecker.isProfilingEnabled():(this.logger.logMissingIsProfilingEnabledOnFeatureChecker(),!1)}isSupportedEnvironmentForProfiling(){return this.supportedEnvironmentChecker.isSupportedEnvironment()}constructor(e,r,s){this.featureChecker=e,this.supportedEnvironmentChecker=r,this.logger=s}}class Ke{isProfilingSupportedInJSEnvironment(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSupportedBrowser",(e=>{const r=this.userAgentRetriever.retrieveUserAgent();e.addProperty("UserAgent",r);const s=this.browserUtils.isBrowserChromiumBased(r);if(e.addProperty("isChromiumBasedBrowser",s),!s)return this.logger.logBrowserUserAgentNotChromiumBased(),P.generateOperationResult({didOperationSucceed:!0,result:!1});const t=this.browserUtils.parseChromeMajorVersionNumber(r);e.addProperty("ChromiumMajorVersionNumber",t);const o=t>=94;return e.addProperty("IsSupportedVersionOfChromiumBrowser",o),o?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logUnsupportedChromiumMajorVersionNumber(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))}),e,this.logger).getResult()}constructor(e,r,s){this.userAgentRetriever=e,this.browserUtils=r,this.logger=s}}class Ze{isSupportedEnvironment(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSupportedEnvironment",(()=>this.isSupportedBrowser()?this.shouldSkipSupportedOSCheck||this.isSupportedOperatingSystem()?this.isJSSelfProfilingAPIAvailable()?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logJSSelfProfilingAPIUnavailable(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedOperatingSystem(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logUnsupportedBrowser(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}isSupportedBrowser(){return this.supportedBrowserChecker.isProfilingSupportedInJSEnvironment()}isSupportedOperatingSystem(){return this.supportedOperatingSystemChecker.isSupportedOperatingSystem()}isJSSelfProfilingAPIAvailable(){return this.jsSelfProfilingAPIAvailabilityChecker.isJSSelfProfilingAPIAvailable()}constructor(e,r,s,t,o){this.supportedBrowserChecker=e,this.supportedOperatingSystemChecker=r,this.jsSelfProfilingAPIAvailabilityChecker=s,this.shouldSkipSupportedOSCheck=t,this.logger=o}}class Xe{isSupportedOperatingSystem(){const e=P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:!1});return f.startNew("SupportedOperatingSystemCheck",(()=>{const e=this.isOperatingSystemWindows();return P.generateOperationResult({didOperationSucceed:!0,result:e})}),e,this.logger).getResult()}isOperatingSystemWindows(){return this.userAgentRetriever.retrieveUserAgent().toLowerCase().includes("win")}constructor(e,r){this.userAgentRetriever=e,this.logger=r}}class Ye{isJSSelfProfilingAPIAvailable(){const e=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckForJSSelfProfilingAPI",(()=>null==window?(this.logger.logWindowMissingInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):"Profiler"in window?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logProfilerNotPresentInJSEnvironment(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),e,this.logger).getResult()}constructor(e){this.logger=e}}class er{isSupportedEnvironment(){return this.logger.logNullSupportedEnvironmentCheckerInvoked(),!1}constructor(e){this.logger=e}}class rr{static build(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:new er(r)});return f.startNew("BuildSupportedEnvironmentChecker",(()=>{const s=G.getUserAgentRetriever(),t=R.getBrowserUtils(),o=new Ke(s,t,r),i=new Xe(s,r),a=new Ye(r);return P.generateOperationResult({didOperationSucceed:!0,result:new Ze(o,i,a,e,r)})}),s,r).getResult()}}class sr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckSamplingInterval",(r=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(r.addProperty("SamplingIntervalToValidate",e.samplingIntervalInMs),e.samplingIntervalInMs<=0?(this.logger.logSamplingIntervalIsLessThanOrEqualToZero(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):this.convertToMicroSeconds(e.samplingIntervalInMs)>2147483647?(this.logger.logSamplingIntervalAboveMaxSamplingInterval(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(e.samplingIntervalInMs<16&&this.logger.logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e.samplingIntervalInMs,16),P.generateOperationResult({didOperationSucceed:!0,result:!0})))),r,this.logger).getResult()}convertToMicroSeconds(e){return 1e3*e}constructor(e){this.logger=e}}class tr extends sr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckMaxBufferSizeIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isMaxBufferSizeValidIfSpecified(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logMaxBufferValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logSamplingIntervalValidationCheckFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isMaxBufferSizeValidIfSpecified(e){return null==e.maximumNumberOfSamplesToTake?(this.logger.logMaxBufferSizeNotSpecified(),!0):!(e.maximumNumberOfSamplesToTake<=0&&(this.logger.logMaxBufferSizeLessThanOrEqualToZero(),1))}}class or extends tr{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckProfilingIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isProfilingIntervalValid(e)?this.isProfilingIntervalGreaterThanSamplingInterval(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):P.generateOperationResult({didOperationSucceed:!0,result:!1}):(this.logger.logProfilingIntervalValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logManualProfilerValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isProfilingIntervalValid(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<=0&&(this.logger.logProfilingIntervalLessThanOrEqualToZero(),1))}isProfilingIntervalGreaterThanSamplingInterval(e){return null==e.profilingIntervalInMs?(this.logger.logProfilingIntervalNullOrUndefined(),!1):!(e.profilingIntervalInMs<e.samplingIntervalInMs&&(this.logger.logProfilingIntervalLessThanSamplingInterval(),1))}}class ir extends or{isValid(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("CheckIdleIntervalIfSpecified",(()=>null==e?(this.logger.logProfilerInitOptionsNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):super.isValid(e)?this.isIdleIntervalInValid(e)?P.generateOperationResult({didOperationSucceed:!0,result:!0}):(this.logger.logIdleIntervalValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1})):(this.logger.logTimedProfilerValidationFailed(),P.generateOperationResult({didOperationSucceed:!0,result:!1}))),r,this.logger).getResult()}isIdleIntervalInValid(e){return null==e.idleIntervalInMs?(this.logger.logIdleIntervalIsNullOrUndefined(),!1):!(e.idleIntervalInMs<=0&&(this.logger.logIdleIntervalIsLessThanOrEqualToZero(),1))}}class ar{isValid(e){return this.logger.logNullJSCPUProfilerInitOptionsValidatorInvoked(),!1}constructor(e){this.logger=e}}class nr{retrieveValidator(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new ar(this.logger)});return f.startNew("RetrieveValidator",(r=>{switch(r.addProperty("ProfilerType",e),e){case Te.Manual:return P.generateOperationResult({didOperationSucceed:!0,result:new tr(this.logger)});case Te.Timed:return P.generateOperationResult({didOperationSucceed:!0,result:new or(this.logger)});case Te.Continuous:return P.generateOperationResult({didOperationSucceed:!0,result:new ir(this.logger)});case Te.FullSession:return P.generateOperationResult({didOperationSucceed:!0,result:new sr(this.logger)});default:return r.addLog("Missing validator implementation for profiler type"),P.generateOperationResult({didOperationSucceed:!1,result:new sr(this.logger),didOperationFailUnexpectedly:!0})}}),r,this.logger).getResult()}constructor(e){this.logger=e}}class lr{fixProfilerInitOptions(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FixMaxBufferSize",(()=>null==e?(this.logger.logNullOrUndefinedProfilerInitOptions(),P.generateOperationResult({didOperationSucceed:!1,result:void 0,didOperationFailUnexpectedly:!0})):(this.fixedProfilerInitOptions=e,null==this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake&&(this.logger.logMaxBufferSizeFixedToDefaultSize(),this.fixedProfilerInitOptions.maximumNumberOfSamplesToTake=2e5),this.didProfilerInitOptionsGetFixed=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger)}retrieveFixedProfilerInitOptions(){return this.didProfilerInitOptionsGetFixed?this.didProfilerInitOptionsGetFixed=!1:this.logger.logMaxBufferSizeWasNotFixedBeforeRetrieval(),this.fixedProfilerInitOptions}constructor(e){this.logger=e,this.didProfilerInitOptionsGetFixed=!1,this.fixedProfilerInitOptions=void 0}}class dr{fixProfilerInitOptions(e){this.logger.logLoopBackFixerFixProfilerInitOptionsInvoked(),null!=e&&(this.profilerInitOptionsToLoopBack=e)}retrieveFixedProfilerInitOptions(){return this.logger.logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(),this.profilerInitOptionsToLoopBack}constructor(e){this.logger=e,this.profilerInitOptionsToLoopBack=void 0}}class cr{getFixerForProfilerType(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new dr(this.logger)});return f.startNew("GetFixerForProfileType",(()=>{this.logger.logFixerForProfilerType(e);let r=new dr(this.logger),s=!1;switch(e){case Te.Manual:case Te.Timed:case Te.Continuous:case Te.FullSession:s=!0,r=new lr(this.logger);break;default:this.logger.logMissingProfilerInitOptionsFixerImplementation()}return P.generateOperationResult({didOperationSucceed:s,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e}}class gr{createProfiler(e,r,t){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new s(this.logger)}createProfilerV2(e,r,t){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new s(this.logger)}constructor(e){this.logger=e}}class ur{filterFrames(){}retrieveFrameFilteredCallTree(){return new pr}}class mr{getNext(){}hasMore(){return!1}}class pr{getReconstructibleTreeIterator(){return new mr}getDepthFirstIterator(){return new mr}getNodesToMergeIterator(){return new mr}getRightMostNodesIterator(){return new mr}getTotalExecutionTimeInMs(){return-1}getCustomProperties(){return{}}getTreeId(){return Fe}getFramesFilterer(e){return new ur}}class hr{transform(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(le,(r=>{this.profilerTrace=e,this.traceToCallTreesConverter.buildCallTrees(this.profilerTrace);const s=this.traceToCallTreesConverter.retrieveBuiltCallTrees();r.addProperty("BuiltCallTreesCount",s.length);const t=s.filter((e=>!(e instanceof pr))).length;r.addProperty("NonEmptyCallTreesCount",t),this.callTreesMerger.mergeCallTrees(s);const o=this.callTreesMerger.retrieveMergedCallTrees();r.addProperty("MergedCallTreesCount",o.length),this.callTreesFilterer.filterCallTrees(o,this.callTreeFilteringThresholdInMs);const i=this.callTreesFilterer.retrieveFilteredCallTrees();return r.addProperty("FilteredCallTreesCount",i.length),this.callTreesToReturn=i,this.callTreesFramesFilterer.filterCallTrees(i,this.frameTotalExecutionTimeFilteringThresholdInMs),r.addProperty("FrameFilteredCallTreesCount",this.callTreesToReturn.length),this.transformCalledBeforeRetrieveCallTrees=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveCallTrees",(()=>this.transformCalledBeforeRetrieveCallTrees?(this.transformCalledBeforeRetrieveCallTrees=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTreesToReturn})):(this.logger.logRetrieveCallTreesCalledBeforeTransform(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,s,t,o,i,a){this.traceToCallTreesConverter=e,this.callTreesMerger=r,this.callTreesFilterer=s,this.callTreeFilteringThresholdInMs=t,this.callTreesFramesFilterer=o,this.frameTotalExecutionTimeFilteringThresholdInMs=i,this.logger=a,this.transformCalledBeforeRetrieveCallTrees=!1,this.profilerTrace=void 0,this.callTreesToReturn=[]}}class Tr{buildCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildCallTrees",(()=>{this.didBuildCallTreesGetCalledBeforeRetrieve=!0,this.stacksBuilder.buildStacks(e);const r=this.stacksBuilder.retrieveStacks(),s=e.getCustomProperties();return this.stacksToCallTreesConverter.convertStacksToCallTrees(s,r),this.callTrees=this.stacksToCallTreesConverter.retrieveConvertedCallTrees(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveBuiltCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveBuiltCallTrees",(()=>this.didBuildCallTreesGetCalledBeforeRetrieve?(this.didBuildCallTreesGetCalledBeforeRetrieve=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logRetrieveBuiltCallTreesBeforeBuildCallTrees(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}constructor(e,r,s){this.stacksBuilder=e,this.stacksToCallTreesConverter=r,this.logger=s,this.didBuildCallTreesGetCalledBeforeRetrieve=!1,this.callTrees=[]}}class fr{peek(){}pop(){}}class Pr{peek(){const e=this.profilerFrames.length;if(0!==e)return this.profilerFrames[e-1]}pop(){this.profilerFrames.pop()}push(e){this.profilerFrames.push(e)}constructor(){this.profilerFrames=[]}}class Cr{addChildNode(e){this.childrenNodes.push(e),e.setParentNode(this)}getFrameOnlyExecutionTimeInMs(){const e=this.getSubTreeExecutionTimeInMs();return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime-e:this.trimTimeStamp(this.totalExecutionTime-e)}getSubTreeExecutionTimeInMs(){let e=0;return this.childrenNodes.forEach((r=>{e+=r.getTotalExecutionTimeInMs()})),e<0&&this.logger.logNegativeSubTreeExecutionTime(),e}getTotalExecutionTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.totalExecutionTime:this.trimTimeStamp(this.totalExecutionTime)}getFrame(){return this.profilerFrame}getChildrenNodes(){return this.childrenNodes}removeChildNode(e){e.setParentNode(void 0),this.childrenNodes=this.childrenNodes.filter((r=>r!==e))}getStartTimeInMs(){return this.shouldRecordExpandedTimeStamps?this.startTime:this.trimTimeStamp(this.startTime)}getLastObservedTimestamp(){return this.shouldRecordExpandedTimeStamps?this.lastObservedTimestamp:this.trimTimeStamp(this.lastObservedTimestamp)}getResourceName(){return this.resourceName}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){e<0&&this.logger.logInvalidNewFrameNodeExecutionTime(),this.totalExecutionTime=e}setLastObservedTimestamp(e){this.lastObservedTimestamp=e}trimTimeStamp(e){return Number.parseFloat(e.toFixed(2))}getCount(){return this.count}getFrameOnlyCount(){if(void 0===this.count)return;const e=this.childrenNodes.reduce(((e,r)=>e+r.getCount()),0);return this.count-e}addCount(e){this.recordFrameCount&&void 0!==e&&(this.count+=e)}constructor(e,r,s,t,o,i,a,n,l){this.profilerFrame=e,this.startTime=r,this.totalExecutionTime=s,this.lastObservedTimestamp=t,this.resourceName=o,this.shouldRecordExpandedTimeStamps=i,this.parentNode=a,this.recordFrameCount=n,this.logger=l,this.childrenNodes=[],r<0&&this.logger.logInvalidFrameNodeStartTime(),s<0&&this.logger.logInvalidFrameNodeExecutionTime(),this.recordFrameCount&&(this.count=1)}}class Sr{peek(){this.logger.logPeekOnNullExecutionStackInvoked()}pop(){this.logger.logPopOnNullExecutionStackInvoked()}constructor(e){this.logger=e}}class Ir{buildStack(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildStack",(r=>{if(this.buildStackCalled=!0,null==e.stackId){this.builtStack=new fr;const e="EmptyStackBuilt";return r.addProperty(e,!0),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}const s=this.profilerTrace.getStacks();if(0===s.length)return this.logger.logEmptyStacks(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t=this.profilerTrace.getFrames();if(0===t.length)return this.logger.logEmptyFrames(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const o=new Pr;let i=e.stackId,a=0,n=!1;const l=[];for(;;){if(a>s.length){this.logger.logForciblyExitingLoopWhileBuildingStack(),n=!0;break}a+=1;const e=s[i],r=t[e.frameId];if(l.unshift(r),null==e.parentId)break;i=e.parentId}const d=e.timestamp,c=d,g=this.profilerTrace.getResources();return l.forEach((e=>{const r=new Cr(e,d,0,c,g[e.resourceId],this.shouldRecordExpandedTimeStamps,void 0,this.shouldRecordFrameCounts,this.logger);o.push(r)})),n?P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:void 0}):(this.builtStack=o,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.logger,!0)}retrieveStack(){const e=P.generateOperationResult({didOperationSucceed:!1,result:new Sr(this.logger)});return f.startNew("RetrieveStack",(()=>this.buildStackCalled?void 0===this.builtStack?(this.logger.logExecutionStackNeverBuilt(),P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:new Sr(this.logger)})):(this.buildStackCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.builtStack})):(this.logger.logRetrieveStackCalledBeforeBuildStack(),P.generateOperationResult({didOperationSucceed:!1,result:new Sr(this.logger)}))),e,this.logger,!0).getResult()}constructor(e,r,s,t){this.profilerTrace=e,this.logger=r,this.shouldRecordExpandedTimeStamps=s,this.shouldRecordFrameCounts=t,this.buildStackCalled=!1,this.builtStack=void 0}}class vr{buildStacks(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("BuildStacks",(()=>{this.buildStacksCalled=!0;const r=e.getSamples();let s=this.sampleSorter.sortSamples(r);const t=e.getProfilerProperties().profilingIntervalInMs;return null==t||this.shouldKeepSamplesOutsideOfProfilingInterval||(this.sampleFilterer.filterSamples(s,t),s=this.sampleFilterer.retrieveFilteredSamples()),this.builtExecutionStacks=this.samplesToStacks(s,e),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveStacks(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveStacks",(()=>this.buildStacksCalled?void 0===this.builtExecutionStacks?P.generateOperationResult({didOperationSucceed:!1,didOperationFailUnexpectedly:!0,result:[]}):(this.buildStacksCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.builtExecutionStacks})):(this.logger.logRetrieveStacksCalledBeforeBuildStacks(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}samplesToStacks(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ConvertSamplesToStacks",(()=>{const s=[],t=new Ir(r,this.logger,this.shouldRecordExpandedTimeStamps,this.shouldRecordFrameCounts);return e.forEach((e=>{t.buildStack(e),s.push(t.retrieveStack())})),P.generateOperationResult({didOperationSucceed:!0,result:s})}),s,this.logger).getResult()}constructor(e,r,s,t,o,i){this.sampleSorter=e,this.sampleFilterer=r,this.shouldKeepSamplesOutsideOfProfilingInterval=s,this.shouldRecordExpandedTimeStamps=t,this.logger=o,this.shouldRecordFrameCounts=i,this.buildStacksCalled=!1,this.builtExecutionStacks=void 0}}class kr{sortSamples(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("SortSamples",(()=>{const r=e.sort(this.sortSampleByTimestamp);return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e,this.sortSampleByTimestamp=(e,r)=>{const s=P.generateOperationResult({didOperationSucceed:!1,result:0});return f.startNew("CustomSampleSort",(()=>e.timestamp>r.timestamp?P.generateOperationResult({didOperationSucceed:!0,result:1}):r.timestamp>e.timestamp?P.generateOperationResult({didOperationSucceed:!0,result:-1}):P.generateOperationResult({didOperationSucceed:!0,result:0})),s,this.logger,!0).getResult()}}}class br{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getFrame(){return Ie}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return ke}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(e){this.logger=e,this.logger.logNullFrameNodeCreated()}}class Or{getNext(){return this.logger.logNullCallTreeIteratorImplGetNextInvoked(),new br(this.logger)}hasMore(){return this.logger.logNullCallTreeIteratorImplHasMoreInvoked(),!1}constructor(e){this.logger=e}}class Wr{filterFrames(){this.logger.logNullCallTreeFramesFiltererFilterFramesInvoked()}retrieveFrameFilteredCallTree(){return this.logger.logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(),new Nr(this.logger)}constructor(e){this.logger=e}}class Nr{getReconstructibleTreeIterator(){return this.logger.logNullCallTreeGetReconstructableTreeIteratorInvoked(),new Or(this.logger)}getDepthFirstIterator(){return this.logger.logNullCallTreeDepthFirstIteratorInvoked(),new Or(this.logger)}getNodesToMergeIterator(){return this.logger.logNullCallTreeLeftMostNodesIteratorInvoked(),new Or(this.logger)}getRightMostNodesIterator(){return this.logger.logNullCallTreeRightMostNodesIteratorInvoked(),new Or(this.logger)}getTotalExecutionTimeInMs(){return this.logger.logNullCallTreeGetTotalExecutionTimeInvoked(),-1}getCustomProperties(){return this.logger.logNullCallTreeGetCustomPropertiesInvoked(),{}}getTreeId(){return Fe}getFramesFilterer(){return this.logger.logNullCallTreeGetFramesFiltererInvoked(),new Wr(this.logger)}constructor(e){this.logger=e}}function Mr(e,r){return e.name===r.name&&e.resourceId===r.resourceId&&e.line===r.line&&e.column===r.column}class Rr{removeChildNode(e){}addChildNode(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return 0}getFrame(){return Ie}getChildrenNodes(){return[]}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getResourceName(){return ke}getParentNode(){return this.parentNode}setParentNode(e){this.parentNode=e}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}constructor(){}}class yr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();for(let e=r.length-1;e>=0;e-=1)Mr(r[e].getFrame(),Ie)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=H.createStack(),e instanceof Rr||this.nodesToIterate.push(e)}}class xr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>1&&this.logger.logExpectedOnlyOneNodePerLevelInCallTree(),this.nodesToIterate.queue(r[0]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e,r){this.logger=r,this.nodesToIterate=z.createQueue(),this.nodesToIterate.queue(e)}}class Fr{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;const r=e.getChildrenNodes();return r.length>0&&this.nodesToIterate.queue(r[r.length-1]),this.nodesToIterate.dequeue(),e}hasMore(){return void 0!==this.nodesToIterate.peek()}constructor(e){this.nodesToIterate=z.createQueue(),this.nodesToIterate.queue(e)}}class wr{filterFrames(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTreeFrames",(()=>{const r=this.callTree.getDepthFirstIterator();let s;for(;r.hasMore();)s=r.getNext(),void 0!==s&&this.filterFrame(s,e);return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger).getResult()}filterFrame(e,r){if(e.getTotalExecutionTimeInMs()<=r){const r=e.getParentNode();if(!r)return void this.logger.logFilterFrameWithNoParent();r.removeChildNode(e)}}constructor(e,r){this.callTree=e,this.logger=r}}class Er{addChildNode(e){}getFrame(){return ve}getChildrenNodes(){return[]}removeChildNode(e){}getResourceName(){return ke}getParentNode(){}setParentNode(e){}setTotalExecutionTime(e){}setLastObservedTimestamp(e){}getFrameOnlyExecutionTimeInMs(){return-1}getSubTreeExecutionTimeInMs(){return-1}getTotalExecutionTimeInMs(){return-1}getStartTimeInMs(){return-1}getLastObservedTimestamp(){return-1}getCount(){return 0}getFrameOnlyCount(){return 0}addCount(e){}}class _r{getNext(){const e=this.nodesToIterate.peek();if(void 0===e)return;this.nodesToIterate.pop();const r=e.getChildrenNodes();r.length>0&&this.nodesToIterate.push(new Er);for(let e=r.length-1;e>=0;e-=1)Mr(r[e].getFrame(),Ie)||this.nodesToIterate.push(r[e]);return e}hasMore(){return 0!==this.nodesToIterate.count()}constructor(e){this.nodesToIterate=H.createStack(),e instanceof Rr||this.nodesToIterate.push(e)}}class Ur{getReconstructibleTreeIterator(){return f.startNew("GetReconstructibleTreeIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new _r(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getDepthFirstIterator(){return f.startNew("GetDepthFirstIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new yr(this.rootNode)})),this.fallbackResult,this.logger).getResult()}getNodesToMergeIterator(){return f.startNew("GetCallTreeLeftMostNodesIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new xr(this.rootNode,this.logger)})),this.fallbackResult,this.logger,!0).getResult()}getRightMostNodesIterator(){return f.startNew("GetCallTreeRightMostNodesIterator",(()=>P.generateOperationResult({didOperationSucceed:!0,result:new Fr(this.rootNode)})),this.fallbackResult,this.logger,!0).getResult()}getTotalExecutionTimeInMs(){return this.rootNode.getTotalExecutionTimeInMs()}getCustomProperties(){return this.customProperties}getTreeId(){return this.callTreeId}getFramesFilterer(){return new wr(this,this.logger)}constructor(e,r,s,t){this.rootNode=e,this.customProperties=r,this.callTreeId=s,this.logger=t,this.fallbackResult=P.generateOperationResult({didOperationSucceed:!1,result:new Or(this.logger)})}}class Lr{convertStackToCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertStackToCallTree",(()=>(this.convertedCallTree=this.buildCallTree(e),this.isConvertCalled=!0,P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.logger,!0)}retrieveCallTree(){const e=P.generateOperationResult({didOperationSucceed:!1,result:new Nr(this.logger)});return f.startNew("RetrieveCallTree",(()=>this.isConvertCalled?(this.isConvertCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.convertedCallTree})):(this.logger.logConvertStackToCallTreeNeverCalled(),P.generateOperationResult({didOperationSucceed:!1,result:new Nr(this.logger)}))),e,this.logger,!0).getResult()}buildCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new Nr(this.logger)});return f.startNew("BuildCallTree",(r=>{const s=[];for(;;){const r=e.peek();if(void 0===r)break;s.unshift(r),e.pop()}if(0===s.length)return r.addLog("No profiler frames were extracted. Returning null call tree"),P.generateOperationResult({didOperationSucceed:!0,result:new pr});let t=0;s.forEach(((e,r)=>{if(t=r+1,t===s.length)return;const o=s[t];e.addChildNode(o)}));const o=s[0],i=Z.getGuidGenerator().generateGuid();return P.generateOperationResult({didOperationSucceed:!0,result:new Ur(o,this.customProperties,i,this.logger)})}),r,this.logger,!0).getResult()}constructor(e,r){this.customProperties=e,this.logger=r,this.isConvertCalled=!1,this.convertedCallTree=new Nr(this.logger)}}class Br{convertStacksToCallTrees(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertStacksToCallTrees",(()=>(this.convertStacksCalled=!0,this.customProperties=e,this.callTrees=this.convertToCallTrees(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger)}retrieveConvertedCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveConvertedCallTrees",(()=>this.convertStacksCalled?(this.convertStacksCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.callTrees})):(this.logger.logConvertStacksToCallTreesNeverCalled(),P.generateOperationResult({didOperationSucceed:!1,result:[]}))),e,this.logger).getResult()}convertToCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ConvertToCallTrees",(()=>{const r=[],s=new Lr(this.customProperties,this.logger);return e.forEach((e=>{s.convertStackToCallTree(e),r.push(s.retrieveCallTree())})),P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger).getResult()}constructor(e){this.logger=e,this.convertStacksCalled=!1,this.callTrees=[],this.customProperties={}}}function Ar(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:{wasMergeSuccessful:!1,mergedCallTree:e}});return f.startNew("MergeTwoTrees",(s=>{const t=e.getRightMostNodesIterator(),o=r.getNodesToMergeIterator();if(!t.hasMore()||!o.hasMore()){const r="CurrentCallTreeIteratorEmptyProperty";s.addProperty(r,!t.hasMore());const i="CallTreeToMergeIteratorEmptyProperty";return s.addProperty(i,!o.hasMore()),P.generateOperationResult({didOperationSucceed:!0,result:{mergedCallTree:e,wasMergeSuccessful:!1}})}let i,a,n,l=0,d=!0;for(;t.hasMore()&&o.hasMore();){if(i=t.getNext(),a=o.getNext(),void 0===i||void 0===a||!Mr(i.getFrame(),a.getFrame())){d=!1;break}{const e=i.getTotalExecutionTimeInMs()+(a.getLastObservedTimestamp()-i.getLastObservedTimestamp());i.setTotalExecutionTime(e),i.setLastObservedTimestamp(a.getLastObservedTimestamp()),i.addCount(a.getCount()),n=i,l+=1}}if(s.addProperty("MergeLength",l),0===l){const r="UnableToMerge";return s.addProperty(r,!0),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!1,mergedCallTree:e}})}if(void 0===i&&void 0===a){const r="FullMerge";return s.addProperty(r,!0),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}if(t.hasMore()&&!o.hasMore()&&void 0!==n){const r="TallerLeftCallTree";return s.addProperty(r,!0),n.addChildNode(new Rr),P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:!0,mergedCallTree:e}})}const c=void 0!==i&&void 0!==a&&!Mr(i.getFrame(),a.getFrame())&&void 0!==n,g=!t.hasMore()&&o.hasMore()&&void 0!==n;if(c||g){if(c){const e="PartialMergeOfHeightBalancedCallTrees";s.addProperty(e,!0)}if(g){const e="TallerRightCallTreeMerge";s.addProperty(e,!0),d&&(a=o.getNext())}void 0!==n&&void 0!==a&&n.addChildNode(a)}return P.generateOperationResult({didOperationSucceed:!0,result:{wasMergeSuccessful:l>0,mergedCallTree:e}})}),t,s,!0).getResult()}class Jr{mergeCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("MergeCallTrees",(()=>{if(e.length<2)return this.mergedCallTrees=e,P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.didMergeCallTreesGetCalled=!0,this.mergedCallTrees=[];let r=0,s=1,t=!1;for(;s<e.length;){const o=e[r];t=Ar(o,e[s],this.logger).wasMergeSuccessful,t||(this.mergedCallTrees.push(o),r=s),s+=1}return t?this.mergedCallTrees.push(e[r]):this.mergedCallTrees.push(e[s-1]),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveMergedCallTrees(){return this.didMergeCallTreesGetCalled?(this.didMergeCallTreesGetCalled=!1,this.mergedCallTrees):[]}constructor(e){this.logger=e,this.mergedCallTrees=[],this.didMergeCallTreesGetCalled=!1}}class $r{filterCallTrees(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTrees",(s=>(this.filterCallTreesCalled=!0,this.filteredCallTreesToReturn=[],s.addProperty("FilteringThresholdInMs",r),s.addProperty("NumberOfCallTreesPresent",e.length),e.forEach((e=>{e.getTotalExecutionTimeInMs()>r&&this.filteredCallTreesToReturn.push(e)})),s.addProperty("NumberOfCallTreesFiltered",this.filteredCallTreesToReturn.length),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger).getResult()}retrieveFilteredCallTrees(){const e=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("RetrieveFilteredCallTrees",(()=>this.filterCallTreesCalled?(this.filterCallTreesCalled=!1,P.generateOperationResult({didOperationSucceed:!0,result:this.filteredCallTreesToReturn})):P.generateOperationResult({didOperationSucceed:!1,result:[]})),e,this.logger).getResult()}constructor(e){this.logger=e,this.filteredCallTreesToReturn=[],this.filterCallTreesCalled=!1}}class Dr{filterSamples(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("FilterSamples",(()=>{if(this.didFilterSamplesGetCalled=!0,this.filteredSamples=[],0===e.length)return this.logger.logEmptySamplesArrayPassedToFilter(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=e[0];for(const t of e){if(t.timestamp-s.timestamp>r)break;this.filteredSamples.push(t)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),s,this.logger)}retrieveFilteredSamples(){return this.didFilterSamplesGetCalled?(this.didFilterSamplesGetCalled=!1,this.filteredSamples):[]}constructor(e){this.logger=e,this.didFilterSamplesGetCalled=!1,this.filteredSamples=[]}}class qr{serializeCallTree(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SeriallizeCallTree",(()=>{this.serializedCallTree={serializedFrames:[],totalExecutionTimeForTreeInMs:0,propertyBag:{}};const r=this.shouldMakeSerializedCallTreesFullyReconstructible?e.getReconstructibleTreeIterator():e.getDepthFirstIterator();let s;for(;r.hasMore();)s=r.getNext(),void 0!==s&&this.serializedCallTree.serializedFrames.push(this.onVisit(s));return this.serializedCallTree.totalExecutionTimeForTreeInMs=e.getTotalExecutionTimeInMs(),this.serializedCallTree.propertyBag=e.getCustomProperties(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}onVisit(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:Ne});return f.startNew("VisitNodeInCallTree",(()=>{const r={obfuscatedName:e.getFrame().name??"",startTimeInMs:e.getStartTimeInMs(),frameOnlyRunTimeInMs:e.getFrameOnlyExecutionTimeInMs(),subTreeRunTimeInMs:e.getSubTreeExecutionTimeInMs(),totalExecutionTimeInMs:e.getTotalExecutionTimeInMs(),hasChildrenNodes:e.getChildrenNodes().length>0,resourceInfo:{resourceName:this.shouldCompressSerializedCallTrees?this.resourceUrlKeyRetriever(e.getResourceName()):e.getResourceName(),lineNo:e.getFrame().line,columnNo:e.getFrame().column},frameOnlyCount:e.getFrameOnlyCount(),totalCount:e.getCount()};return P.generateOperationResult({didOperationSucceed:!0,result:r})}),r,this.logger,!1).getResult()}retrieveSerializedTree(){return this.serializedCallTree}constructor(e,r,s,t){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.resourceUrlKeyRetriever=s,this.logger=t,this.serializedCallTree=void 0}}class zr{serializeCallTrees(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ue,(()=>{const r=new qr(this.shouldMakeSerializedCallTreesFullyReconstructible,this.shouldCompressSerializedCallTrees,this.resourceUrlKeyRetriever.bind(this),this.logger),s=e.map((e=>(r.serializeCallTree(e),r.retrieveSerializedTree())));return this.serializationResult={serializedCallTrees:s,resourceUrlsCompressionDictionary:Array.from(this.resourceUrlsCompressionDictionary,(([e,r])=>({url:e,index:r})))},P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.logger)}retrieveSerializedTrees(){return this.serializationResult}resourceUrlKeyRetriever(e){if(this.resourceUrlsCompressionDictionary.has(e))return this.resourceUrlsCompressionDictionary.get(e);const r=this.resourceUrlKeyIndex.toString();return this.resourceUrlsCompressionDictionary.set(e,r),this.resourceUrlKeyIndex++,r}constructor(e,r,s){this.shouldMakeSerializedCallTreesFullyReconstructible=e,this.shouldCompressSerializedCallTrees=r,this.logger=s,this.resourceUrlKeyIndex=0,this.resourceUrlsCompressionDictionary=new Map,this.serializationResult={serializedCallTrees:[],resourceUrlsCompressionDictionary:[]}}}class Vr{processTrace(e){this.profilerTraceTransformer.transform(e);const r=this.profilerTraceTransformer.retrieveCallTrees();this.serializer.serializeCallTrees(r),this.serializedCallTrees=this.serializer.retrieveSerializedTrees()}retrieveSerializedCallTrees(){return this.serializedCallTrees}constructor(e,r){this.profilerTraceTransformer=e,this.serializer=r,this.serializedCallTrees={resourceUrlsCompressionDictionary:[],serializedCallTrees:[]}}}class Gr{isWebWorkerAPIAvailable(){return!!this.windowPropertyChecker.hasProperty("Worker")}constructor(e){this.windowPropertyChecker=e}}class jr{sendCallTreeToService(e,r,s,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendIndividualCallTree",(o=>{o.addProperty("compressedCallTree",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:t,serializedCallTree:e,propertyBag:s};i=JSON.stringify(o),this.stringCompressor.compress(i,(e=>{const s={compressionFormatVersion:1,compressedData:e};this.sendRequest(r,JSON.stringify(s))}),(t=>{this.logger.logFailedToCompressIndividualCallTreeDeobfuscationRequest();const o={serializedCallTree:e,propertyBag:s};i=JSON.stringify(o),this.sendRequest(r,i)}))}else{const t={serializedCallTree:e,propertyBag:s};i=JSON.stringify(t),this.sendRequest(r,i)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}sendRequest(e,r){if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:e,data:r});else{const s=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();s.open("POST",e,!0),s.send(r)}}constructor(e,r,s,t,o,i){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=s,this.shouldCompressSerializedCallTrees=t,this.stringCompressor=o,this.logger=i}}class Hr{sendCallTrees(e,r,s,t){const o=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("SendMultipleCallTrees",(o=>{o.addProperty("compressedCallTrees",this.shouldCompressSerializedCallTrees);let i="";if(this.shouldCompressSerializedCallTrees){const o={resourceUrlsCompressionDictionary:t,serializedCallTrees:e,propertyBag:s};i=JSON.stringify(o),this.stringCompressor.compress(i,(e=>{const s={compressionFormatVersion:1,compressedData:e};this.sendRequest(r,JSON.stringify(s))}),(t=>{this.logger.logFailedToCompressMultipleCallTreesDeobfuscationRequest();const o={serializedCallTrees:e,propertyBag:s};i=JSON.stringify(o),this.sendRequest(r,i)}))}else{const t={serializedCallTrees:e,propertyBag:s};i=JSON.stringify(t),this.sendRequest(r,i)}return P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),o,this.logger)}sendRequest(e,r){if(this.shouldUseSendBeaconForSendingCallTrees)this.sendBeaconScheduler.sendBeacon({url:e,data:r});else{const s=this.xmlHTTPRequestWrapperFactory.generateXMLHTTPRequestWrapper();s.open("POST",e,!0),s.send(r)}}constructor(e,r,s,t,o,i){this.sendBeaconScheduler=e,this.xmlHTTPRequestWrapperFactory=r,this.shouldUseSendBeaconForSendingCallTrees=s,this.shouldCompressSerializedCallTrees=t,this.stringCompressor=o,this.logger=i}}class Qr{sendCallTreesToService(e,r,s,t,o){const i=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(ge,(i=>{i.addProperty("NumberOfCallTreesToSend",e.length);const a=function(e,r){let s=e;return Object.entries(r).forEach(((e,r)=>{0===r?s.includes("?")?s+="&":s+="?":s+="&";const[t,o]=e;s+=`${t}=${o}`})),s}(r,s);return this.shouldSendAllCallTreesFromProfileInASingleRequest?this.sendAllCallTreesInASingleRequest(e,a,t,o):this.sendCallTreesIndividually(e,a,t,o),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),i,this.logger)}sendCallTreesIndividually(e,r,s,t){const o=new jr(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.stringCompressor,this.logger);e.forEach((e=>{o.sendCallTreeToService(e,r,s,t)}))}sendAllCallTreesInASingleRequest(e,r,s,t){new Hr(this.sendBeaconScheduler,this.xmlHTTPRequestWrapperFactory,this.shouldUseSendBeaconForSendingCallTrees,this.shouldCompressSerializedCallTrees,this.stringCompressor,this.logger).sendCallTrees(e,r,s,t)}constructor(e,r,s,t,o,i,a){this.sendBeaconScheduler=e,this.shouldSendAllCallTreesFromProfileInASingleRequest=r,this.xmlHTTPRequestWrapperFactory=s,this.shouldUseSendBeaconForSendingCallTrees=t,this.shouldCompressSerializedCallTrees=o,this.stringCompressor=i,this.logger=a}}class Kr{filterCallTrees(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:void 0});return f.startNew("FilterCallTreesFrames",(()=>(e.forEach((e=>{e.getFramesFilterer(r).filterFrames(r)})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),s,this.logger).getResult()}constructor(e){this.logger=e}}class Zr{getCustomProperties(){return this.logger.logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(),{}}getResources(){return this.logger.logGetResourcesCalledOnNullJSCPUProfilerTrace(),[]}getFrames(){return this.logger.logGetFramesCalledOnNullJSCPUProfilerTrace(),[]}getStacks(){return this.logger.logGetStacksCalledOnNullJSCPUProfilerTrace(),[]}getSamples(){return this.logger.logGetSamplesCalledOnNullJSCPUProfilerTrace(),[]}getSamplesTrimmed(){return[]}getProfilerTraceStartTimestamp(){return this.logger.logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(),-1}getProfilerProperties(){return this.logger.logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(),Se}getElapsedProfilingTimeInMs(){return this.logger.logElapsedProfilingTimeMissingInTrace(),-1}constructor(e){this.logger=e}}class Xr{removeQueryParamsFromResourceURLs(e){this.wasRemoveQueryParamsFromResourceURLsCalled=!0;const r=e.getResources(),s=[];r.forEach((e=>{this.urlQueryParamsRemover.removeQueryParams(e),s.push(this.urlQueryParamsRemover.retrieveQueryParamsRemovedURL())})),this.outputProfilerTrace=new Ce(e.getCustomProperties(),{samples:e.getSamples(),frames:e.getFrames(),resources:s,stacks:e.getStacks()},e.getProfilerTraceStartTimestamp(),e.getProfilerProperties(),e.getElapsedProfilingTimeInMs())}retrieveQueryParamsRemovedProfile(){return this.wasRemoveQueryParamsFromResourceURLsCalled?(this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace):(this.logger.logRemoveQueryParamsFromResourceURLsNeverCalled(),new Zr(this.logger))}constructor(e,r){this.urlQueryParamsRemover=e,this.logger=r,this.wasRemoveQueryParamsFromResourceURLsCalled=!1,this.outputProfilerTrace=new Zr(r)}}class Yr{mergeCustomProperties(e){const r={};return e.forEach((e=>{for(const[s,t]of Object.entries(e))r[s]=t})),r}}var es,rs,ss,ts,os;!function(e){e[e.ProcessTrace=0]="ProcessTrace"}(es||(es={}));class is{onProfilerEvent(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("OnProfilerEvent",(r=>null==e?(this.params.logger.logNullOrUndefinedProfilerEvent(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(r.addProperty("ProfilerEventId",e.eventId),e.eventId===fe.ProfilerStopped?null==e.eventData?this.params.logger.logNullOrUndefinedProfilerTrace():this.onProfilerStopped(e.eventData):this.params.logger.logUnknownProfilerEventId(e.eventId),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r,this.params.logger)}onProfilerStopped(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("OnProfilerStopped",(()=>{const r=e.profilerTrace.getProfilerProperties().profilingIntervalInMs;if(null!=r&&this.params.documentVisibilityChecker.wasDocumentHiddenDuringTimeRange(r)&&!this.params.shouldProcessProfileCapturedInAHiddenDocument)return this.params.logger.logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});if(!this.params.shouldProcessProfileCapturedWhileUserIsIdle&&e.documentEventsCountBeforeProfiling&&X()===e.documentEventsCountBeforeProfiling)return this.params.logger.logNotProcessingCapturedTraceDueToUserBeingIdle(),P.generateOperationResult({didOperationSucceed:!0,result:void 0});this.params.shouldKeepQueryParamsInResourceURLs||(this.params.profileResourceURLsQueryParamsRemover.removeQueryParamsFromResourceURLs(e.profilerTrace),e.profilerTrace=this.params.profileResourceURLsQueryParamsRemover.retrieveQueryParamsRemovedProfile()),this.params.shouldLogRawProfilerTrace&&this.params.logger.logProfilerTrace(e.profilerTrace,this.params.profilerTraceLoggingChunkSize);const s=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestBodyPropertiesRetriever),t=this.params.customPropertiesExtractor.extractCustomProperties(this.params.deObfuscationRequestQueryParamsRetriever);return this.params.shouldAllowForConditionalProfileProcessingAndSending?(this.storedProfiles.queue({onProfilerStoppedEventData:e,deObfuscationRequestBodyProperties:s,deObfuscationRequestQueryParams:t}),P.generateOperationResult({didOperationSucceed:!0,result:void 0})):(this.params.shouldProcessProfileInMainEventLoop?this.useMainEventLoopForProfilerTraceProcessing(e,s,t):this.useWebWorkForProfilerTraceProcessing(e,s,t),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))}),r,this.params.logger)}useMainEventLoopForProfilerTraceProcessing(e,r,s){this.params.shouldSendProfilesForDeobfuscationImmediately?this.processAndSendTrace(e,r,s):this.params.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{this.processAndSendTrace(e,r,s)}))}extractAndMergeCallTreeCustomProperties(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ExtractAndMergeCallTreeCustomProperties",(()=>{const s=new Ge(this.params.logger),t=new Yr;return e.forEach((e=>{const o=[];r.forEach((r=>{o.push(s.extractCustomPropertiesV2(r,e.serializedFrames[0]))})),o.push(e.propertyBag);const i=t.mergeCustomProperties(o);e.propertyBag=i})),P.generateOperationResult({didOperationSucceed:!0,result:e})}),s,this.params.logger).getResult()}applyCallTreeCustomFiltering(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:[]});return f.startNew("ApplyCallTreeCustomFilterers",(()=>{let s=e;r.forEach((e=>{s=s.filter((r=>e.filter(r)))}));const t=e.length-s.length;return this.params.logger.logNumberOfCallTreesFiltererByCustomFilterers(t,e.length),P.generateOperationResult({didOperationSucceed:!0,result:s})}),s,this.params.logger).getResult()}useWebWorkForProfilerTraceProcessing(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(pe,(()=>{if(!this.params.webWorkerAPIAvailabilityChecker.isWebWorkerAPIAvailable())return this.params.logger.logWebWorkerAPINotAvailable(),this.useMainEventLoopForProfilerTraceProcessing(e,r,s),P.generateOperationResult({didOperationSucceed:!1,result:void 0});if(this.profilerTraceProcessingWorker||(this.profilerTraceProcessingWorker=this.params.profilerTraceProcessingWorkerFactory.getProfilerTraceProcessingWorker()),!this.profilerTraceProcessingWorker.startWorker())return this.useMainEventLoopForProfilerTraceProcessing(e,r,s),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const t={traceProcessingInfo:{trace:e.profilerTrace,shouldKeepSamplesOutsideOfProfilingInterval:this.params.shouldKeepSamplesOutsideOfProfilingInterval,shouldRecordExpandedTimeStamps:this.params.shouldRecordExpandedTimeStamps,callTreeFilteringThresholdInMs:this.params.callTreeFilteringThresholdInMs,frameTotalExecutionTimeFilteringThresholdInMs:this.params.frameTotalExecutionTimeFilteringThresholdInMs,operationLogMessageFilteringCriteria:this.params.operationLogMessageFilteringCriteria,traceId:this.profilerTraceIdNumber,shouldMakeSerializedCallTreesFullyReconstructible:this.params.shouldMakeSerializedCallTreesFullyReconstructible,shouldRecordFrameCounts:this.params.shouldRecordFrameCounts,shouldCompressSerializedCallTrees:this.params.shouldCompressSerializedCallTrees},traceProcessingCompletionCallback:this.webWorkerOnCompleteCallback,traceProcessingErrorCallback:this.webWorkerOnErrorCallback,callTreeCustomPropertiesRetrievers:e.callTreeCustomPropertiesRetrievers,callTreeCustomFilterers:e.callTreeCustomFilterers};this.profilerTraceIdNumber+=1;const o={id:es.ProcessTrace,requestParams:t};return this.profilerTraceProcessingWorker.processRequest(o)||(this.params.logger.logProcessRequestForProcessTraceFailed(),this.useMainEventLoopForProfilerTraceProcessing(e,r,s)),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),t,this.params.logger)}constructor(e){this.params=e,this.processAndSendTrace=(e,r,s)=>{this.params.traceProcessor.processTrace(e.profilerTrace);const t=this.params.traceProcessor.retrieveSerializedCallTrees();let o=t.serializedCallTrees;o=this.extractAndMergeCallTreeCustomProperties(o,e.callTreeCustomPropertiesRetrievers),e.callTreeCustomFilterers.length>0&&(o=this.applyCallTreeCustomFiltering(o,e.callTreeCustomFilterers)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(o);const i=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.logSerializedCallTrees(i),this.sendCallTrees(i,r,s,t.resourceUrlsCompressionDictionary)},this.webWorkerOnCompleteCallback=(e,r,s,t,o,i)=>{let a=this.extractAndMergeCallTreeCustomProperties(e,t);o.length>0&&(a=this.applyCallTreeCustomFiltering(a,o)),this.params.serializedCallTreesToJSONStringsConverter.convertToJSONStrings(a);const n=this.params.serializedCallTreesToJSONStringsConverter.retrieveConvertedJSONStrings();this.logSerializedCallTrees(n),this.sendCallTrees(n,r,s,i)},this.webWorkerOnErrorCallback=(e,r,s,t,o)=>{this.useMainEventLoopForProfilerTraceProcessing({profilerTrace:e.trace,callTreeCustomPropertiesRetrievers:t,callTreeCustomFilterers:o},r,s)},this.logSerializedCallTrees=e=>{this.params.shouldLogSerializedCallTrees&&e.forEach((e=>{this.params.logger.logSerializedCallTrees(e)}))},this.sendCallTrees=(e,r,s,t)=>{this.params.shouldSendSerializedCallTreesToServer&&(0!==e.length?this.params.callTreesSender.sendCallTreesToService(e,this.params.deObfuscationInfo.deObfuscationEndpoint,s,r,t):this.params.logger.logNoCallTreesToSend())},this.profilerTraceIdNumber=1,this.storedProfiles=z.createQueue()}}class as{createObserver(){return new is(this.observerInitParams)}constructor(e){this.observerInitParams=e}}class ns{convertToJSONString(e){this.convertedJSONString=JSON.stringify(this.shouldCompressSerializedCallTrees?this.convertSerializedCallTreeToCompressedCallTree(e):e)}retrieveConvertedJSONString(){if(null==this.convertedJSONString)return this.logger.logConvertToJSONStringWasNeverCalled(),"BadSerializedCallTreeJSONString";const e=this.convertedJSONString;return this.convertedJSONString=void 0,e}convertSerializedCallTreeToCompressedCallTree(e){return{0:e.serializedFrames.map((e=>({0:e.startTimeInMs,1:e.frameOnlyRunTimeInMs,2:e.subTreeRunTimeInMs,3:e.totalExecutionTimeInMs,4:e.obfuscatedName,5:e.hasChildrenNodes,6:{0:e.resourceInfo.resourceName,1:e.resourceInfo.lineNo,2:e.resourceInfo.columnNo},7:e.frameOnlyCount,8:e.totalCount}))),1:e.totalExecutionTimeForTreeInMs,2:e.propertyBag}}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONString=void 0}}class ls{convertToJSONStrings(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ConvertSerializedCallTreesToJSONStrings",(()=>(this.convertedJSONStrings=e.map((e=>{const r=new ns(this.shouldCompressSerializedCallTrees,this.logger);return r.convertToJSONString(e),r.retrieveConvertedJSONString()})),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))),r)}retrieveConvertedJSONStrings(){return null==this.convertedJSONStrings?[]:this.convertedJSONStrings}constructor(e,r){this.shouldCompressSerializedCallTrees=e,this.logger=r,this.convertedJSONStrings=[]}}class ds{isCompressionStreamAPIAvailable(){return null!=typeof CompressionStream}}class cs{compress(e,r,s){const t=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("CompressStringWithGZIPCompressor",(()=>{let t=!0;if(!this.compressionStreamsAPIAvailabilityChecker.isCompressionStreamAPIAvailable())return this.logger.logCompressionStreamAPIIsNotAvailable(),t=!1,s(e),P.generateOperationResult({didOperationSucceed:t,result:void 0});const o=new Blob([e],{type:"application/json"}).stream().pipeThrough(new CompressionStream("gzip"));return new Response(o).blob().then((o=>{o.arrayBuffer().then((e=>{const s=btoa(Array.from(new Uint8Array(e),(e=>String.fromCharCode(e))).join(""));r(s)})).catch((r=>{this.logger.logUnableToRetrieveArrayBufferFromCompressedBlob(r),t=!1,s(e)}))})).catch((r=>{this.logger.logUnableToRetrieveCompressedBlob(r),t=!1,s(e)})),P.generateOperationResult({didOperationSucceed:t,result:void 0})}),t)}constructor(e,r){this.compressionStreamsAPIAvailabilityChecker=e,this.logger=r}}class gs{generateStringCompressor(){const e=new ds;return new cs(e,this.logger)}constructor(e){this.logger=e}}class us{compress(e,r,s){this.logger.logNullStringCompressorInvoked()}constructor(e){this.logger=e}}class ms{start(e){this.logger.logWebWorkerSource(e);const r=new Blob([e],{type:"application/javascript"});return this.worker=new Worker(URL.createObjectURL(r)),null!=this.worker?(this.logger.logWebWorkerCreationSucceeded(),!0):(this.logger.logWebWorkerCreationFailed(),!1)}postMessage(e){null!=this.worker?this.worker.postMessage(e):this.logger.logWorkerNotRunning()}addEventListener(e,r){null!=this.worker?this.worker.addEventListener(e,r):this.logger.logWorkerNotRunning()}onError(e){null!=this.worker?this.worker.onerror=e:this.logger.logWorkerNotRunning()}terminate(){null!=this.worker?this.worker.terminate():this.logger.logWorkerNotRunning()}constructor(e){this.logger=e,this.worker=void 0}}class ps{createWebWorkerWrapper(){return new ms(this.logger)}constructor(e){this.logger=e}}!function(e){e[e.ProcessTrace=0]="ProcessTrace",e[e.TraceProcessingComplete=1]="TraceProcessingComplete",e[e.ErrorEncounteredInWorker=2]="ErrorEncounteredInWorker"}(rs||(rs={})),function(e){e[e.UnableToInitializeProfilerTraceProcessingWorker=0]="UnableToInitializeProfilerTraceProcessingWorker",e[e.ExceptionEncounteredInWorker=1]="ExceptionEncounteredInWorker",e[e.InvalidMessageReceivedByWorker=2]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=3]="InvalidProcessTraceMessageReceivedByWorker",e[e.InvalidTraceReceivedByWorker=4]="InvalidTraceReceivedByWorker",e[e.UnknownMessageIdReceivedByWorker=5]="UnknownMessageIdReceivedByWorker"}(ss||(ss={}));class hs{getWorkerId(){return this.workerLifeCycle?this.workerLifeCycle.workerId:0}startWorker(){if(this.workerStarted)return this.workerInitParams.logger.logWebWorkerAlreadyStarted(),!0;this.worker=this.workerInitParams.webWorkerWrapperFactory.createWebWorkerWrapper();const e=`try{\n      importScripts('${encodeURI(this.workerInitParams.workerSourceURL)}');\n    } catch(exception) {\n     setTimeout(() => {\n      self.postMessage({\n          id: ${rs.ErrorEncounteredInWorker},\n          data: {\n            errorId: ${ss.UnableToInitializeProfilerTraceProcessingWorker},\n            errorLogs: {\n              logs: []\n            },\n            additionalErrorData: JSON.stringify(\n              exception,\n              Object.getOwnPropertyNames(exception)\n            ),\n          }\n        });\n      }, 1000 /* 1 second delay in sending a message because the connection might not have been established */ );\n    }`;return this.worker.start(e)?(this.workerStarted=!0,this.worker.addEventListener("message",this.onMessageReceived.bind(this)),this.worker.onError(this.errorHandler.bind(this)),!0):(this.workerInitParams.logger.logUnableToBootWebWorker(),!1)}processRequest(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:!1});return f.startNew("ProfilerTraceProcessingWorkerProcessRequest",(r=>{if(null==this.worker||!this.workerStarted)return this.logger.logWorkerInstanceNotFound(),P.generateOperationResult({didOperationSucceed:!0,result:!1});if(this.workerCurrentlyProcessingRequest)return this.pendingRequestsToProcess.queue(e),P.generateOperationResult({didOperationSucceed:!0,result:!0});if(this.currentRequestBeingProcessed=e,r.addProperty("WebWorkerRequestID",e.id),e.id!==es.ProcessTrace)return this.logger.logUnknownWebWorkerRequestId(e.id),P.generateOperationResult({didOperationSucceed:!0,result:!1});{const r=e.requestParams;this.processTrace(r)}return P.generateOperationResult({didOperationSucceed:!0,result:!0})}),r,this.logger).getResult()}isValidMessageFromWorker(e){return null==e?(this.logger.logMessageFromWorkerIsNullorUndefined(),!1):"object"!=typeof e?(this.logger.logMessageFromWorkerNotObject(),!1):"id"in e?"data"in e||(this.logger.logDataNotFoundInMessageFromWorker(),!1):(this.logger.logIdNotFoundInMessageFromWorker(),!1)}processTrace(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplProcessTrace",(()=>{if(null==this.worker||!this.workerStarted)return this.workerInitParams.logger.logWorkerInstanceNotFound(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});this.workerCurrentlyProcessingRequest=!0,this.workerLifeCycle?.onWorkerBusy(this.workerLifeCycle.workerId);const r={id:rs.ProcessTrace,data:e.traceProcessingInfo};return this.worker.postMessage(r),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)}traceProcessingSuccessHandler(e){const r=e.data;"serializedCallTrees"in r||this.logger.logSerializedCallTreesMissingInProcessorResult(),"logs"in r||this.logger.logLogsMissingInProcessorResult();const s=r,t=this.currentRequestBeingProcessed?.requestParams;void 0===t.traceProcessingCompletionCallback&&this.logger.logUndefinedWebWorkerCompletionCallback(),s.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}));const[o,i]=this.getDeObfuscationRequestPropertiesAndQueryParams();t.traceProcessingCompletionCallback(s.serializedCallTrees,o,i,t.callTreeCustomPropertiesRetrievers,t.callTreeCustomFilterers,s.resourceUrlsCompressionDictionary)}traceProcessingErrorHandler(){const e=this.currentRequestBeingProcessed?.requestParams;if(void 0===e.traceProcessingErrorCallback)return void this.logger.logUndefinedErrorCallback();if(void 0===e.traceProcessingInfo)return void this.logger.logUndefinedTraceProcessingInfoToReturnBack();const[r,s]=this.getDeObfuscationRequestPropertiesAndQueryParams();e.traceProcessingErrorCallback(e.traceProcessingInfo,r,s,e.callTreeCustomPropertiesRetrievers,e.callTreeCustomFilterers)}handleKnownWebWorkerError(e){if(null==e)return void this.logger.logMessageFromWorkerIsNullorUndefined();const r=e.data;switch(this.logErrorLogsFromWorker(r),r.errorId){case ss.UnableToInitializeProfilerTraceProcessingWorker:this.handleWebWorkerInitializationError(e);break;case ss.ExceptionEncounteredInWorker:this.logger.logExceptionEncounteredInWorker(r.additionalErrorData);break;case ss.InvalidMessageReceivedByWorker:this.logger.logInvalidMessageReceivedByWorker();break;case ss.InvalidProcessTraceMessageReceivedByWorker:this.logger.logInvalidProcessTraceMessageReceivedByWorker();break;case ss.InvalidTraceReceivedByWorker:this.logger.logInvalidTraceReceivedByWorker();break;case ss.UnknownMessageIdReceivedByWorker:this.logger.logUnknownMessageIdReceivedByWorker();break;default:this.logger.logUnknownWebWorkerErrorId(r.errorId)}null!=this.currentRequestBeingProcessed?this.currentRequestBeingProcessed.id===es.ProcessTrace?this.traceProcessingErrorHandler():this.logger.logUnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError(this.currentRequestBeingProcessed.id):this.logger.logCurrentTraceBeingProcessedNullOrUndefined()}logErrorLogsFromWorker(e){const r=e.errorLogs;"logs"in r&&r.logs.forEach((e=>{this.handleLogMessageFromWorker(e)}))}handleWebWorkerInitializationError(e){this.logger.logWebWorkerInitializationError(e.data.additionalErrorData),this.terminateWorker()}terminateWorker(){this.worker?(this.worker.terminate(),this.workerLifeCycle?.onWorkerTerminated(this.workerLifeCycle.workerId),this.worker=void 0,this.workerStarted=!1,this.currentRequestBeingProcessed=void 0,this.workerCurrentlyProcessingRequest=!1,this.logger.logWebWorkerTerminated()):this.logger.logWorkerInstanceNotFound()}handleLogMessageFromWorker(e){this.workerInitParams.logMessageProcessor.processLogMessage(e)}getDeObfuscationRequestPropertiesAndQueryParams(){const e=new Ge(this.workerInitParams.logger);return[e.extractCustomProperties(this.workerInitParams.deObfuscationRequestBodyPropertiesRetriever),e.extractCustomProperties(this.workerInitParams.deObfuscationRequestQueryParamsRetriever)]}processNextStoredWebWorkerRequestIfAny(){if(this.pendingRequestsToProcess.length()>0){const e=this.pendingRequestsToProcess.peek();if(null==e)return;e.id===es.ProcessTrace?this.processTrace(e.requestParams):this.logger.logUnknownStoredWebWorkerRequestId(e.id),this.pendingRequestsToProcess.dequeue()}}constructor(e,r){this.workerInitParams=e,this.workerLifeCycle=r,this.onMessageReceived=e=>{const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew(me,(r=>{const s=e.data;return this.isValidMessageFromWorker(s)?(r.addProperty("MessageReceived",s.id),s.id===rs.ErrorEncounteredInWorker?(this.handleKnownWebWorkerError(s),this.workerLifeCycle?.onWorkerIdle(this.workerLifeCycle.workerId),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.processNextStoredWebWorkerRequestIfAny(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})):null==this.currentRequestBeingProcessed?(this.workerInitParams.logger.logCurrentTraceBeingProcessedNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!1,result:void 0})):(s.id===rs.TraceProcessingComplete?this.traceProcessingSuccessHandler(s):this.workerInitParams.logger.logUnknownMessageFromWorker(s.id),this.workerLifeCycle?.onWorkerIdle(this.workerLifeCycle.workerId),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.processNextStoredWebWorkerRequestIfAny(),P.generateOperationResult({didOperationSucceed:!0,result:void 0}))):P.generateOperationResult({didOperationSucceed:!1,result:void 0})}),r,this.workerInitParams.logger)},this.errorHandler=e=>{const r=P.generateOperationResult({didOperationSucceed:!1,result:void 0});f.startNew("ProfilerTraceProcessingWorkerImplErrorHandler",(r=>{if(this.logger.logWebWorkerError(JSON.stringify(e,Object.getOwnPropertyNames(e))),null==this.currentRequestBeingProcessed)return this.logger.logCurrentTraceBeingProcessedNullOrUndefined(),P.generateOperationResult({didOperationSucceed:!1,result:void 0});const s=this.currentRequestBeingProcessed;return r.addProperty("WebWorkerRequestIDWhichEncounteredUnknownError",s.id),s.id===es.ProcessTrace?this.traceProcessingErrorHandler():this.logger.logUnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError(s.id),this.terminateWorker(),P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),r,this.workerInitParams.logger)},this.worker=void 0,this.workerStarted=!1,this.pendingRequestsToProcess=z.createQueue(),this.workerCurrentlyProcessingRequest=!1,this.currentRequestBeingProcessed=void 0,this.logger=e.logger}}class Ts{getProfilerTraceProcessingWorker(){if(void 0===this.singletonWebWorkerInstance){const e=new hs(this.workerInitParams,{workerId:0,onWorkerTerminated:this.onWorkerTerminated.bind(this),onWorkerIdle:()=>{},onWorkerBusy:()=>{}});return this.singletonWebWorkerInstance=e,e}return this.singletonWebWorkerInstance}onWorkerTerminated(){this.singletonWebWorkerInstance=void 0}constructor(e){this.workerInitParams=e,this.singletonWebWorkerInstance=void 0}}class fs{startWorker(){return!0}processRequest(e){return this.storedRequest=e,!0}getWorkerId(){return 0}getStoredRequest(){return this.storedRequest}constructor(){this.storedRequest=void 0}}class Ps{getProfilerTraceProcessingWorker(){if(this.idleWorkers.size>0)for(const[e,r]of this.idleWorkers)return this.idleWorkers.delete(e),this.busyWorkers.set(e,r),r;if(this.workerId<this.params.maxNumberOfWorkersAllowed){const e=new hs(this.params,{workerId:this.workerId,onWorkerIdle:this.markBusyWorkerAsIdle.bind(this),onWorkerBusy:this.markIdleWorkerAsBusy.bind(this),onWorkerTerminated:this.markWorkerAsTerminated.bind(this)});return this.busyWorkers.set(this.workerId,e),this.workerId++,e}const e=new fs;return this.futureWorkers.queue(e),e}markIdleWorkerAsBusy(e){const r=this.idleWorkers.get(e);r?(this.idleWorkers.delete(e),this.busyWorkers.set(e,r)):this.params.logger.logWorkerIDBeingSetToBusyNotPresentInIdleWorkers(e)}markBusyWorkerAsIdle(e){const r=this.busyWorkers.get(e);if(r)if(this.busyWorkers.delete(e),this.futureWorkers.length()>0){let e=this.futureWorkers.peek();for(;null!=e;){const s=e.getStoredRequest();if(null!=s){r.processRequest(s),this.futureWorkers.dequeue();break}this.futureWorkers.dequeue(),e=this.futureWorkers.peek()}}else this.idleWorkers.set(e,r);else this.params.logger.logWorkerIDBeingSetToIdleNotPresentInBusyWorkers(e)}markWorkerAsTerminated(e){this.idleWorkers.has(e)&&this.busyWorkers.has(e)||this.params.logger.logUnknownWorkerIDBeingTerminated(e),this.idleWorkers.has(e)&&this.idleWorkers.delete(e),this.busyWorkers.has(e)&&this.busyWorkers.delete(e)}constructor(e){this.params=e,this.workerId=0,this.idleWorkers=new Map,this.busyWorkers=new Map,this.futureWorkers=z.createQueue()}}class Cs{retrieveProfilerFactory(){const e=P.generateOperationResult({didOperationSucceed:!0,result:new gr(this.logger)});return f.startNew("RetrieveProfilerFactory",(()=>{const e=this.jsCPUProfilingPackageInitOptions.shouldSkipSupportedOSCheck??!1,r=this.jsCPUProfilingPackageInitOptions.shouldAllowForConditionalProfileProcessingAndSending??!1,s=this.getSupportedEnvironmentChecker(e),t=new Qe(this.featureChecker,s,this.logger),o=new nr(this.logger),i=new cr(this.logger),a={deObfuscationEndpoint:this.jsCPUProfilingPackageInitOptions.deObfuscationEndpoint??""},n=new kr(this.logger),l=new Dr(this.logger),d=this.jsCPUProfilingPackageInitOptions.shouldKeepSamplesOutsideOfProfilingInterval??We,c=this.jsCPUProfilingPackageInitOptions.shouldRecordExpandedTimeStamps??Me,g=this.jsCPUProfilingPackageInitOptions.shouldRecordFrameCounts??!1,u=this.jsCPUProfilingPackageInitOptions.shouldLogRawProfilerTrace??!1,m=this.jsCPUProfilingPackageInitOptions.profilerTraceLoggingChunkSize||30,p=new vr(n,l,d,c,this.logger,g),h=new Br(this.logger),T=new Tr(p,h,this.logger),f=new Jr(this.logger),C=new $r(this.logger),S=this.jsCPUProfilingPackageInitOptions.callTreeFilteringThresholdInMs??50,I=this.jsCPUProfilingPackageInitOptions.frameTotalExecutionTimeFilteringThresholdInMs??0,k=this.jsCPUProfilingPackageInitOptions.shouldMakeSerializedCallTreesFullyReconstructible??Ue,O=new Kr(this.logger),W=new hr(T,f,C,S,O,I,this.logger),N=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees??!1,M=new zr(k,N,this.logger),R=x.getIdleTimeJobScheduler(),y=_.getDocumentVisibilityChecker(),F=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedInAHiddenDocument??Oe,w=this.jsCPUProfilingPackageInitOptions.shouldSendProfilesForDeobfuscationImmediately??we,E=new Vr(W,M),U=this.jsCPUProfilingPackageInitOptions.useMainEventLoopForProfilerTraceProcessing??Re,L=Q.getWindowPropertyChecker(),B=new Gr(L),A=J.getSendBeaconScheduler(),$=this.jsCPUProfilingPackageInitOptions.shouldSendAllCallTreesFromProfileInASingleRequest??ye,D=this.jsCPUProfilingPackageInitOptions.shouldUseSendBeaconForSendingCallTrees??!0,q=new b,z=new gs(this.logger),V=this.jsCPUProfilingPackageInitOptions.shouldCompressSerializedCallTrees?z.generateStringCompressor():new us(this.logger),G=new Qr(A,$,q,D,N,V,this.logger),j=this.jsCPUProfilingPackageInitOptions.profilerTraceProcessingWebWorkerSourceURL??"",H=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestBodyPropertiesRetriever,K=this.jsCPUProfilingPackageInitOptions.deObfuscationRequestQueryParamsRetriever,Z=new Ge(this.logger),X=new ps(this.logger),Y=this.jsCPUProfilingPackageInitOptions.canUseMultipleWebWorkers??!1,ee={workerSourceURL:j,deObfuscationRequestBodyPropertiesRetriever:H,deObfuscationRequestQueryParamsRetriever:K,logMessageProcessor:this.logMessageProcessor,webWorkerWrapperFactory:X,logger:this.logger},re={...ee,maxNumberOfWorkersAllowed:null!=this.jsCPUProfilingPackageInitOptions.maxNumberOfWebWorkersToUse?this.jsCPUProfilingPackageInitOptions.maxNumberOfWebWorkersToUse:4},se=Y?new Ps(re):new Ts(ee),te={shouldAlwaysLogOperationsData:this.jsCPUProfilingPackageInitOptions.shouldAlwaysLogOperationsData??xe,durationThresholdInMsToLogOperationData:this.jsCPUProfilingPackageInitOptions.durationThresholdInMsToLogOperationData??50,listOfOperationNamesToAlwaysLog:he},oe=this.jsCPUProfilingPackageInitOptions.shouldProcessProfileCapturedWhileUserIsIdle??Ee,ie=this.jsCPUProfilingPackageInitOptions.shouldKeepQueryParamsInResourceURLs??_e,ae=this.jsCPUProfilingPackageInitOptions.shouldLogSerializedCallTrees??!0,ne=this.jsCPUProfilingPackageInitOptions.shouldSendSerializedCallTreesToServer??!0,le=(new v).getURLQueryParamsRemover(),de=new Xr(le,this.logger),ce=new ls(N,this.logger),ge=new as({idleTimeJobScheduler:R,documentVisibilityChecker:y,shouldProcessProfileCapturedInAHiddenDocument:F,traceProcessor:E,shouldProcessProfileInMainEventLoop:U,webWorkerAPIAvailabilityChecker:B,deObfuscationInfo:a,callTreesSender:G,webWorkerSourceURL:j,profilerTraceProcessingWorkerFactory:se,shouldKeepSamplesOutsideOfProfilingInterval:d,shouldRecordExpandedTimeStamps:c,callTreeFilteringThresholdInMs:S,frameTotalExecutionTimeFilteringThresholdInMs:I,deObfuscationRequestBodyPropertiesRetriever:H,deObfuscationRequestQueryParamsRetriever:K,customPropertiesExtractor:Z,operationLogMessageFilteringCriteria:te,shouldSendProfilesForDeobfuscationImmediately:w,shouldProcessProfileCapturedWhileUserIsIdle:oe,shouldKeepQueryParamsInResourceURLs:ie,profileResourceURLsQueryParamsRemover:de,shouldMakeSerializedCallTreesFullyReconstructible:k,shouldRecordFrameCounts:g,shouldLogRawProfilerTrace:u,profilerTraceLoggingChunkSize:m,shouldLogSerializedCallTrees:ae,shouldSendSerializedCallTreesToServer:ne,shouldCompressSerializedCallTrees:N,serializedCallTreesToJSONStringsConverter:ce,shouldAllowForConditionalProfileProcessingAndSending:r,logger:this.logger}),ue=new He(t,o,i,ge,this.jsCPUProfilingPackageInitOptions,this.logger);return P.generateOperationResult({didOperationSucceed:!0,result:ue})}),e,this.logger).getResult()}getSupportedEnvironmentChecker(e){return rr.build(e,this.logger)}constructor(e,r,s,t){this.featureChecker=e,this.jsCPUProfilingPackageInitOptions=r,this.logMessageProcessor=s,this.logger=t}}class Ss{retrieveProfilerFactory(){return this.logger.logNullJSCPUProfilerFactoryInvoked(),new gr(this.logger)}constructor(e){this.logger=e}}!function(e){e[e.IdMissing=0]="IdMissing",e[e.DataMissing=1]="DataMissing",e[e.MissingProfilerImplementation=2]="MissingProfilerImplementation",e[e.FailingValidationsInProfilerFactory=3]="FailingValidationsInProfilerFactory",e[e.WindowMissingInJSEnvironment=4]="WindowMissingInJSEnvironment",e[e.WindowPropertyNameChecked=5]="WindowPropertyNameChecked",e[e.UserAgentToParseChromiumMajorVersionNumber=6]="UserAgentToParseChromiumMajorVersionNumber",e[e.ChromeNotPresentInUserAgent=7]="ChromeNotPresentInUserAgent",e[e.UnableToIsolateChromeInformationFromUserAgent=8]="UnableToIsolateChromeInformationFromUserAgent",e[e.UnableToExtractChromeVersionInformation=9]="UnableToExtractChromeVersionInformation",e[e.UnableToParseChromeMajorVersionString=10]="UnableToParseChromeMajorVersionString",e[e.ParsedChromiumMajorVersionNumber=11]="ParsedChromiumMajorVersionNumber",e[e.UserAgentToCheckForChromiumBrowser=12]="UserAgentToCheckForChromiumBrowser",e[e.EmptyUserAgentString=13]="EmptyUserAgentString",e[e.BrowserUserAgentNotChromiumBased=14]="BrowserUserAgentNotChromiumBased",e[e.UserAgentSpoofedToBeChromium=15]="UserAgentSpoofedToBeChromium",e[e.BrowserNotChromiumBasedBrowser=16]="BrowserNotChromiumBasedBrowser",e[e.UnsupportedChromiumMajorVersionNumber=17]="UnsupportedChromiumMajorVersionNumber",e[e.ProfilerInitOptionsNullOrUndefined=18]="ProfilerInitOptionsNullOrUndefined",e[e.SamplingIntervalIsLessThanOrEqualToZero=19]="SamplingIntervalIsLessThanOrEqualToZero",e[e.SamplingIntervalLessThanMinimumSupportedSamplingInterval=20]="SamplingIntervalLessThanMinimumSupportedSamplingInterval",e[e.UnsupportedBrowser=21]="UnsupportedBrowser",e[e.UnsupportedOperatingSystem=22]="UnsupportedOperatingSystem",e[e.JSSelfProfilingAPIUnavailable=23]="JSSelfProfilingAPIUnavailable",e[e.RetrievedUserAgent=24]="RetrievedUserAgent",e[e.NullJSCPUProfilerStartCalled=25]="NullJSCPUProfilerStartCalled",e[e.NullJSCPUProfilerStopCalled=26]="NullJSCPUProfilerStopCalled",e[e.NullOrUndefinedProfilerInitOptions=27]="NullOrUndefinedProfilerInitOptions",e[e.MaxBufferSizeFixedToDefaultSize=28]="MaxBufferSizeFixedToDefaultSize",e[e.MaxBufferSizeWasNotFixedBeforeRetrieval=29]="MaxBufferSizeWasNotFixedBeforeRetrieval",e[e.ProfilerNotPresentInJSEnvironment=30]="ProfilerNotPresentInJSEnvironment",e[e.SamplingIntervalValidationCheckFailed=31]="SamplingIntervalValidationCheckFailed",e[e.MaxBufferValidationFailed=32]="MaxBufferValidationFailed",e[e.MaxBufferSizeNotSpecified=33]="MaxBufferSizeNotSpecified",e[e.MaxBufferSizeLessThanOrEqualToZero=34]="MaxBufferSizeLessThanOrEqualToZero",e[e.ManualProfilerValidationFailed=35]="ManualProfilerValidationFailed",e[e.ProfilingIntervalValidationFailed=36]="ProfilingIntervalValidationFailed",e[e.ProfilingIntervalNullOrUndefined=37]="ProfilingIntervalNullOrUndefined",e[e.ProfilingIntervalLessThanOrEqualToZero=38]="ProfilingIntervalLessThanOrEqualToZero",e[e.ProfilingIntervalLessThanSamplingInterval=39]="ProfilingIntervalLessThanSamplingInterval",e[e.TimedProfilerValidationFailed=40]="TimedProfilerValidationFailed",e[e.IdleIntervalValidationFailed=41]="IdleIntervalValidationFailed",e[e.IdleIntervalIsNullOrUndefined=42]="IdleIntervalIsNullOrUndefined",e[e.IdleIntervalIsLessThanOrEqualToZero=43]="IdleIntervalIsLessThanOrEqualToZero",e[e.PostProfilerStartCallbackSpecified=44]="PostProfilerStartCallbackSpecified",e[e.PreProfilerStartCheckFailed=45]="PreProfilerStartCheckFailed",e[e.MaxBufferSizeNotFixed=46]="MaxBufferSizeNotFixed",e[e.ProfilerAlreadyStarted=47]="ProfilerAlreadyStarted",e[e.ProfilerStartSucceeded=48]="ProfilerStartSucceeded",e[e.InvokingPostProfilerStartCallback=49]="InvokingPostProfilerStartCallback",e[e.PostProfilerStopCallbackSpecified=50]="PostProfilerStopCallbackSpecified",e[e.ProfilerInstanceIsUndefined=51]="ProfilerInstanceIsUndefined",e[e.ProfilerStopPromiseResolved=52]="ProfilerStopPromiseResolved",e[e.ProfilerStopPromiseRejected=53]="ProfilerStopPromiseRejected",e[e.PostProfilerStopCallbackInvoked=54]="PostProfilerStopCallbackInvoked",e[e.PostTimedStartProfilerStartCallbackInvoked=55]="PostTimedStartProfilerStartCallbackInvoked",e[e.ProfilingIntervalIsUndefined=56]="ProfilingIntervalIsUndefined",e[e.TimerJobToStopProfilerSet=57]="TimerJobToStopProfilerSet",e[e.TimedProfilerStopCallbackInvoked=58]="TimedProfilerStopCallbackInvoked",e[e.TimedProfilerIsBeingStoppedManually=59]="TimedProfilerIsBeingStoppedManually",e[e.ProfilerStartPromiseCreated=60]="ProfilerStartPromiseCreated",e[e.ProfilerStopGoingToBeInvoked=61]="ProfilerStopGoingToBeInvoked",e[e.SamplingIntervalUsedForStartingProfiler=62]="SamplingIntervalUsedForStartingProfiler",e[e.MaxBufferSize=63]="MaxBufferSize",e[e.NoProfilerInstanceBuilt=64]="NoProfilerInstanceBuilt",e[e.ProfilerInitOptionsValidationFailed=65]="ProfilerInitOptionsValidationFailed",e[e.UnableToFixUpProfilerInitOptions=66]="UnableToFixUpProfilerInitOptions",e[e.ProfilingIsNotEnabled=67]="ProfilingIsNotEnabled",e[e.ProfilingIsNotSupportedEnvironment=68]="ProfilingIsNotSupportedEnvironment",e[e.FeatureCheckerIsNullOrUndefined=69]="FeatureCheckerIsNullOrUndefined",e[e.NullSupportedEnvironmentCheckerInvoked=70]="NullSupportedEnvironmentCheckerInvoked",e[e.NullJSCPUProfilerInitOptionsValidatorInvoked=71]="NullJSCPUProfilerInitOptionsValidatorInvoked",e[e.NullJSCPUProfilerFactoryInvoked=72]="NullJSCPUProfilerFactoryInvoked",e[e.NullOrUndefinedIdleInterval=73]="NullOrUndefinedIdleInterval",e[e.CreateProfilerDidNotSubscribeProfilerObserver=74]="CreateProfilerDidNotSubscribeProfilerObserver",e[e.NullOrUndefinedCustomPropertiesRetriever=75]="NullOrUndefinedCustomPropertiesRetriever",e[e.NullOrUndefinedCustomProperties=76]="NullOrUndefinedCustomProperties",e[e.CustomPropertyKeyIsNull=77]="CustomPropertyKeyIsNull",e[e.CustomPropertyValueIsNull=78]="CustomPropertyValueIsNull",e[e.RetrieveCallTreesCalledBeforeTransform=79]="RetrieveCallTreesCalledBeforeTransform",e[e.RetrieveBuiltCallTreesBeforeBuildCallTrees=80]="RetrieveBuiltCallTreesBeforeBuildCallTrees",e[e.RetrieveStacksCalledBeforeBuildStacks=81]="RetrieveStacksCalledBeforeBuildStacks",e[e.ExecutionStacksNeverBuilt=82]="ExecutionStacksNeverBuilt",e[e.PeekOnNullExecutionStackInvoked=83]="PeekOnNullExecutionStackInvoked",e[e.PopOnNullExecutionStackInvoked=84]="PopOnNullExecutionStackInvoked",e[e.EmptyStacks=85]="EmptyStacks",e[e.EmptyFrames=86]="EmptyFrames",e[e.ForciblyExitingLoopWhileBuildingStack=87]="ForciblyExitingLoopWhileBuildingStack",e[e.RetrieveStackCalledBeforeBuildStack=88]="RetrieveStackCalledBeforeBuildStack",e[e.ExecutionStackNeverBuilt=89]="ExecutionStackNeverBuilt",e[e.ConvertStacksToCallTreesNeverCalled=90]="ConvertStacksToCallTreesNeverCalled",e[e.ConvertStackToCallTreeNeverCalled=91]="ConvertStackToCallTreeNeverCalled",e[e.NullFrameNodeCreated=92]="NullFrameNodeCreated",e[e.InvalidSampleIndex=93]="InvalidSampleIndex",e[e.InvalidFrameNodeStartTime=94]="InvalidFrameNodeStartTime",e[e.InvalidFrameNodeExecutionTime=95]="InvalidFrameNodeExecutionTime",e[e.InvalidNewFrameNodeExecutionTime=96]="InvalidNewFrameNodeExecutionTime",e[e.NegativeSubTreeExecutionTime=97]="NegativeSubTreeExecutionTime",e[e.FixerForProfilerType=98]="FixerForProfilerType",e[e.MissingProfilerInitOptionsFixerImplementation=99]="MissingProfilerInitOptionsFixerImplementation",e[e.LoopBackFixerFixProfilerInitOptionsInvoked=100]="LoopBackFixerFixProfilerInitOptionsInvoked",e[e.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked=101]="LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked",e[e.MissingDeObfuscationEndpoint=102]="MissingDeObfuscationEndpoint",e[e.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling=103]="NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling",e[e.NullCallTreeDepthFirstIteratorInvoked=104]="NullCallTreeDepthFirstIteratorInvoked",e[e.EmptySamplesArrayPassedToFilter=105]="EmptySamplesArrayPassedToFilter",e[e.NullCallTreeLeftMostNodesIteratorInvoked=106]="NullCallTreeLeftMostNodesIteratorInvoked",e[e.NullCallTreeRightMostNodesIteratorInvoked=107]="NullCallTreeRightMostNodesIteratorInvoked",e[e.MissingIsProfilingEnabledOnFeatureChecker=108]="MissingIsProfilingEnabledOnFeatureChecker",e[e.FeatureCheckerIsProfilingEnabledNotAFunction=109]="FeatureCheckerIsProfilingEnabledNotAFunction",e[e.NullCallTreeGetTotalExecutionTimeInvoked=110]="NullCallTreeGetTotalExecutionTimeInvoked",e[e.NullCallTreeGetCustomPropertiesInvoked=111]="NullCallTreeGetCustomPropertiesInvoked",e[e.SerializedCallTrees=112]="SerializedCallTrees",e[e.NullCallTreeIteratorImplGetNextInvoked=113]="NullCallTreeIteratorImplGetNextInvoked",e[e.NullCallTreeIteratorImplHasMoreInvoked=114]="NullCallTreeIteratorImplHasMoreInvoked",e[e.MissingProfilerNameForProfilerType=115]="MissingProfilerNameForProfilerType",e[e.ExpectedOnlyOneNodePerLevelInCallTree=116]="ExpectedOnlyOneNodePerLevelInCallTree",e[e.MissingWebWorkerSourceURL=117]="MissingWebWorkerSourceURL",e[e.MaxNumberOfProfilersAlreadyCreated=118]="MaxNumberOfProfilersAlreadyCreated",e[e.WebWorkerAPINotAvailable=119]="WebWorkerAPINotAvailable",e[e.SamplingIntervalAboveMaxSamplingInterval=120]="SamplingIntervalAboveMaxSamplingInterval",e[e.UnableToBootWebWorker=121]="UnableToBootWebWorker",e[e.WorkerInstanceNotFound=122]="WorkerInstanceNotFound",e[e.IdNotFoundInMessageToWorker=123]="IdNotFoundInMessageToWorker",e[e.DataNotFoundInMessageToWorker=124]="DataNotFoundInMessageToWorker",e[e.IdNotFoundInMessageFromWorker=125]="IdNotFoundInMessageFromWorker",e[e.DataNotFoundInMessageFromWorker=126]="DataNotFoundInMessageFromWorker",e[e.IdNotFoundInWorkerLogMessage=127]="IdNotFoundInWorkerLogMessage",e[e.MessageNotFoundInWorkerLogMessage=128]="MessageNotFoundInWorkerLogMessage",e[e.UnknownMessageFromWorker=129]="UnknownMessageFromWorker",e[e.UnknownLogMessageFromWorker=130]="UnknownLogMessageFromWorker",e[e.Operation=131]="Operation",e[e.FallbackResultReturned=132]="FallbackResultReturned",e[e.UnknownMessageToWorker=133]="UnknownMessageToWorker",e[e.ExceptionEncounteredInWorker=134]="ExceptionEncounteredInWorker",e[e.MissingDeObfuscationInfoInTraceProcessingInfo=135]="MissingDeObfuscationInfoInTraceProcessingInfo",e[e.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo=136]="MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo",e[e.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo=137]="MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo",e[e.MissingCallTreeFilteringThresholdInMs=138]="MissingCallTreeFilteringThresholdInMs",e[e.InvalidMessageReceivedByWorker=139]="InvalidMessageReceivedByWorker",e[e.InvalidProcessTraceMessageReceivedByWorker=140]="InvalidProcessTraceMessageReceivedByWorker",e[e.MissingTraceInTraceProcessingInfo=141]="MissingTraceInTraceProcessingInfo",e[e.SerializedCallTreesMissingInProcessorResult=142]="SerializedCallTreesMissingInProcessorResult",e[e.LogsMissingInProcessorResult=143]="LogsMissingInProcessorResult",e[e.UndefinedWebWorkerCompletionCallback=144]="UndefinedWebWorkerCompletionCallback",e[e.LogsMissingInErrorsFromWebWorker=145]="LogsMissingInErrorsFromWebWorker",e[e.UndefinedErrorCallback=146]="UndefinedErrorCallback",e[e.UndefinedTraceProcessingInfoToReturnBack=147]="UndefinedTraceProcessingInfoToReturnBack",e[e.WebWorkerAlreadyStarted=148]="WebWorkerAlreadyStarted",e[e.WebWorkerErrorFallingBackToMainEventLoop=149]="WebWorkerErrorFallingBackToMainEventLoop",e[e.CustomPropertiesMissingInTrace=150]="CustomPropertiesMissingInTrace",e[e.ProfilerTraceMissingInTrace=151]="ProfilerTraceMissingInTrace",e[e.ProfilerTraceStartTimestampMissingInTrace=152]="ProfilerTraceStartTimestampMissingInTrace",e[e.ProfilerPropertiesMissingInTrace=153]="ProfilerPropertiesMissingInTrace",e[e.ElapsedProfilingTimeMissingInTrace=154]="ElapsedProfilingTimeMissingInTrace",e[e.InvalidProfilerTraceToProcess=155]="InvalidProfilerTraceToProcess",e[e.WebWorkerError=156]="WebWorkerError",e[e.WebWorkerTraceProcessingInfoMissingToReturnOnError=157]="WebWorkerTraceProcessingInfoMissingToReturnOnError",e[e.WebWorkerErrorCallbackNotRegistered=158]="WebWorkerErrorCallbackNotRegistered",e[e.ProfilerTrace=159]="ProfilerTrace",e[e.MissingCallToFilterCallTrees=160]="MissingCallToFilterCallTrees",e[e.MissingCallToFilterFrames=161]="MissingCallToFilterFrames",e[e.NullCallTreeFramesFiltererFilterFramesInvoked=162]="NullCallTreeFramesFiltererFilterFramesInvoked",e[e.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked=163]="NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked",e[e.NullCallTreeGetFramesFiltererInvoked=164]="NullCallTreeGetFramesFiltererInvoked",e[e.FilterFrameWithNoParent=165]="FilterFrameWithNoParent",e[e.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo=166]="MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo",e[e.NoCallTreesToSend=167]="NoCallTreesToSend",e[e.OperationLogMessageFiltererInitOptions=168]="OperationLogMessageFiltererInitOptions",e[e.ErrorFromWorker=169]="ErrorFromWorker",e[e.WebWorkerTerminated=170]="WebWorkerTerminated",e[e.NullOrUndefinedProfilerEvent=171]="NullOrUndefinedProfilerEvent",e[e.UnknownProfilerEventId=172]="UnknownProfilerEventId",e[e.NullOrUndefinedProfilerTrace=173]="NullOrUndefinedProfilerTrace",e[e.OperationLogMessageFilteringCriteriaMissingInTrace=174]="OperationLogMessageFilteringCriteriaMissingInTrace",e[e.NullOrUndefinedProfilerObserverPassedInForSubscribe=175]="NullOrUndefinedProfilerObserverPassedInForSubscribe",e[e.NullOrUndefinedProfilerEventIds=176]="NullOrUndefinedProfilerEventIds",e[e.UnexpectedUndefinedProfilerEventIds=177]="UnexpectedUndefinedProfilerEventIds",e[e.NullOrUndefinedProfilerObserverPassedInForUnsubscribe=178]="NullOrUndefinedProfilerObserverPassedInForUnsubscribe",e[e.NullOrUndefinedProfilerEventToUnsubscribe=179]="NullOrUndefinedProfilerEventToUnsubscribe",e[e.ProfilerObserverWasNeverSubscribed=180]="ProfilerObserverWasNeverSubscribed",e[e.UnexpectedNullOrUndefinedSubscribedProfilerEventIds=181]="UnexpectedNullOrUndefinedSubscribedProfilerEventIds",e[e.ProfilerObserverNeverSubscribedForProfilerEventId=182]="ProfilerObserverNeverSubscribedForProfilerEventId",e[e.CallTreeCustomPropertiesRetrieversMissingInTrace=183]="CallTreeCustomPropertiesRetrieversMissingInTrace",e[e.NullOrUndefinedItemToSubscribe=184]="NullOrUndefinedItemToSubscribe",e[e.NullOrUndefinedItemForUnsubscribe=185]="NullOrUndefinedItemForUnsubscribe",e[e.ItemWasNeverSubscribed=186]="ItemWasNeverSubscribed",e[e.NumberOfCallTreesFiltererByCustomFilterers=187]="NumberOfCallTreesFiltererByCustomFilterers",e[e.ProcessTraceParamsIsNullOrUndefined=188]="ProcessTraceParamsIsNullOrUndefined",e[e.CurrentTraceBeingProcessedNullOrUndefined=189]="CurrentTraceBeingProcessedNullOrUndefined",e[e.TraceIdMissingInTrace=190]="TraceIdMissingInTrace",e[e.UndefinedStoredProfilerTraceProcessingWorker=191]="UndefinedStoredProfilerTraceProcessingWorker",e[e.BailingOutOnNullProfiler=192]="BailingOutOnNullProfiler",e[e.NotProcessingCapturedTraceDueToUserBeingIdle=193]="NotProcessingCapturedTraceDueToUserBeingIdle",e[e.NullCallTreeGetReconstructableTreeIteratorInvoked=194]="NullCallTreeGetReconstructableTreeIteratorInvoked",e[e.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace=195]="GetCustomPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetResourcesCalledOnNullJSCPUProfilerTrace=196]="GetResourcesCalledOnNullJSCPUProfilerTrace",e[e.GetFramesCalledOnNullJSCPUProfilerTrace=197]="GetFramesCalledOnNullJSCPUProfilerTrace",e[e.GetStacksCalledOnNullJSCPUProfilerTrace=198]="GetStacksCalledOnNullJSCPUProfilerTrace",e[e.GetSamplesCalledOnNullJSCPUProfilerTrace=199]="GetSamplesCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace=200]="GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace",e[e.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace=201]="GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace",e[e.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace=202]="GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace",e[e.RemoveQueryParamsFromResourceURLsNeverCalled=203]="RemoveQueryParamsFromResourceURLsNeverCalled",e[e.SerializeCallTreeNeverCalled=204]="SerializeCallTreeNeverCalled",e[e.ConvertToJSONStringWasNeverCalled=205]="ConvertToJSONStringWasNeverCalled",e[e.NullJSCPUProfilerSubscribeProfilerObserverCalled=206]="NullJSCPUProfilerSubscribeProfilerObserverCalled",e[e.NullJSCPUProfilerUnsubscribeProfilerObserverCalled=207]="NullJSCPUProfilerUnsubscribeProfilerObserverCalled",e[e.NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled=208]="NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled",e[e.NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled=209]="NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled",e[e.NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled=210]="NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled",e[e.NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled=211]="NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled",e[e.NullJSCPUProfilerProcessProfilesCalled=212]="NullJSCPUProfilerProcessProfilesCalled",e[e.UnableToRetrieveCompressedBlob=213]="UnableToRetrieveCompressedBlob",e[e.UnableToRetrieveArrayBufferFromCompressedBlob=214]="UnableToRetrieveArrayBufferFromCompressedBlob",e[e.CompressionStreamAPIIsNotAvailable=215]="CompressionStreamAPIIsNotAvailable",e[e.WebWorkerSource=216]="WebWorkerSource",e[e.WebWorkerCreationSucceeded=217]="WebWorkerCreationSucceeded",e[e.WebWorkerCreationFailed=218]="WebWorkerCreationFailed",e[e.WorkerNotRunning=219]="WorkerNotRunning",e[e.FailedToCompressMultipleCallTreesDeobfuscationRequest=220]="FailedToCompressMultipleCallTreesDeobfuscationRequest",e[e.FailedToCompressIndividualCallTreeDeobfuscationRequest=221]="FailedToCompressIndividualCallTreeDeobfuscationRequest",e[e.NullStringCompressorInvoked=222]="NullStringCompressorInvoked",e[e.UnknownStoredWebWorkerRequestId=223]="UnknownStoredWebWorkerRequestId",e[e.UnknownWebWorkerRequestId=224]="UnknownWebWorkerRequestId",e[e.MessageFromWorkerIsNullorUndefined=225]="MessageFromWorkerIsNullorUndefined",e[e.MessageFromWorkerNotObject=226]="MessageFromWorkerNotObject",e[e.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError=227]="UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError",e[e.WebWorkerInitializationError=228]="WebWorkerInitializationError",e[e.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError=229]="UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError",e[e.StartWorkerInvokedOnNullWorker=230]="StartWorkerInvokedOnNullWorker",e[e.ProcessRequestInvokedOnNullWorker=231]="ProcessRequestInvokedOnNullWorker",e[e.ProcessRequestForProcessTraceFailed=232]="ProcessRequestForProcessTraceFailed",e[e.GetWorkerIdInvokedOnNullWorker=233]="GetWorkerIdInvokedOnNullWorker",e[e.UnknownWebWorkerErrorId=234]="UnknownWebWorkerErrorId",e[e.InvalidTraceReceivedByWorker=235]="InvalidTraceReceivedByWorker",e[e.UnknownMessageIdReceivedByWorker=236]="UnknownMessageIdReceivedByWorker",e[e.WorkerIDBeingSetToBusyNotPresentInIdleWorkers=237]="WorkerIDBeingSetToBusyNotPresentInIdleWorkers",e[e.WorkerIDBeingSetToIdleNotPresentInBusyWorkers=238]="WorkerIDBeingSetToIdleNotPresentInBusyWorkers",e[e.UnknownWorkerIDBeingTerminated=239]="UnknownWorkerIDBeingTerminated"}(ts||(ts={}));class Is{logMissingProfilerImplementation(){this.sendLogMessageToProcessors({id:ts.MissingProfilerImplementation,message:void 0,context:this.logContext})}logFailingValidationsInProfilerFactory(){this.sendLogMessageToProcessors({id:ts.FailingValidationsInProfilerFactory,message:void 0,context:this.logContext})}logWindowMissingInJSEnvironment(){this.sendLogMessageToProcessors({id:ts.WindowMissingInJSEnvironment,message:void 0,context:this.logContext})}logWindowPropertyNameChecked(e){this.sendLogMessageToProcessors({id:ts.WindowPropertyNameChecked,message:e,context:this.logContext})}logUserAgentToParseChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:ts.UserAgentToParseChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logChromeNotPresentInUserAgent(){this.sendLogMessageToProcessors({id:ts.ChromeNotPresentInUserAgent,message:void 0,context:this.logContext})}logUnableToIsolateChromeInformationFromUserAgent(){this.sendLogMessageToProcessors({id:ts.UnableToIsolateChromeInformationFromUserAgent,message:void 0,context:this.logContext})}logUnableToExtractChromeVersionInformation(){this.sendLogMessageToProcessors({id:ts.UnableToExtractChromeVersionInformation,message:void 0,context:this.logContext})}logUnableToParseChromeMajorVersionString(){this.sendLogMessageToProcessors({id:ts.UnableToParseChromeMajorVersionString,message:void 0,context:this.logContext})}logParsedChromiumMajorVersionNumber(e){this.sendLogMessageToProcessors({id:ts.ParsedChromiumMajorVersionNumber,message:e,context:this.logContext})}logUserAgentToCheckForChromiumBrowser(e){this.sendLogMessageToProcessors({id:ts.UserAgentToCheckForChromiumBrowser,message:e,context:this.logContext})}logEmptyUserAgentString(){this.sendLogMessageToProcessors({id:ts.EmptyUserAgentString,message:void 0,context:this.logContext})}logBrowserUserAgentNotChromiumBased(){this.sendLogMessageToProcessors({id:ts.BrowserUserAgentNotChromiumBased,message:void 0,context:this.logContext})}logUserAgentSpoofedToBeChromium(){this.sendLogMessageToProcessors({id:ts.UserAgentSpoofedToBeChromium,message:void 0,context:this.logContext})}logBrowserNotChromiumBasedBrowser(){this.sendLogMessageToProcessors({id:ts.BrowserNotChromiumBasedBrowser,message:void 0,context:this.logContext})}logUnsupportedChromiumMajorVersionNumber(){this.sendLogMessageToProcessors({id:ts.UnsupportedChromiumMajorVersionNumber,message:void 0,context:this.logContext})}logProfilerInitOptionsNullOrUndefined(){this.sendLogMessageToProcessors({id:ts.ProfilerInitOptionsNullOrUndefined,message:void 0,context:this.logContext})}logSamplingIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:ts.SamplingIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logSamplingIntervalLessThanMinimumSupportedSamplingInterval(e,r){this.sendLogMessageToProcessors({id:ts.SamplingIntervalLessThanMinimumSupportedSamplingInterval,message:{samplingInterval:e,minimumSupportedSamplingInterval:r},context:this.logContext})}logUnsupportedBrowser(){this.sendLogMessageToProcessors({id:ts.UnsupportedBrowser,message:void 0,context:this.logContext})}logUnsupportedOperatingSystem(){this.sendLogMessageToProcessors({id:ts.UnsupportedOperatingSystem,message:void 0,context:this.logContext})}logJSSelfProfilingAPIUnavailable(){this.sendLogMessageToProcessors({id:ts.JSSelfProfilingAPIUnavailable,message:void 0,context:this.logContext})}logRetrievedUserAgent(e){this.sendLogMessageToProcessors({id:ts.RetrievedUserAgent,message:e,context:this.logContext})}logNullJSCPUProfilerStartCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerStartCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerStopCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerStopCalled,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerInitOptions(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerInitOptions,message:void 0,context:this.logContext})}logMaxBufferSizeFixedToDefaultSize(){this.sendLogMessageToProcessors({id:ts.MaxBufferSizeFixedToDefaultSize,message:void 0,context:this.logContext})}logMaxBufferSizeWasNotFixedBeforeRetrieval(){this.sendLogMessageToProcessors({id:ts.MaxBufferSizeWasNotFixedBeforeRetrieval,message:void 0,context:this.logContext})}logProfilerNotPresentInJSEnvironment(){this.sendLogMessageToProcessors({id:ts.ProfilerNotPresentInJSEnvironment,message:void 0,context:this.logContext})}logSamplingIntervalValidationCheckFailed(){this.sendLogMessageToProcessors({id:ts.SamplingIntervalValidationCheckFailed,message:void 0,context:this.logContext})}logMaxBufferValidationFailed(){this.sendLogMessageToProcessors({id:ts.MaxBufferValidationFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotSpecified(){this.sendLogMessageToProcessors({id:ts.MaxBufferSizeNotSpecified,message:void 0,context:this.logContext})}logMaxBufferSizeLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:ts.MaxBufferSizeLessThanOrEqualToZero,message:void 0,context:this.logContext})}logManualProfilerValidationFailed(){this.sendLogMessageToProcessors({id:ts.ManualProfilerValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalValidationFailed(){this.sendLogMessageToProcessors({id:ts.ProfilingIntervalValidationFailed,message:void 0,context:this.logContext})}logProfilingIntervalNullOrUndefined(){this.sendLogMessageToProcessors({id:ts.ProfilingIntervalNullOrUndefined,message:void 0,context:this.logContext})}logProfilingIntervalLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:ts.ProfilingIntervalLessThanOrEqualToZero,message:void 0,context:this.logContext})}logProfilingIntervalLessThanSamplingInterval(){this.sendLogMessageToProcessors({id:ts.ProfilingIntervalLessThanSamplingInterval,message:void 0,context:this.logContext})}logTimedProfilerValidationFailed(){this.sendLogMessageToProcessors({id:ts.TimedProfilerValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalValidationFailed(){this.sendLogMessageToProcessors({id:ts.IdleIntervalValidationFailed,message:void 0,context:this.logContext})}logIdleIntervalIsNullOrUndefined(){this.sendLogMessageToProcessors({id:ts.IdleIntervalIsNullOrUndefined,message:void 0,context:this.logContext})}logIdleIntervalIsLessThanOrEqualToZero(){this.sendLogMessageToProcessors({id:ts.IdleIntervalIsLessThanOrEqualToZero,message:void 0,context:this.logContext})}logPostProfilerStartCallbackSpecified(){this.sendLogMessageToProcessors({id:ts.PostProfilerStartCallbackSpecified,message:void 0,context:this.logContext})}logPreProfilerStartCheckFailed(){this.sendLogMessageToProcessors({id:ts.PreProfilerStartCheckFailed,message:void 0,context:this.logContext})}logMaxBufferSizeNotFixed(){this.sendLogMessageToProcessors({id:ts.MaxBufferSizeNotFixed,message:void 0,context:this.logContext})}logBailingOutOnNullProfiler(){this.sendLogMessageToProcessors({id:ts.BailingOutOnNullProfiler,message:void 0,context:this.logContext})}logProfilerAlreadyStarted(){this.sendLogMessageToProcessors({id:ts.ProfilerAlreadyStarted,message:void 0,context:this.logContext})}logProfilerStartSucceeded(){this.sendLogMessageToProcessors({id:ts.ProfilerStartSucceeded,message:void 0,context:this.logContext})}logInvokingPostProfilerStartCallback(){this.sendLogMessageToProcessors({id:ts.InvokingPostProfilerStartCallback,message:void 0,context:this.logContext})}logPostProfilerStopCallbackSpecified(){this.sendLogMessageToProcessors({id:ts.PostProfilerStopCallbackSpecified,message:void 0,context:this.logContext})}logProfilerInstanceIsUndefined(){this.sendLogMessageToProcessors({id:ts.ProfilerInstanceIsUndefined,message:void 0,context:this.logContext})}logProfilerStopPromiseResolved(){this.sendLogMessageToProcessors({id:ts.ProfilerStopPromiseResolved,message:void 0,context:this.logContext})}logProfilerStopPromiseRejected(e){this.sendLogMessageToProcessors({id:ts.ProfilerStopPromiseRejected,message:e,context:this.logContext})}logPostProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:ts.PostProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToUserBeingIdle(){this.sendLogMessageToProcessors({id:ts.NotProcessingCapturedTraceDueToUserBeingIdle,message:void 0,context:this.logContext})}logPostTimedStartProfilerStartCallbackInvoked(){this.sendLogMessageToProcessors({id:ts.PostTimedStartProfilerStartCallbackInvoked,message:void 0,context:this.logContext})}logProfilingIntervalIsUndefined(){this.sendLogMessageToProcessors({id:ts.ProfilingIntervalIsUndefined,message:void 0,context:this.logContext})}logTimerJobToStopProfilerSet(){this.sendLogMessageToProcessors({id:ts.TimerJobToStopProfilerSet,message:void 0,context:this.logContext})}logTimedProfilerStopCallbackInvoked(){this.sendLogMessageToProcessors({id:ts.TimedProfilerStopCallbackInvoked,message:void 0,context:this.logContext})}logTimedProfilerIsBeingStoppedManually(){this.sendLogMessageToProcessors({id:ts.TimedProfilerIsBeingStoppedManually,message:void 0,context:this.logContext})}logProfilerStartPromiseCreated(){this.sendLogMessageToProcessors({id:ts.ProfilerStartPromiseCreated,message:void 0,context:this.logContext})}logProfilerStopGoingToBeInvoked(){this.sendLogMessageToProcessors({id:ts.ProfilerStopGoingToBeInvoked,message:void 0,context:this.logContext})}logSamplingIntervalUsedForStartingProfiler(){this.sendLogMessageToProcessors({id:ts.SamplingIntervalUsedForStartingProfiler,message:void 0,context:this.logContext})}logMaxBufferSize(e){this.sendLogMessageToProcessors({id:ts.MaxBufferSize,message:e,context:this.logContext})}logNoProfilerInstanceBuilt(){this.sendLogMessageToProcessors({id:ts.NoProfilerInstanceBuilt,message:void 0,context:this.logContext})}logProfilerInitOptionsValidationFailed(){this.sendLogMessageToProcessors({id:ts.ProfilerInitOptionsValidationFailed,message:void 0,context:this.logContext})}logUnableToFixUpProfilerInitOptions(){this.sendLogMessageToProcessors({id:ts.UnableToFixUpProfilerInitOptions,message:void 0,context:this.logContext})}logProfilingIsNotEnabled(){this.sendLogMessageToProcessors({id:ts.ProfilingIsNotEnabled,message:void 0,context:this.logContext})}logProfilingIsNotSupportedEnvironment(){this.sendLogMessageToProcessors({id:ts.ProfilingIsNotSupportedEnvironment,message:void 0,context:this.logContext})}logFeatureCheckerIsNullOrUndefined(){this.sendLogMessageToProcessors({id:ts.FeatureCheckerIsNullOrUndefined,message:void 0,context:this.logContext})}logNullSupportedEnvironmentCheckerInvoked(){this.sendLogMessageToProcessors({id:ts.NullSupportedEnvironmentCheckerInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerInitOptionsValidatorInvoked(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerInitOptionsValidatorInvoked,message:void 0,context:this.logContext})}logNullJSCPUProfilerFactoryInvoked(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerFactoryInvoked,message:void 0,context:this.logContext})}logNullOrUndefinedIdleInterval(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedIdleInterval,message:void 0,context:this.logContext})}logCreateProfilerDidNotSubscribeProfilerObserver(){this.sendLogMessageToProcessors({id:ts.CreateProfilerDidNotSubscribeProfilerObserver,message:void 0,context:this.logContext})}logNullOrUndefinedCustomPropertiesRetriever(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedCustomPropertiesRetriever,message:void 0,context:this.logContext})}logNullOrUndefinedCustomProperties(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedCustomProperties,message:void 0,context:this.logContext})}logCustomPropertyKeyIsNull(){this.sendLogMessageToProcessors({id:ts.CustomPropertyKeyIsNull,message:void 0,context:this.logContext})}logCustomPropertyValueIsNull(){this.sendLogMessageToProcessors({id:ts.CustomPropertyValueIsNull,message:void 0,context:this.logContext})}logRetrieveCallTreesCalledBeforeTransform(){this.sendLogMessageToProcessors({id:ts.RetrieveCallTreesCalledBeforeTransform,message:void 0,context:this.logContext})}logRetrieveBuiltCallTreesBeforeBuildCallTrees(){this.sendLogMessageToProcessors({id:ts.RetrieveBuiltCallTreesBeforeBuildCallTrees,message:void 0,context:this.logContext})}logRetrieveStacksCalledBeforeBuildStacks(){this.sendLogMessageToProcessors({id:ts.RetrieveStacksCalledBeforeBuildStacks,message:void 0,context:this.logContext})}logExecutionStacksNeverBuilt(){this.sendLogMessageToProcessors({id:ts.ExecutionStacksNeverBuilt,message:void 0,context:this.logContext})}logPeekOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:ts.PeekOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logPopOnNullExecutionStackInvoked(){this.sendLogMessageToProcessors({id:ts.PopOnNullExecutionStackInvoked,message:void 0,context:this.logContext})}logEmptyStacks(){this.sendLogMessageToProcessors({id:ts.EmptyStacks,message:void 0,context:this.logContext})}logEmptyFrames(){this.sendLogMessageToProcessors({id:ts.EmptyFrames,message:void 0,context:this.logContext})}logForciblyExitingLoopWhileBuildingStack(){this.sendLogMessageToProcessors({id:ts.ForciblyExitingLoopWhileBuildingStack,message:void 0,context:this.logContext})}logRetrieveStackCalledBeforeBuildStack(){this.sendLogMessageToProcessors({id:ts.RetrieveStackCalledBeforeBuildStack,message:void 0,context:this.logContext})}logExecutionStackNeverBuilt(){this.sendLogMessageToProcessors({id:ts.ExecutionStackNeverBuilt,message:void 0,context:this.logContext})}logConvertStacksToCallTreesNeverCalled(){this.sendLogMessageToProcessors({id:ts.ConvertStacksToCallTreesNeverCalled,message:void 0,context:this.logContext})}logConvertStackToCallTreeNeverCalled(){this.sendLogMessageToProcessors({id:ts.ConvertStackToCallTreeNeverCalled,message:void 0,context:this.logContext})}logNullFrameNodeCreated(){this.sendLogMessageToProcessors({id:ts.NullFrameNodeCreated,message:void 0,context:this.logContext})}logInvalidSampleIndex(){this.sendLogMessageToProcessors({id:ts.InvalidSampleIndex,message:void 0,context:this.logContext})}logInvalidFrameNodeStartTime(){this.sendLogMessageToProcessors({id:ts.InvalidFrameNodeStartTime,message:void 0,context:this.logContext})}logInvalidFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:ts.InvalidFrameNodeExecutionTime,message:void 0,context:this.logContext})}logInvalidNewFrameNodeExecutionTime(){this.sendLogMessageToProcessors({id:ts.InvalidNewFrameNodeExecutionTime,message:void 0,context:this.logContext})}logNegativeSubTreeExecutionTime(){this.sendLogMessageToProcessors({id:ts.NegativeSubTreeExecutionTime,message:void 0,context:this.logContext})}logFixerForProfilerType(e){this.sendLogMessageToProcessors({id:ts.FixerForProfilerType,message:e,context:this.logContext})}logMissingProfilerInitOptionsFixerImplementation(){this.sendLogMessageToProcessors({id:ts.MissingProfilerInitOptionsFixerImplementation,message:void 0,context:this.logContext})}logLoopBackFixerFixProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:ts.LoopBackFixerFixProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logLoopBackFixerRetrieveFixedProfilerInitOptionsInvoked(){this.sendLogMessageToProcessors({id:ts.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked,message:void 0,context:this.logContext})}logMissingDeObfuscationEndpoint(){this.sendLogMessageToProcessors({id:ts.MissingDeObfuscationEndpoint,message:void 0,context:this.logContext})}logNotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling(){this.sendLogMessageToProcessors({id:ts.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling,message:void 0,context:this.logContext})}logNullCallTreeDepthFirstIteratorInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeDepthFirstIteratorInvoked,message:void 0,context:this.logContext})}logEmptySamplesArrayPassedToFilter(){this.sendLogMessageToProcessors({id:ts.EmptySamplesArrayPassedToFilter,message:void 0,context:this.logContext})}logNullCallTreeLeftMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeLeftMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logNullCallTreeRightMostNodesIteratorInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeRightMostNodesIteratorInvoked,message:void 0,context:this.logContext})}logMissingIsProfilingEnabledOnFeatureChecker(){this.sendLogMessageToProcessors({id:ts.MissingIsProfilingEnabledOnFeatureChecker,message:void 0,context:this.logContext})}logFeatureCheckerIsProfilingEnabledNotAFunction(){this.sendLogMessageToProcessors({id:ts.FeatureCheckerIsProfilingEnabledNotAFunction,message:void 0,context:this.logContext})}logNullCallTreeGetTotalExecutionTimeInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeGetTotalExecutionTimeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetCustomPropertiesInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeGetCustomPropertiesInvoked,message:void 0,context:this.logContext})}logNoCallTreesToSend(){this.sendLogMessageToProcessors({id:ts.NoCallTreesToSend,message:void 0,context:this.logContext})}logSerializedCallTrees(e){this.sendLogMessageToProcessors({id:ts.SerializedCallTrees,message:e,context:this.logContext})}logNullCallTreeIteratorImplGetNextInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeIteratorImplGetNextInvoked,message:void 0,context:this.logContext})}logNullCallTreeIteratorImplHasMoreInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeIteratorImplHasMoreInvoked,message:void 0,context:this.logContext})}logMissingProfilerNameForProfilerType(e){this.sendLogMessageToProcessors({id:ts.MissingProfilerNameForProfilerType,message:e,context:this.logContext})}logExpectedOnlyOneNodePerLevelInCallTree(){this.sendLogMessageToProcessors({id:ts.ExpectedOnlyOneNodePerLevelInCallTree,message:void 0,context:this.logContext})}logMissingWebWorkerSourceURL(){this.sendLogMessageToProcessors({id:ts.MissingWebWorkerSourceURL,message:void 0,context:this.logContext})}logMaxNumberOfProfilersAlreadyCreated(){this.sendLogMessageToProcessors({id:ts.MaxNumberOfProfilersAlreadyCreated,message:void 0,context:this.logContext})}logWebWorkerAPINotAvailable(){this.sendLogMessageToProcessors({id:ts.WebWorkerAPINotAvailable,message:void 0,context:this.logContext})}logSamplingIntervalAboveMaxSamplingInterval(){this.sendLogMessageToProcessors({id:ts.SamplingIntervalAboveMaxSamplingInterval,message:void 0,context:this.logContext})}logUnableToBootWebWorker(){this.sendLogMessageToProcessors({id:ts.UnableToBootWebWorker,message:void 0,context:this.logContext})}logWorkerInstanceNotFound(){this.sendLogMessageToProcessors({id:ts.WorkerInstanceNotFound,message:void 0,context:this.logContext})}logIdNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:ts.IdNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageToWorker(){this.sendLogMessageToProcessors({id:ts.DataNotFoundInMessageToWorker,message:void 0,context:this.logContext})}logIdNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:ts.IdNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logDataNotFoundInMessageFromWorker(){this.sendLogMessageToProcessors({id:ts.DataNotFoundInMessageFromWorker,message:void 0,context:this.logContext})}logIdNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:ts.IdNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logMessageNotFoundInWorkerLogMessage(){this.sendLogMessageToProcessors({id:ts.MessageNotFoundInWorkerLogMessage,message:void 0,context:this.logContext})}logUnknownMessageFromWorker(e){this.sendLogMessageToProcessors({id:ts.UnknownMessageFromWorker,message:void 0,context:this.logContext})}logUnknownLogMessageFromWorker(e){this.sendLogMessageToProcessors({id:ts.UnknownLogMessageFromWorker,message:void 0,context:this.logContext})}logOperation(e,r,s,t,o,i,a,n){const l={operationName:e,parentOperationName:r,didOperationSucceed:s,measuredRunTime:t,didOperationFailUnexpectedly:o,logs:i,propertyBag:a,exception:n};this.sendLogMessageToProcessors({id:ts.Operation,message:l,context:this.logContext})}logFallbackResultReturned(){this.sendLogMessageToProcessors({id:ts.FallbackResultReturned,message:void 0,context:this.logContext})}logUnknownMessageToWorker(e){this.sendLogMessageToProcessors({id:ts.FallbackResultReturned,message:e,context:this.logContext})}logErrorFromWorker(e){this.sendLogMessageToProcessors({id:ts.ErrorFromWorker,message:e,context:this.logContext})}logExceptionEncounteredInWorker(e){this.sendLogMessageToProcessors({id:ts.ExceptionEncounteredInWorker,message:e,context:this.logContext})}logMissingDeObfuscationInfoInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:ts.MissingDeObfuscationInfoInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:ts.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingShouldRecordExpandedTimeStampsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:ts.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo,message:void 0,context:this.logContext})}logMissingCallTreeFilteringThresholdInMsInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:ts.MissingCallTreeFilteringThresholdInMs,message:void 0,context:this.logContext})}logInvalidMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:ts.InvalidMessageReceivedByWorker,message:void 0,context:this.logContext})}logInvalidProcessTraceMessageReceivedByWorker(){this.sendLogMessageToProcessors({id:ts.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logMissingTraceInTraceProcessingInfo(){this.sendLogMessageToProcessors({id:ts.InvalidProcessTraceMessageReceivedByWorker,message:void 0,context:this.logContext})}logSerializedCallTreesMissingInProcessorResult(){this.sendLogMessageToProcessors({id:ts.SerializedCallTreesMissingInProcessorResult,message:void 0,context:this.logContext})}logLogsMissingInProcessorResult(){this.sendLogMessageToProcessors({id:ts.LogsMissingInProcessorResult,message:void 0,context:this.logContext})}logUndefinedWebWorkerCompletionCallback(){this.sendLogMessageToProcessors({id:ts.UndefinedWebWorkerCompletionCallback,message:void 0,context:this.logContext})}logLogsMissingInErrorsFromWebWorker(){this.sendLogMessageToProcessors({id:ts.LogsMissingInErrorsFromWebWorker,message:void 0,context:this.logContext})}logUndefinedErrorCallback(){this.sendLogMessageToProcessors({id:ts.UndefinedErrorCallback,message:void 0,context:this.logContext})}logUndefinedTraceProcessingInfoToReturnBack(){this.sendLogMessageToProcessors({id:ts.UndefinedTraceProcessingInfoToReturnBack,message:void 0,context:this.logContext})}logWebWorkerErrorFallingBackToMainEventLoop(){this.sendLogMessageToProcessors({id:ts.WebWorkerErrorFallingBackToMainEventLoop,message:void 0,context:this.logContext})}logWebWorkerAlreadyStarted(){this.sendLogMessageToProcessors({id:ts.WebWorkerAlreadyStarted,message:void 0,context:this.logContext})}logWebWorkerTerminated(){this.sendLogMessageToProcessors({id:ts.WebWorkerTerminated,message:void 0,context:this.logContext})}logCustomPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:ts.CustomPropertiesMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceMissingInTrace(){this.sendLogMessageToProcessors({id:ts.ProfilerTraceMissingInTrace,message:void 0,context:this.logContext})}logProfilerTraceStartTimestampMissingInTrace(){this.sendLogMessageToProcessors({id:ts.ProfilerTraceStartTimestampMissingInTrace,message:void 0,context:this.logContext})}logProfilerPropertiesMissingInTrace(){this.sendLogMessageToProcessors({id:ts.ProfilerPropertiesMissingInTrace,message:void 0,context:this.logContext})}logElapsedProfilingTimeMissingInTrace(){this.sendLogMessageToProcessors({id:ts.ElapsedProfilingTimeMissingInTrace,message:void 0,context:this.logContext})}logInvalidProfilerTraceToProcess(){this.sendLogMessageToProcessors({id:ts.InvalidProfilerTraceToProcess,message:void 0,context:this.logContext})}logWebWorkerError(e){this.sendLogMessageToProcessors({id:ts.WebWorkerError,message:e,context:this.logContext})}logWebWorkerErrorCallbackNotRegistered(){this.sendLogMessageToProcessors({id:ts.WebWorkerErrorCallbackNotRegistered,message:void 0,context:this.logContext})}logWebWorkerTraceProcessingInfoMissingToReturnOnError(){this.sendLogMessageToProcessors({id:ts.WebWorkerTraceProcessingInfoMissingToReturnOnError,message:void 0,context:this.logContext})}logProfilerTrace(e,r){this.sendLogMessageToProcessors({id:ts.ProfilerTrace,message:e,context:this.logContext,logOptions:{profilerTraceLoggingChunkSize:r}})}logMissingCallToFilterCallTrees(){this.sendLogMessageToProcessors({id:ts.MissingCallToFilterCallTrees,message:void 0,context:this.logContext})}logMissingCallToFilterFrames(){this.sendLogMessageToProcessors({id:ts.MissingCallToFilterFrames,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererFilterFramesInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeFramesFiltererFilterFramesInvoked,message:void 0,context:this.logContext})}logNullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked,message:void 0,context:this.logContext})}logNullCallTreeGetFramesFiltererInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeGetFramesFiltererInvoked,message:void 0,context:this.logContext})}logFilterFrameWithNoParent(){this.sendLogMessageToProcessors({id:ts.FilterFrameWithNoParent,message:void 0,context:this.logContext})}subscribe(e){this.logMessageProcessors.push(e)}unsubscribe(e){this.logMessageProcessors=this.logMessageProcessors.filter((r=>r!==e))}sendLogMessageToProcessors(e){this.logMessageProcessors.forEach((r=>{r.processLogMessage(e)}))}logOperationLogMessageFiltererInitOptions(e,r,s){this.sendLogMessageToProcessors({id:ts.OperationLogMessageFiltererInitOptions,message:{shouldAlwaysLogOperationsData:e,listOfOperationNamesToAlwaysLog:r,operationMeasuredRunTimeFilteringThresholdInMs:s},context:this.logContext})}logNullOrUndefinedProfilerEvent(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerEvent,message:void 0,context:this.logContext})}logUnknownProfilerEventId(e){this.sendLogMessageToProcessors({id:ts.UnknownProfilerEventId,message:e,context:this.logContext})}logNullOrUndefinedProfilerTrace(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerTrace,message:void 0,context:this.logContext})}logOperationLogMessageFilteringCriteriaMissingInTrace(){this.sendLogMessageToProcessors({id:ts.OperationLogMessageFilteringCriteriaMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForSubscribe(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerObserverPassedInForSubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logUnexpectedUndefinedProfilerEventIds(){this.sendLogMessageToProcessors({id:ts.UnexpectedUndefinedProfilerEventIds,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerObserverPassedInForUnsubscribe(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerObserverPassedInForUnsubscribe,message:void 0,context:this.logContext})}logNullOrUndefinedProfilerEventToUnsubscribe(){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedProfilerEventToUnsubscribe,message:void 0,context:this.logContext})}logProfilerObserverWasNeverSubscribed(){this.sendLogMessageToProcessors({id:ts.ProfilerObserverWasNeverSubscribed,message:void 0,context:this.logContext})}logUnexpectedNullOrUndefinedSubscribedProfilerEventIds(){this.sendLogMessageToProcessors({id:ts.UnexpectedNullOrUndefinedSubscribedProfilerEventIds,message:void 0,context:this.logContext})}logProfilerObserverNeverSubscribedForProfilerEventId(e){this.sendLogMessageToProcessors({id:ts.ProfilerObserverNeverSubscribedForProfilerEventId,message:e,context:this.logContext})}logCallTreeCustomPropertiesRetrieversMissingInTrace(){this.sendLogMessageToProcessors({id:ts.CallTreeCustomPropertiesRetrieversMissingInTrace,message:void 0,context:this.logContext})}logNullOrUndefinedItemToSubscribe(e){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedItemToSubscribe,message:e,context:this.logContext})}logNullOrUndefinedItemForUnsubscribe(e){this.sendLogMessageToProcessors({id:ts.NullOrUndefinedItemForUnsubscribe,message:e,context:this.logContext})}logItemWasNeverSubscribed(e){this.sendLogMessageToProcessors({id:ts.ItemWasNeverSubscribed,message:e,context:this.logContext})}logNumberOfCallTreesFiltererByCustomFilterers(e,r){this.sendLogMessageToProcessors({id:ts.NumberOfCallTreesFiltererByCustomFilterers,message:{filteredCount:e,totalCount:r},context:this.logContext})}logProcessTraceParamsIsNullOrUndefined(){this.sendLogMessageToProcessors({id:ts.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logCurrentTraceBeingProcessedNullOrUndefined(){this.sendLogMessageToProcessors({id:ts.ProcessTraceParamsIsNullOrUndefined,message:void 0,context:this.logContext})}logTraceIdMissingInTrace(){this.sendLogMessageToProcessors({id:ts.TraceIdMissingInTrace,message:void 0,context:this.logContext})}logUndefinedStoredProfilerTraceProcessingWorker(){this.sendLogMessageToProcessors({id:ts.UndefinedStoredProfilerTraceProcessingWorker,message:void 0,context:this.logContext})}logNullCallTreeGetReconstructableTreeIteratorInvoked(){this.sendLogMessageToProcessors({id:ts.NullCallTreeGetReconstructableTreeIteratorInvoked,message:void 0,context:this.logContext})}logGetCustomPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetResourcesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetResourcesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetFramesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetFramesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetStacksCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetStacksCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetSamplesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetSamplesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetProfilerPropertiesCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logGetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace(){this.sendLogMessageToProcessors({id:ts.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace,message:void 0,context:this.logContext})}logRemoveQueryParamsFromResourceURLsNeverCalled(){this.sendLogMessageToProcessors({id:ts.RemoveQueryParamsFromResourceURLsNeverCalled,message:void 0,context:this.logContext})}logSerializeCallTreeWasNeverCalled(){this.sendLogMessageToProcessors({id:ts.SerializeCallTreeNeverCalled,message:void 0,context:this.logContext})}logConvertToJSONStringWasNeverCalled(){this.sendLogMessageToProcessors({id:ts.ConvertToJSONStringWasNeverCalled,message:void 0,context:this.logContext})}logUnableToRetrieveCompressedBlob(e){this.sendLogMessageToProcessors({id:ts.ConvertToJSONStringWasNeverCalled,message:e,context:this.logContext})}logUnableToRetrieveArrayBufferFromCompressedBlob(e){this.sendLogMessageToProcessors({id:ts.ConvertToJSONStringWasNeverCalled,message:e,context:this.logContext})}logCompressionStreamAPIIsNotAvailable(){this.sendLogMessageToProcessors({id:ts.CompressionStreamAPIIsNotAvailable,message:void 0,context:this.logContext})}logWebWorkerSource(e){this.sendLogMessageToProcessors({id:ts.WebWorkerSource,message:e,context:this.logContext})}logWebWorkerCreationSucceeded(){this.sendLogMessageToProcessors({id:ts.WebWorkerCreationSucceeded,message:void 0,context:this.logContext})}logWebWorkerCreationFailed(){this.sendLogMessageToProcessors({id:ts.WebWorkerCreationFailed,message:void 0,context:this.logContext})}logWorkerNotRunning(){this.sendLogMessageToProcessors({id:ts.WorkerNotRunning,message:void 0,context:this.logContext})}logFailedToCompressMultipleCallTreesDeobfuscationRequest(){this.sendLogMessageToProcessors({id:ts.FailedToCompressMultipleCallTreesDeobfuscationRequest,message:void 0,context:this.logContext})}logUnknownStoredWebWorkerRequestId(e){this.sendLogMessageToProcessors({id:ts.UnknownStoredWebWorkerRequestId,message:e,context:this.logContext})}logUnknownWebWorkerRequestId(e){this.sendLogMessageToProcessors({id:ts.UnknownWebWorkerRequestId,message:e,context:this.logContext})}logMessageFromWorkerIsNullorUndefined(){this.sendLogMessageToProcessors({id:ts.MessageFromWorkerIsNullorUndefined,message:void 0,context:this.logContext})}logFailedToCompressIndividualCallTreeDeobfuscationRequest(){this.sendLogMessageToProcessors({id:ts.FailedToCompressIndividualCallTreeDeobfuscationRequest,message:void 0,context:this.logContext})}logMessageFromWorkerNotObject(){this.sendLogMessageToProcessors({id:ts.MessageFromWorkerNotObject,message:void 0,context:this.logContext})}logNullStringCompressorInvoked(){this.sendLogMessageToProcessors({id:ts.NullStringCompressorInvoked,message:void 0,context:this.logContext})}logUnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError(e){this.sendLogMessageToProcessors({id:ts.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError,message:e,context:this.logContext})}logWebWorkerInitializationError(e){this.sendLogMessageToProcessors({id:ts.WebWorkerInitializationError,message:e,context:this.logContext})}logUnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError(e){this.sendLogMessageToProcessors({id:ts.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError,message:e,context:this.logContext})}logStartWorkerInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:ts.StartWorkerInvokedOnNullWorker,message:void 0,context:this.logContext})}logProcessRequestInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:ts.ProcessRequestInvokedOnNullWorker,message:void 0,context:this.logContext})}logProcessRequestForProcessTraceFailed(){this.sendLogMessageToProcessors({id:ts.ProcessRequestForProcessTraceFailed,message:void 0,context:this.logContext})}logGetWorkerIdInvokedOnNullWorker(){this.sendLogMessageToProcessors({id:ts.GetWorkerIdInvokedOnNullWorker,message:void 0,context:this.logContext})}logUnknownWebWorkerErrorId(e){this.sendLogMessageToProcessors({id:ts.UnknownWebWorkerErrorId,message:e,context:this.logContext})}logInvalidTraceReceivedByWorker(){this.sendLogMessageToProcessors({id:ts.InvalidTraceReceivedByWorker,message:void 0,context:this.logContext})}logUnknownMessageIdReceivedByWorker(){this.sendLogMessageToProcessors({id:ts.UnknownMessageIdReceivedByWorker,message:void 0,context:this.logContext})}logNullJSCPUProfilerSubscribeProfilerObserverCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerSubscribeProfilerObserverCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerUnsubscribeProfilerObserverCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerUnsubscribeProfilerObserverCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled,message:void 0,context:this.logContext})}logNullJSCPUProfilerProcessProfilesCalled(){this.sendLogMessageToProcessors({id:ts.NullJSCPUProfilerProcessProfilesCalled,message:void 0,context:this.logContext})}logWorkerIDBeingSetToBusyNotPresentInIdleWorkers(e){this.sendLogMessageToProcessors({id:ts.WorkerIDBeingSetToBusyNotPresentInIdleWorkers,message:e,context:this.logContext})}logWorkerIDBeingSetToIdleNotPresentInBusyWorkers(e){this.sendLogMessageToProcessors({id:ts.WorkerIDBeingSetToIdleNotPresentInBusyWorkers,message:e,context:this.logContext})}logUnknownWorkerIDBeingTerminated(e){this.sendLogMessageToProcessors({id:ts.UnknownWorkerIDBeingTerminated,message:e,context:this.logContext})}constructor(e){this.logContext=e,this.logMessageProcessors=[]}}!function(e){e[e.MainEventLoop=0]="MainEventLoop",e[e.Worker=1]="Worker"}(os||(os={}));class vs{getFiltererName(){return"OperationLogMessageFilterer"}shouldFilterLogMessage(e){if(e.id!==ts.Operation)return!1;if(this.shouldAlwaysLogOperationsData)return!1;const r=e.message;return!(r.didOperationFailUnexpectedly||-1!==this.listOfOperationNamesToAlwaysLog.indexOf(r.operationName)||r.measuredRunTime>this.operationMeasuredRunTimeFilteringThresholdInMs)}constructor(e,r,s,t){this.shouldAlwaysLogOperationsData=e,this.listOfOperationNamesToAlwaysLog=r,this.operationMeasuredRunTimeFilteringThresholdInMs=s,this.logger=t,this.logger.logOperationLogMessageFiltererInitOptions(e,r,s)}}function ks(e,r=30){const s=[];for(let t=0;t<e.length;t+=r)s.push(e.slice(t,t+r));return s}class bs{getTransporterName(){return"ULSLogMessageTransporter"}transportLogMessage(e){if(!this.shouldTransportLogs)return;let r="";switch(e.context){case os.MainEventLoop:r="ProfilingSessionLogger-MainEventLoop";break;case os.Worker:r="ProfilingSessionLogger-Worker"}switch(e.id){case ts.MissingProfilerImplementation:n.sendTraceTag(543477840,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Factory doesn't know how to create profiler of type ${e.message}`);break;case ts.FailingValidationsInProfilerFactory:n.sendTraceTag(543477841,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Validations failed while creating the profiler`);break;case ts.WindowMissingInJSEnvironment:n.sendTraceTag(543477842,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Unable to find window in the JS environment`);break;case ts.WindowPropertyNameChecked:n.sendTraceTag(543477843,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case ts.UserAgentToParseChromiumMajorVersionNumber:n.sendTraceTag(543477844,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case ts.ChromeNotPresentInUserAgent:n.sendTraceTag(543477845,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Chrome was not found in the user agent`);break;case ts.UnableToIsolateChromeInformationFromUserAgent:n.sendTraceTag(543477846,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to isolate chrome information from the user agent`);break;case ts.UnableToExtractChromeVersionInformation:n.sendTraceTag(543477847,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to extract chrome version information from the user agent`);break;case ts.UnableToParseChromeMajorVersionString:n.sendTraceTag(543477848,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to parse the chromium major version number`);break;case ts.ParsedChromiumMajorVersionNumber:n.sendTraceTag(543477849,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case ts.UserAgentToCheckForChromiumBrowser:n.sendTraceTag(543477850,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case ts.EmptyUserAgentString:n.sendTraceTag(543477851,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Empty user agent string`);break;case ts.BrowserUserAgentNotChromiumBased:n.sendTraceTag(543477852,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser not chromium based`);break;case ts.UserAgentSpoofedToBeChromium:n.sendTraceTag(543477853,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case ts.BrowserNotChromiumBasedBrowser:n.sendTraceTag(543477854,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Browser user agent spoofed to be chromium based`);break;case ts.UnsupportedChromiumMajorVersionNumber:n.sendTraceTag(543477855,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Unsupported chromium major version number`);break;case ts.ProfilerInitOptionsNullOrUndefined:n.sendTraceTag(543477856,d.msoulscat_Wac_Telemetry,c.Info,"ProfilerInitOptions cannot be null or undefined");break;case ts.SamplingIntervalIsLessThanOrEqualToZero:n.sendTraceTag(543477857,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Sampling interval must be greater than zero`);break;case ts.SamplingIntervalLessThanMinimumSupportedSamplingInterval:n.sendTraceTag(543477858,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Sampling interval ${e.message.samplingInterval} is less than minimum supported sampling interval ${e.message.minimumSupportedSamplingInterval}. API might perform scaling`);break;case ts.UnsupportedBrowser:n.sendTraceTag(543477859,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in this browser`);break;case ts.UnsupportedOperatingSystem:n.sendTraceTag(543477888,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in this operating system`);break;case ts.JSSelfProfilingAPIUnavailable:n.sendTraceTag(543477889,d.msoulscat_Wac_Telemetry,c.Info,`${r}: JSSelfProfiling is not available`);break;case ts.RetrievedUserAgent:n.sendTraceTag(543477890,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case ts.NullJSCPUProfilerStartCalled:n.sendTraceTag(543477891,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullJSCPUProfiler start called`);break;case ts.NullJSCPUProfilerStopCalled:n.sendTraceTag(543477892,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullJSCPUProfiler stop called`);break;case ts.NullOrUndefinedProfilerInitOptions:n.sendTraceTag(543477893,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProfilerInitOptions is null or undefined`);break;case ts.MaxBufferSizeFixedToDefaultSize:n.sendTraceTag(543477894,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size was fixed to the default max size`);break;case ts.MaxBufferSizeWasNotFixedBeforeRetrieval:n.sendTraceTag(543477895,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Retrieve was called before fix max buffer size was called. The returned options can be undefined`);break;case ts.ProfilerNotPresentInJSEnvironment:n.sendTraceTag(543477896,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler is not present in the JS environment indicating JSSelfProfiling API is not available`);break;case ts.SamplingIntervalValidationCheckFailed:n.sendTraceTag(543477897,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Sampling interval validation check failed`);break;case ts.MaxBufferValidationFailed:n.sendTraceTag(543477898,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size validation failed`);break;case ts.MaxBufferSizeNotSpecified:n.sendTraceTag(543477899,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size is not specified`);break;case ts.MaxBufferSizeLessThanOrEqualToZero:n.sendTraceTag(543477900,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Max buffer size is less than or equal to zero`);break;case ts.ManualProfilerValidationFailed:n.sendTraceTag(543477901,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Timed profiler initialization options failed to pass manual profiler initialization options`);break;case ts.ProfilingIntervalValidationFailed:n.sendTraceTag(543477902,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval validation failed`);break;case ts.ProfilingIntervalNullOrUndefined:n.sendTraceTag(543477903,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is null or undefined`);break;case ts.ProfilingIntervalLessThanOrEqualToZero:n.sendTraceTag(543477904,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is less than or equal to zero`);break;case ts.ProfilingIntervalLessThanSamplingInterval:n.sendTraceTag(543477905,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling interval is less than sampling interval`);break;case ts.TimedProfilerValidationFailed:n.sendTraceTag(543477906,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Continuous profiler init options failed to pass timed profiler initialization options`);break;case ts.IdleIntervalValidationFailed:n.sendTraceTag(543477907,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval validation failed for continuous profiler`);break;case ts.IdleIntervalIsNullOrUndefined:n.sendTraceTag(543477908,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval is a required argument for continuous profiler`);break;case ts.IdleIntervalIsLessThanOrEqualToZero:n.sendTraceTag(543477909,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Idle interval must be greater than zero`);break;case ts.PostProfilerStartCallbackSpecified:n.sendTraceTag(543477910,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A post profiler start callback is specified`);break;case ts.PreProfilerStartCheckFailed:n.sendTraceTag(543477911,d.msoulscat_Wac_Telemetry,c.Info,`${r}: One or more pre-profiler start checks failed`);break;case ts.MaxBufferSizeNotFixed:n.sendTraceTag(543477912,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Max buffer size must be fixed before we get to this point. Is the profiler being created outside the factory?`);break;case ts.BailingOutOnNullProfiler:n.sendTraceTag(539109121,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null profiler was created due to some error, bailing out from profiling loop`);break;case ts.NotProcessingCapturedTraceDueToUserBeingIdle:n.sendTraceTag(537706779,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No browser events were detected between profiler start and profiler end. data will not be proccessed since user was idle`);break;case ts.ProfilerAlreadyStarted:n.sendTraceTag(543477913,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Attempting to start the profiler even though the profiler is already started. Stop the profiler first and attempt a restart`);break;case ts.ProfilerStartSucceeded:n.sendTraceTag(543477914,d.msoulscat_Wac_Telemetry,c.Info,`${r}: start the profiler successfully`);break;case ts.InvokingPostProfilerStartCallback:n.sendTraceTag(543477915,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Invoking the post profiler start callback`);break;case ts.PostProfilerStopCallbackSpecified:n.sendTraceTag(543477916,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A callback for post profiler stop is specified`);break;case ts.ProfilerInstanceIsUndefined:n.sendTraceTag(543477917,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler instance is undefined. Is the profiler is being stopped without ever starting?`);break;case ts.ProfilerStopPromiseResolved:n.sendTraceTag(543477918,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler stop promise has been resolved successfully`);break;case ts.ProfilerStopPromiseRejected:n.sendTraceTag(543477919,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${JSON.stringify({promiseRejectionReason:e.message})}`);break;case ts.PostProfilerStopCallbackInvoked:n.sendTraceTag(543477920,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Post profiler stop callback is being invoked`);break;case ts.PostTimedStartProfilerStartCallbackInvoked:n.sendTraceTag(543477921,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Post timed profiler start callback invoked`);break;case ts.ProfilingIntervalIsUndefined:n.sendTraceTag(543477922,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiling interval is expected to be defined for timed profiler`);break;case ts.TimerJobToStopProfilerSet:n.sendTraceTag(543477923,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A timer job to stop the profiler is created`);break;case ts.TimedProfilerStopCallbackInvoked:n.sendTraceTag(543477952,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Timed profiler is being stopped automatically`);break;case ts.TimedProfilerIsBeingStoppedManually:n.sendTraceTag(543477953,d.msoulscat_Wac_Telemetry,c.Warning,`${r}: Timed profiler is being stopped manually`);break;case ts.ProfilerStartPromiseCreated:n.sendTraceTag(543477954,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiler start promise has been created`);break;case ts.ProfilerStopGoingToBeInvoked:n.sendTraceTag(543477955,d.msoulscat_Wac_Telemetry,c.Info,`${r}: A call to stop profiler is going to be invoked`);break;case ts.SamplingIntervalUsedForStartingProfiler:n.sendTraceTag(543477956,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case ts.MaxBufferSize:n.sendTraceTag(543477957,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case ts.NoProfilerInstanceBuilt:n.sendTraceTag(543477958,d.msoulscat_Wac_Telemetry,c.Error,`${r}: No instance of a profiler was built. Missing implementation?`);break;case ts.ProfilerInitOptionsValidationFailed:n.sendTraceTag(543477959,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ProfilerInitOptions validation failed`);break;case ts.UnableToFixUpProfilerInitOptions:n.sendTraceTag(543477960,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to fixup profilerInitOptions`);break;case ts.ProfilingIsNotEnabled:n.sendTraceTag(543477961,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling feature is not enabled`);break;case ts.ProfilingIsNotSupportedEnvironment:n.sendTraceTag(543477962,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Profiling is not supported in the environment`);break;case ts.FeatureCheckerIsNullOrUndefined:n.sendTraceTag(543477963,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Feature checker is null or undefined`);break;case ts.NullSupportedEnvironmentCheckerInvoked:n.sendTraceTag(543477964,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullSupportedEnvironmentChecker was invoked`);break;case ts.NullJSCPUProfilerInitOptionsValidatorInvoked:n.sendTraceTag(543477965,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullJSCPUProfilerInitOptionsValidator was invoked`);break;case ts.NullJSCPUProfilerFactoryInvoked:n.sendTraceTag(543477966,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullJSCPUProfilerFactory createProfiler was invoked`);break;case ts.NullOrUndefinedIdleInterval:n.sendTraceTag(543477967,d.msoulscat_Wac_Telemetry,c.Error,`${r}: idleIntervalInMs is null or undefined. So killing the timer job`);break;case ts.CreateProfilerDidNotSubscribeProfilerObserver:n.sendTraceTag(543477969,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A profiler observer was never subscribed to the created profiler`);break;case ts.NullOrUndefinedCustomPropertiesRetriever:n.sendTraceTag(543477972,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Custom Properties retriever is null or undefined`);break;case ts.NullOrUndefinedCustomProperties:n.sendTraceTag(543477973,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Custom Properties is null or undefined`);break;case ts.CustomPropertyKeyIsNull:n.sendTraceTag(543477974,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A custom property key is null`);break;case ts.CustomPropertyValueIsNull:n.sendTraceTag(543477975,d.msoulscat_Wac_Telemetry,c.Error,`${r}: A custom property value is null`);break;case ts.RetrieveCallTreesCalledBeforeTransform:n.sendTraceTag(543477976,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Transform should be called before retrieveCallTrees`);break;case ts.RetrieveBuiltCallTreesBeforeBuildCallTrees:n.sendTraceTag(543477977,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildCallTrees should be called before retrieveBuiltCallTrees`);break;case ts.RetrieveStacksCalledBeforeBuildStacks:n.sendTraceTag(543477978,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildStacks should be called before retrieveStacks`);break;case ts.ExecutionStacksNeverBuilt:n.sendTraceTag(543477979,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Execution stacks were not built. Instead an empty array of stacks will be returned`);break;case ts.PeekOnNullExecutionStackInvoked:n.sendTraceTag(543477980,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Peek was invoked on Null ExecutionStack`);break;case ts.PopOnNullExecutionStackInvoked:n.sendTraceTag(543477981,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Pop was invoked on Null ExecutionStack`);break;case ts.EmptyStacks:n.sendTraceTag(543477982,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Stacks array is empty. No further processing can be performed.`);break;case ts.EmptyFrames:n.sendTraceTag(543477983,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Frames array is empty. No further processing can be performed.`);break;case ts.ForciblyExitingLoopWhileBuildingStack:n.sendTraceTag(543477984,d.msoulscat_Wac_Telemetry,c.Error,`${r}: While loop is being forcibly exited because of a runaway while loop `);break;case ts.RetrieveStackCalledBeforeBuildStack:n.sendTraceTag(543477985,d.msoulscat_Wac_Telemetry,c.Error,`${r}: BuildStack should be called before RetrieveStack`);break;case ts.ExecutionStackNeverBuilt:n.sendTraceTag(543477986,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Built execution stack is undefined. So null execution stack will be returned`);break;case ts.ConvertStacksToCallTreesNeverCalled:n.sendTraceTag(543477987,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Convert stacks to call trees was not called before retrieve call trees. Empty call trees will be returned`);break;case ts.ConvertStackToCallTreeNeverCalled:n.sendTraceTag(543478016,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Convert stack to call tree was not called before retrieve call tree. Null call tree will be returned`);break;case ts.NullFrameNodeCreated:n.sendTraceTag(543478017,d.msoulscat_Wac_Telemetry,c.Info,`${r}: NullFrameNode created`);break;case ts.InvalidSampleIndex:n.sendTraceTag(543478018,d.msoulscat_Wac_Telemetry,c.Error,`${r}: sampleIndex needs to be greater than zero for proper indexing`);break;case ts.InvalidFrameNodeStartTime:n.sendTraceTag(543478019,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid frame node starting time`);break;case ts.InvalidFrameNodeExecutionTime:n.sendTraceTag(543478020,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid frame node execution time`);break;case ts.InvalidNewFrameNodeExecutionTime:n.sendTraceTag(543478021,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid new frame node execution time`);break;case ts.NegativeSubTreeExecutionTime:n.sendTraceTag(543478022,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Negative sub tree execution time`);break;case ts.FixerForProfilerType:n.sendTraceTag(543478023,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message.toString()}`);break;case ts.MissingProfilerInitOptionsFixerImplementation:n.sendTraceTag(543478024,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Missing profiler init options fixer for unknown profiler type`);break;case ts.LoopBackFixerFixProfilerInitOptionsInvoked:n.sendTraceTag(543478025,d.msoulscat_Wac_Telemetry,c.Error,`${r}: LoopBackFixer fixProfilerInitOptions was invoked`);break;case ts.LoopBackFixerRetrieveFixedProfilerInitOptionsInvoked:n.sendTraceTag(543478026,d.msoulscat_Wac_Telemetry,c.Error,`${r}: LoopBackFixer retrieveFixedProfilerInitOptions was invoked`);break;case ts.MissingDeObfuscationEndpoint:n.sendTraceTag(543478027,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined deObfuscation endpoint was provided`);break;case ts.NotProcessingCapturedTraceDueToDocumentBeingHiddenDuringProfiling:n.sendTraceTag(543478028,d.msoulscat_Wac_Telemetry,c.Info,`${r}: The profile was captured in a hidden document. So, we are not processing it`);break;case ts.NullCallTreeDepthFirstIteratorInvoked:n.sendTraceTag(543478029,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null getDepthFirstIterator was invoked`);break;case ts.EmptySamplesArrayPassedToFilter:n.sendTraceTag(543478030,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to properly filter out samples we need at least one sample`);break;case ts.NullCallTreeLeftMostNodesIteratorInvoked:n.sendTraceTag(543478031,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null iterator was returned back to iterate over left most nodes`);break;case ts.NullCallTreeRightMostNodesIteratorInvoked:n.sendTraceTag(543478032,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null iterator was returned back to iterate over right most nodes`);break;case ts.MissingIsProfilingEnabledOnFeatureChecker:n.sendTraceTag(543478033,d.msoulscat_Wac_Telemetry,c.Error,`${r}: isProfilingEnabled is missing in FeatureChecker`);break;case ts.FeatureCheckerIsProfilingEnabledNotAFunction:n.sendTraceTag(543478034,d.msoulscat_Wac_Telemetry,c.Error,`${r}: isProfilingEnabled on FeatureChecker is not a function`);break;case ts.NullCallTreeGetTotalExecutionTimeInvoked:n.sendTraceTag(543478035,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTree getTotalExecutionTimeInMs was invoked`);break;case ts.NullCallTreeGetCustomPropertiesInvoked:n.sendTraceTag(543478036,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTree getCustomProperties was invoked`);break;case ts.SerializedCallTrees:n.sendTraceTag(543478037,d.msoulscat_Wac_Telemetry,c.Info,`${e.message}`);break;case ts.NullCallTreeIteratorImplGetNextInvoked:n.sendTraceTag(543478038,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTreeIterator getNext was invoked`);break;case ts.NullCallTreeIteratorImplHasMoreInvoked:n.sendTraceTag(543478039,d.msoulscat_Wac_Telemetry,c.Error,`${r}: NullCallTreeIterator hasMore was invoked`);break;case ts.MissingProfilerNameForProfilerType:n.sendTraceTag(543478040,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing profiler name for profiler type ${e.message}`);break;case ts.ExpectedOnlyOneNodePerLevelInCallTree:n.sendTraceTag(543478041,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Expected to see only one node per level in the call tree`);break;case ts.MissingWebWorkerSourceURL:n.sendTraceTag(543478042,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to use the web worker to process the profile, a source URL needs to be passed into the worker. But the URL was not provided`);break;case ts.MaxNumberOfProfilersAlreadyCreated:n.sendTraceTag(543478043,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Max number of profilers have already been created. Cannot create anymore`);break;case ts.SamplingIntervalAboveMaxSamplingInterval:n.sendTraceTag(543478044,d.msoulscat_Wac_Telemetry,c.Error,`${r}: The sampling interval is above the maximum allowed sampling interval`);break;case ts.WebWorkerAPINotAvailable:n.sendTraceTag(543478045,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web Worker API is not available. We will fallback to processing traces on the main event loop`);break;case ts.UnableToBootWebWorker:n.sendTraceTag(543478046,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Attempted to start the web worker. But it failed for some reason`);break;case ts.WorkerInstanceNotFound:n.sendTraceTag(543478047,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker instance was not found. Cannot perform any action`);break;case ts.IdNotFoundInMessageToWorker:n.sendTraceTag(543478048,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id was not found in the message sent to the worker`);break;case ts.DataNotFoundInMessageToWorker:n.sendTraceTag(543478049,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Data was not found in the message sent to the worker`);break;case ts.IdNotFoundInMessageFromWorker:n.sendTraceTag(543478050,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id was not found in the message sent from the worker`);break;case ts.DataNotFoundInMessageFromWorker:n.sendTraceTag(543478051,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Data was not found in the message sent from the worker`);break;case ts.UnknownMessageFromWorker:n.sendTraceTag(543478080,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown message with message id - ${e.message} sent from the worker`);break;case ts.ErrorFromWorker:n.sendTraceTag(540844827,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Error - ${e.message} sent from the worker`);break;case ts.IdNotFoundInWorkerLogMessage:n.sendTraceTag(543478081,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Id is not present in the log message from the worker`);break;case ts.MessageNotFoundInWorkerLogMessage:n.sendTraceTag(543478082,d.msoulscat_Wac_Telemetry,c.Error,`${r}: message is not present in the log message from the worker`);break;case ts.UnknownLogMessageFromWorker:n.sendTraceTag(543478083,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown log message id - ${e.message} sent as part of the worker log message`);break;case ts.Operation:n.sendTraceTag(543478084,d.msoulscat_Wac_Telemetry,e.message.didOperationFailUnexpectedly?c.Error:c.Info,`${r}: ${JSON.stringify({operationName:e.message.operationName,parentOperationName:e.message.parentOperationName,didOperationSucceed:e.message.didOperationSucceed,measuredRunTime:e.message.measuredRunTime,logs:e.message.logs,properties:e.message.propertyBag?Array.from(e.message.propertyBag):e.message.propertyBag,exception:e.message.exception})}`);break;case ts.FallbackResultReturned:n.sendTraceTag(543478085,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Exception encountered. So, fallback result is being returned back`);break;case ts.UnknownMessageToWorker:n.sendTraceTag(543478086,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown worker messageId ${e.message} encountered`);break;case ts.ExceptionEncounteredInWorker:n.sendTraceTag(543478087,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${JSON.stringify(e.message)}`);break;case ts.MissingDeObfuscationInfoInTraceProcessingInfo:n.sendTraceTag(543478088,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing deObfuscationInfo in trace processing information`);break;case ts.MissingShouldKeepSamplesOutsideOfProfilingIntervalInTraceProcessingInfo:n.sendTraceTag(543478089,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing shouldKeepSamplesOutsideOfProfilingInterval in trace processing information`);break;case ts.MissingShouldRecordExpandedTimeStampsInTraceProcessingInfo:n.sendTraceTag(543478090,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing shouldRecordExpandedTimeStamps in trace processing information`);break;case ts.MissingCallTreeFilteringThresholdInMsInTraceProcessingInfo:n.sendTraceTag(543478091,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing callTreeFilteringThresholdInMs in trace processing information`);break;case ts.InvalidMessageReceivedByWorker:n.sendTraceTag(543478092,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid message received by the worker. Returning without any processing`);break;case ts.InvalidProcessTraceMessageReceivedByWorker:n.sendTraceTag(543478093,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid process trace message received by the worker. Returning without any processing`);break;case ts.MissingTraceInTraceProcessingInfo:n.sendTraceTag(543478094,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing trace in trace processing information`);break;case ts.SerializedCallTreesMissingInProcessorResult:n.sendTraceTag(543478095,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializedCallTrees is missing in the processor result`);break;case ts.LogsMissingInProcessorResult:n.sendTraceTag(543478096,d.msoulscat_Wac_Telemetry,c.Error,`${r}: logs is missing in the processor result`);break;case ts.UndefinedWebWorkerCompletionCallback:n.sendTraceTag(543478097,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Undefined completion callback for the processor result. The results will be ignored`);break;case ts.LogsMissingInErrorsFromWebWorker:n.sendTraceTag(543478098,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker raised an error. But no logs can be found in the message that the worker sent over. This should not happen`);break;case ts.UndefinedErrorCallback:n.sendTraceTag(543478099,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker raised an error. But the main thread has not provided a callback function to notify on error. So, ignoring the error`);break;case ts.UndefinedTraceProcessingInfoToReturnBack:n.sendTraceTag(543478100,d.msoulscat_Wac_Telemetry,c.Error,`${r}: The worker ran into an error. But no trace processing info was found to return back to the caller`);break;case ts.WebWorkerAlreadyStarted:n.sendTraceTag(543478101,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Attempting to start a web worker that has already been started`);break;case ts.WebWorkerTerminated:n.sendTraceTag(540844828,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Web worker got terminated`);break;case ts.WebWorkerErrorFallingBackToMainEventLoop:n.sendTraceTag(543478102,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Error encountered in the web worker. So falling back to processing the trace in the main event loop`);break;case ts.CustomPropertiesMissingInTrace:n.sendTraceTag(543478103,d.msoulscat_Wac_Telemetry,c.Error,`${r}: CustomProperties was not found in the trace`);break;case ts.ProfilerTraceMissingInTrace:n.sendTraceTag(543478104,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerTrace was not found in the trace`);break;case ts.ProfilerTraceStartTimestampMissingInTrace:n.sendTraceTag(543478105,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerTraceStartTimestamp was not found in the trace`);break;case ts.ProfilerPropertiesMissingInTrace:n.sendTraceTag(543478106,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProfilerProperties was not found in the trace`);break;case ts.ElapsedProfilingTimeMissingInTrace:n.sendTraceTag(543478107,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ElapsedProfilingTime was not found in the trace`);break;case ts.InvalidProfilerTraceToProcess:n.sendTraceTag(543478108,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid profiler trace to process. Returning back without processing`);break;case ts.WebWorkerError:n.sendTraceTag(543478109,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ${e.message}`);break;case ts.WebWorkerErrorCallbackNotRegistered:n.sendTraceTag(543478110,d.msoulscat_Wac_Telemetry,c.Error,`${r}: No error callback has been registered for the web worker. So ignoring the error message`);break;case ts.WebWorkerTraceProcessingInfoMissingToReturnOnError:n.sendTraceTag(543478111,d.msoulscat_Wac_Telemetry,c.Error,`${r}: In order to reprocess the trace in the main event loop, trace processing info is required. But did not find any`);break;case ts.ProfilerTrace:const s=e.logOptions?.profilerTraceLoggingChunkSize||30;let t=0;for(const o of ks(e.message.getResources(),s))n.sendTraceTag(543478112,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),resources:o})}`),t++;t=0;for(const o of ks(e.message.getFrames(),s))n.sendTraceTag(539784207,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),frames:o})}`),t++;t=0;for(const o of ks(e.message.getStacks(),s))n.sendTraceTag(539784208,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),stacks:o})}`),t++;t=0;for(const o of ks(e.message.getSamplesTrimmed(),s))n.sendTraceTag(539784209,d.msoulscat_Wac_Telemetry,c.Info,`${r}: [chunk ${t}] ${JSON.stringify({profilerTraceStartTimestamp:e.message.getProfilerTraceStartTimestamp(),samples:o})}`),t++;break;case ts.MissingCallToFilterCallTrees:n.sendTraceTag(543478113,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing a call to filterCallTrees. Returning an empty array back`);break;case ts.MissingCallToFilterFrames:n.sendTraceTag(543478114,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Missing a call to filterFrames. Returning NullCallTree back`);break;case ts.NullCallTreeFramesFiltererFilterFramesInvoked:n.sendTraceTag(543478115,d.msoulscat_Wac_Telemetry,c.Error,`${r}: filterFrames invoked on NullCallTreeFilterFrames`);break;case ts.NullCallTreeFramesFiltererRetrieveFilteredCallTreeInvoked:n.sendTraceTag(543478144,d.msoulscat_Wac_Telemetry,c.Error,`${r}: retrieveFilteredCallTree invoked on NullCallTreeFilterFrames`);break;case ts.NullCallTreeGetFramesFiltererInvoked:n.sendTraceTag(543478145,d.msoulscat_Wac_Telemetry,c.Error,`${r}: getFramesFilterer invoked on NullCallTree`);break;case ts.FilterFrameWithNoParent:n.sendTraceTag(543478146,d.msoulscat_Wac_Telemetry,c.Error,`${r}: CallTreeFramesFiltererImpl tries to filter node with no parent`);break;case ts.OperationLogMessageFiltererInitOptions:n.sendTraceTag(542389340,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${JSON.stringify(e.message)}`);break;case ts.NoCallTreesToSend:n.sendTraceTag(542229786,d.msoulscat_Wac_Telemetry,c.Info,`${r}: No call trees to send to server`);break;case ts.NullOrUndefinedProfilerEvent:n.sendTraceTag(540624656,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event sent to the profiler observer`);break;case ts.UnknownProfilerEventId:n.sendTraceTag(540624657,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown profiler event ID ${e.message} sent to the profiler observer. Are you missing a case statement?`);break;case ts.NullOrUndefinedProfilerTrace:n.sendTraceTag(540624658,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler trace sent to the observer. This message will be ignored`);break;case ts.OperationLogMessageFilteringCriteriaMissingInTrace:n.sendTraceTag(540612253,d.msoulscat_Wac_Telemetry,c.Error,`${r}: OperationLogMessageFilteringCriteria is missing in trace`);break;case ts.NullOrUndefinedProfilerObserverPassedInForSubscribe:n.sendTraceTag(540545986,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler observer passed in for subscribe`);break;case ts.NullOrUndefinedProfilerEventIds:n.sendTraceTag(540545987,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event ids`);break;case ts.UnexpectedUndefinedProfilerEventIds:n.sendTraceTag(540545988,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unexpected undefined profiler event ids`);break;case ts.NullOrUndefinedProfilerObserverPassedInForUnsubscribe:n.sendTraceTag(540393807,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler observer passed in for unsubscribe`);break;case ts.NullOrUndefinedProfilerEventToUnsubscribe:n.sendTraceTag(540393808,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null or undefined profiler event id passed for unsubscribe`);break;case ts.ProfilerObserverWasNeverSubscribed:n.sendTraceTag(540393809,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiler observer does not have any subscriptions`);break;case ts.UnexpectedNullOrUndefinedSubscribedProfilerEventIds:n.sendTraceTag(540393810,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Expected to receive a set of subscribed profiler event IDs. But unexpectedly received null/undefined`);break;case ts.ProfilerObserverNeverSubscribedForProfilerEventId:n.sendTraceTag(540393811,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Profiler observer never subscribed for the event ${e.message} that it is requesting to unsubscribe from`);break;case ts.NullOrUndefinedItemToSubscribe:n.sendTraceTag(509374879,d.msoulscat_Wac_Telemetry,c.Error,`${r}: null or undefined item tried to subscribe to an instance of profiler. type: ${e.message}`);break;case ts.NullOrUndefinedItemForUnsubscribe:n.sendTraceTag(509374878,d.msoulscat_Wac_Telemetry,c.Error,`${r}: null or undefined item tried to unsubscribe from an instance of profiler. type: ${e.message}`);break;case ts.ItemWasNeverSubscribed:n.sendTraceTag(509374877,d.msoulscat_Wac_Telemetry,c.Error,`${r}: trying to unsubscribe while item was never subscribed. type: ${e.message}`);break;case ts.NumberOfCallTreesFiltererByCustomFilterers:n.sendTraceTag(509374876,d.msoulscat_Wac_Telemetry,c.Info,`${r}: applied custom filterer and removed: ${e.message.filteredCount} call trees out of ${e.message.totalCount}.`);break;case ts.CallTreeCustomPropertiesRetrieversMissingInTrace:n.sendTraceTag(539797325,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Call Tree Custom Properties Retrievers missing in trace. Trace is invalid and web worker will return without processing`);break;case ts.ProcessTraceParamsIsNullOrUndefined:n.sendTraceTag(539767647,d.msoulscat_Wac_Telemetry,c.Error,`${r}: ProcessTraceParams is null or undefined`);break;case ts.CurrentTraceBeingProcessedNullOrUndefined:n.sendTraceTag(539767648,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Current trace being processed is null or undefined`);break;case ts.TraceIdMissingInTrace:n.sendTraceTag(539767629,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Trace ID is missing in trace`);break;case ts.GetCustomPropertiesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247246,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetCustomProperties called on NullJSCPUProfilerTrace`);break;case ts.GetFramesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247247,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetFrames called on NullJSCPUProfilerTrace`);break;case ts.GetStacksCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247248,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetStacks called on NullJSCPUProfilerTrace`);break;case ts.GetSamplesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247249,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetSamples called on NullJSCPUProfilerTrace`);break;case ts.GetProfilerTraceStartTimestampCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247250,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetProfilerTraceStartTimestamp called on NullJSCPUProfilerTrace`);break;case ts.GetProfilerPropertiesCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247251,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetProfilerProperties called on NullJSCPUProfilerTrace`);break;case ts.GetElapsedProfilingTimeInMsCalledOnNullJSCPUProfilerTrace:n.sendTraceTag(527247252,d.msoulscat_Wac_Telemetry,c.Error,`${r}: GetElapsedProfilingTimeInMs called on NullJSCPUProfilerTrace`);break;case ts.RemoveQueryParamsFromResourceURLsNeverCalled:n.sendTraceTag(527247253,d.msoulscat_Wac_Telemetry,c.Error,`${r}: removeQueryParamsFromResourceURLs was never called`);break;case ts.SerializeCallTreeNeverCalled:n.sendTraceTag(506590178,d.msoulscat_Wac_Telemetry,c.Error,`${r}: serializeCallTree should be called before attempting to retrieve the call tree. Returning undefined`);break;case ts.ConvertToJSONStringWasNeverCalled:n.sendTraceTag(506587295,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerSubscribeProfilerObserverCalled:n.sendTraceTag(506217602,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerUnsubscribeProfilerObserverCalled:n.sendTraceTag(506217601,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerSubscribeCallTreeCustomPropertiesRetrieverCalled:n.sendTraceTag(506217600,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerUnsubscribeCallTreeCustomPropertiesRetrieverCalled:n.sendTraceTag(506217571,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerSubscribeCallTreeCustomFiltererCalled:n.sendTraceTag(506217570,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerUnsubscribeCallTreeCustomFiltererCalled:n.sendTraceTag(506217569,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.NullJSCPUProfilerProcessProfilesCalled:n.sendTraceTag(506217568,d.msoulscat_Wac_Telemetry,c.Error,`${r}: convertToJSONString was never called. Returning a bad output`);break;case ts.UnableToRetrieveCompressedBlob:n.sendTraceTag(506217675,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to retrieve compressed blob`);break;case ts.UnableToRetrieveArrayBufferFromCompressedBlob:n.sendTraceTag(506217674,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unable to retrieve array buffer from compressed blob`);break;case ts.CompressionStreamAPIIsNotAvailable:n.sendTraceTag(506217673,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Compression Stream API is not available. So, cannot compress the data`);break;case ts.WebWorkerSource:n.sendTraceTag(506214145,d.msoulscat_Wac_Telemetry,c.Info,`${r}: ${e.message}`);break;case ts.WebWorkerCreationSucceeded:n.sendTraceTag(506214144,d.msoulscat_Wac_Telemetry,c.Info,`${r}: Web worker creation succeeded`);break;case ts.WebWorkerCreationFailed:n.sendTraceTag(506214115,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker creation failed`);break;case ts.WorkerNotRunning:n.sendTraceTag(506214114,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker is not running`);break;case ts.FailedToCompressMultipleCallTreesDeobfuscationRequest:n.sendTraceTag(506209152,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Failed to compress multiple call trees deobfuscation request`);break;case ts.FailedToCompressIndividualCallTreeDeobfuscationRequest:n.sendTraceTag(506209123,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Failed to compress individual call tree deobfuscation request`);break;case ts.NullStringCompressorInvoked:n.sendTraceTag(506206368,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Null string compressor should not be invoked`);break;case ts.UnknownStoredWebWorkerRequestId:n.sendTraceTag(506081793,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown stored web worker request id ${e.message}`);break;case ts.UnknownWebWorkerRequestId:n.sendTraceTag(506081792,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker request id ${e.message}`);break;case ts.MessageFromWorkerIsNullorUndefined:n.sendTraceTag(506081763,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Message from worker is null or undefined`);break;case ts.MessageFromWorkerNotObject:n.sendTraceTag(506081762,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Message from worker is not an object`);break;case ts.UnknownWebWorkerRequestIdWhenHandlingKnownWebWorkerError:n.sendTraceTag(506081761,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker request id when handling known web worker error ${e.message}`);break;case ts.WebWorkerInitializationError:n.sendTraceTag(506081760,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Web worker initialization error ${e.message}`);break;case ts.UnknownWebWorkerRequestIdWhenHandlingUnknownWebWorkerError:n.sendTraceTag(506081759,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker request id when handling unknown web worker error ${e.message}`);break;case ts.StartWorkerInvokedOnNullWorker:n.sendTraceTag(506081758,d.msoulscat_Wac_Telemetry,c.Error,`${r}: StartWorker invoked on null worker`);break;case ts.ProcessRequestInvokedOnNullWorker:n.sendTraceTag(506081757,d.msoulscat_Wac_Telemetry,c.Error,`${r}: processRequest invoked on null worker`);break;case ts.GetWorkerIdInvokedOnNullWorker:n.sendTraceTag(506081756,d.msoulscat_Wac_Telemetry,c.Error,`${r}: getWorkerId invoked on null worker`);break;case ts.UnknownWebWorkerErrorId:n.sendTraceTag(506081755,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown web worker error id ${e.message}`);break;case ts.InvalidTraceReceivedByWorker:n.sendTraceTag(506081754,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Invalid trace received by the worker`);break;case ts.UnknownMessageIdReceivedByWorker:n.sendTraceTag(506081753,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown message id received by the worker`);break;case ts.WorkerIDBeingSetToBusyNotPresentInIdleWorkers:n.sendTraceTag(506078679,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker ID being set to busy is not present in idle workers ${e.message}`);break;case ts.WorkerIDBeingSetToIdleNotPresentInBusyWorkers:n.sendTraceTag(506078678,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Worker ID being set to idle is not present in busy workers ${e.message}`);break;case ts.UnknownWorkerIDBeingTerminated:n.sendTraceTag(506078677,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown worker ID being terminated ${e.message}`);break;default:n.sendTraceTag(543478147,d.msoulscat_Wac_Telemetry,c.Error,`${r}: Unknown LogId. Please add a case for ${e.id}`)}}constructor(e){this.shouldTransportLogs=e}}class Os{processLogMessage(e){this.shouldFilterLogMessage(e)||this.logMessageTransporters.forEach((r=>{r.transportLogMessage(e)}))}subscribeFilterer(e){this.logMessageFilterers.push(e)}subscribeTransporter(e){this.logMessageTransporters.push(e)}shouldFilterLogMessage(e){for(const r of this.logMessageFilterers)if(r.shouldFilterLogMessage(e))return!0;return!1}constructor(){this.logMessageFilterers=[],this.logMessageTransporters=[]}}class Ws extends Os{processLogMessage(e){this.storedLogMessages.queue(e),this.storedLogMessages.length()>10&&this.logMessageTransporters.length>0&&!this.idleTimeJobScheduled&&(this.idleTimeJobScheduled=!0,this.transportLogsInIdleTime())}getNextLogMessageToTransport(){let e=this.storedLogMessages.peek();for(;void 0!==e&&this.shouldFilterLogMessage(e);)this.storedLogMessages.dequeue(),e=this.storedLogMessages.peek();return void 0!==e&&this.storedLogMessages.dequeue(),e}transportLogsInIdleTime(){const e=P.generateOperationResult({didOperationSucceed:!1,result:void 0});this.idleTimeJobScheduler.scheduleJobForIdleTime((()=>{f.startNew("TransportLogMessagesInIdleTime",(e=>{let r=this.getNextLogMessageToTransport(),s=0;for(;void 0!==r&&s<50;)this.logMessageTransporters.forEach((e=>{void 0!==r&&e.transportLogMessage(r)})),s+=1,r=this.getNextLogMessageToTransport(),e.addProperty("NumberOfLogMessagesTransported",s);return this.idleTimeJobScheduled=!1,P.generateOperationResult({didOperationSucceed:!0,result:void 0})}),e,this.logger)}))}getAllStoredLogMessages(){return this.storedLogMessages}constructor(e,r){super(),this.idleTimeJobScheduler=e,this.logger=r,this.storedLogMessages=z.createQueue(),this.idleTimeJobScheduled=!1}}class Ns{retrievePackageV2(e){const r=P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});return f.startNew("RetrieveCPUProfilingPackageV2",(r=>{if(null==e)return P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});if(null==e.ulsInstance)return P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});if(l(e.ulsInstance),null==e.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});if(null==e.useMainEventLoopForProfilerTraceProcessing&&(e.useMainEventLoopForProfilerTraceProcessing=Re),r.addProperty("UseMainEventLoopForProfilerTraceProcessing",e.useMainEventLoopForProfilerTraceProcessing),!e.useMainEventLoopForProfilerTraceProcessing&&null==e.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});null==e.callTreeFilteringThresholdInMs&&(e.callTreeFilteringThresholdInMs=50),r.addProperty("CallTreeFilteringThresholdInMs",e.callTreeFilteringThresholdInMs),null==e.shouldProfilingStartInAHiddenDocument&&(e.shouldProfilingStartInAHiddenDocument=be),r.addProperty("ShouldProfilingStartInAHiddenDocument",e.shouldProfilingStartInAHiddenDocument),null==e.shouldProcessProfileCapturedInAHiddenDocument&&(e.shouldProcessProfileCapturedInAHiddenDocument=Oe),r.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",e.shouldProcessProfileCapturedInAHiddenDocument),null==e.shouldKeepSamplesOutsideOfProfilingInterval&&(e.shouldKeepSamplesOutsideOfProfilingInterval=We),r.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",e.shouldKeepSamplesOutsideOfProfilingInterval),null==e.shouldRecordExpandedTimeStamps&&(e.shouldRecordExpandedTimeStamps=Me),r.addProperty("ShouldRecordExpandedTimeStamps",e.shouldRecordExpandedTimeStamps),null==e.shouldSendAllCallTreesFromProfileInASingleRequest&&(e.shouldSendAllCallTreesFromProfileInASingleRequest=ye),r.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",e.shouldSendAllCallTreesFromProfileInASingleRequest),null==e.frameTotalExecutionTimeFilteringThresholdInMs&&(e.frameTotalExecutionTimeFilteringThresholdInMs=0),r.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",e.frameTotalExecutionTimeFilteringThresholdInMs),null==e.shouldAlwaysLogOperationsData&&(e.shouldAlwaysLogOperationsData=xe),r.addProperty("ShouldAlwaysLogOperationsData",e.shouldAlwaysLogOperationsData),null==e.durationThresholdInMsToLogOperationData&&(e.durationThresholdInMsToLogOperationData=50),r.addProperty("DurationThresholdInMsToLogOperationData",e.durationThresholdInMsToLogOperationData),null==e.shouldUseInMemoryLogger&&(e.shouldUseInMemoryLogger=!1),r.addProperty("ShouldUseInMemoryLogger",e.shouldUseInMemoryLogger),null==e.shouldTransportLogs&&(e.shouldTransportLogs=!0),r.addProperty("ShouldTransportLogs",e.shouldTransportLogs),this.logMessageTransporter=new bs(e.shouldTransportLogs),e.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new Os,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==e.shouldSendProfilesForDeobfuscationImmediately&&(e.shouldSendProfilesForDeobfuscationImmediately=we),r.addProperty("ShouldSendProfilesForDeobfuscationImmediately",e.shouldSendProfilesForDeobfuscationImmediately),null==e.shouldProcessProfileCapturedWhileUserIsIdle&&(e.shouldProcessProfileCapturedWhileUserIsIdle=Ee),r.addProperty("ShouldProcessProfileCapturedWhileUserIsIdle",e.shouldProcessProfileCapturedWhileUserIsIdle),null==e.shouldKeepQueryParamsInResourceURLs&&(e.shouldKeepQueryParamsInResourceURLs=_e),r.addProperty("ShouldKeepQueryParamsInResourceURLs",e.shouldKeepQueryParamsInResourceURLs),null==e.shouldMakeSerializedCallTreesFullyReconstructible&&(e.shouldMakeSerializedCallTreesFullyReconstructible=Ue),r.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",e.shouldMakeSerializedCallTreesFullyReconstructible),null==e.shouldSkipSupportedOSCheck&&(e.shouldSkipSupportedOSCheck=!1),r.addProperty("ShouldSkipSupportedOSCheck",e.shouldSkipSupportedOSCheck),null==e.shouldAllowForConditionalProfileProcessingAndSending&&(e.shouldAllowForConditionalProfileProcessingAndSending=!1),r.addProperty("ShouldAllowForConditionalProfileProcessingAndSending",e.shouldAllowForConditionalProfileProcessingAndSending);const s=new vs(e.shouldAlwaysLogOperationsData,he,e.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(s),P.generateOperationResult({didOperationSucceed:!0,result:new Cs(e.featureChecker,e,this.logMessageProcessor,this.logger)})}),r,this.logger).getResult()}retrievePackage(e,r){const s=P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});return f.startNew("RetrieveCPUProfilingPackage",(s=>{if(null==r)return P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});if(null==r.ulsInstance)return P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});if(l(r.ulsInstance),null==r.deObfuscationEndpoint)return this.logger.logMissingDeObfuscationEndpoint(),P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});if(null==r.useMainEventLoopForProfilerTraceProcessing&&(r.useMainEventLoopForProfilerTraceProcessing=Re),s.addProperty("UseMainEventLoopForProfilerTraceProcessing",r.useMainEventLoopForProfilerTraceProcessing),!r.useMainEventLoopForProfilerTraceProcessing&&null==r.profilerTraceProcessingWebWorkerSourceURL)return this.logger.logMissingWebWorkerSourceURL(),P.generateOperationResult({didOperationSucceed:!1,result:new Ss(this.logger)});null==r.callTreeFilteringThresholdInMs&&(r.callTreeFilteringThresholdInMs=50),null==r.shouldProfilingStartInAHiddenDocument&&(r.shouldProfilingStartInAHiddenDocument=be),null==r.shouldProcessProfileCapturedInAHiddenDocument&&(r.shouldProcessProfileCapturedInAHiddenDocument=Oe),null==r.shouldKeepSamplesOutsideOfProfilingInterval&&(r.shouldKeepSamplesOutsideOfProfilingInterval=We),null==r.shouldRecordExpandedTimeStamps&&(r.shouldRecordExpandedTimeStamps=Me),null==r.shouldSendAllCallTreesFromProfileInASingleRequest&&(r.shouldSendAllCallTreesFromProfileInASingleRequest=ye),null==r.frameTotalExecutionTimeFilteringThresholdInMs&&(r.frameTotalExecutionTimeFilteringThresholdInMs=0),null==r.shouldAlwaysLogOperationsData&&(r.shouldAlwaysLogOperationsData=xe),null==r.durationThresholdInMsToLogOperationData&&(r.durationThresholdInMsToLogOperationData=50),null==r.shouldUseInMemoryLogger&&(r.shouldUseInMemoryLogger=!1),r.shouldUseInMemoryLogger||(this.logger.unsubscribe(this.logMessageProcessor),this.logMessageProcessor=new Os,this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)),null==r.shouldSendProfilesForDeobfuscationImmediately&&(r.shouldSendProfilesForDeobfuscationImmediately=we),null==r.shouldProcessProfileCapturedWhileUserIsIdle&&(r.shouldProcessProfileCapturedWhileUserIsIdle=Ee),null==r.shouldKeepQueryParamsInResourceURLs&&(r.shouldKeepQueryParamsInResourceURLs=_e),null==r.shouldMakeSerializedCallTreesFullyReconstructible&&(r.shouldMakeSerializedCallTreesFullyReconstructible=Ue);const t=new vs(r.shouldAlwaysLogOperationsData,he,r.durationThresholdInMsToLogOperationData,this.logger);return this.logMessageProcessor.subscribeFilterer(t),s.addProperty("DeObfuscationEndpoint",r.deObfuscationEndpoint),s.addProperty("CallTreeFilteringThresholdInMs",r.callTreeFilteringThresholdInMs),s.addProperty("ShouldProfilingStartInAHiddenDocument",r.shouldProfilingStartInAHiddenDocument),s.addProperty("ShouldProcessProfileCapturedInAHiddenDocument",r.shouldProcessProfileCapturedInAHiddenDocument),s.addProperty("ShouldKeepSamplesOutsideOfProfilingInterval",r.shouldKeepSamplesOutsideOfProfilingInterval),s.addProperty("ShouldRecordExpandedTimeStamps",r.shouldRecordExpandedTimeStamps),s.addProperty("WebWorkerSourceURL",r.profilerTraceProcessingWebWorkerSourceURL),s.addProperty("ShouldSendAllCallTreesFromProfileInASingleRequest",r.shouldSendAllCallTreesFromProfileInASingleRequest),s.addProperty("FrameTotalExecutionTimeFilteringThresholdInMs",r.frameTotalExecutionTimeFilteringThresholdInMs),s.addProperty("ShouldAlwaysLogOperationsData",r.shouldAlwaysLogOperationsData),s.addProperty("DurationThresholdToLogOperationData",r.durationThresholdInMsToLogOperationData),s.addProperty("ShouldUseInMemoryLogger",r.shouldUseInMemoryLogger),s.addProperty("ShouldKeepQueryParamsInResourceURLs",r.shouldKeepQueryParamsInResourceURLs),s.addProperty("ShouldMakeSerializedCallTreesFullyReconstructible",r.shouldMakeSerializedCallTreesFullyReconstructible),P.generateOperationResult({didOperationSucceed:!0,result:new Cs(e,r,this.logMessageProcessor,this.logger)})}),s,this.logger).getResult()}constructor(){this.logger=new Is(os.MainEventLoop);const e=x.getIdleTimeJobScheduler();this.logMessageProcessor=new Ws(e,this.logger),this.logMessageTransporter=new bs(!0),this.logMessageProcessor.subscribeTransporter(this.logMessageTransporter),this.logger.subscribe(this.logMessageProcessor)}}function Ms(){return new Ns}officeOnlinePerf=r}();
//# sourceMappingURL=officeOnlinePerf.min.js.map